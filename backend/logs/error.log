
{"timestamp":"2025-08-20 13:06:27","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 13:06:27","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 13:06:27","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 13:08:12","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 13:08:12","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 13:08:12","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
