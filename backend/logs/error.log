
{"timestamp":"2025-08-20 13:06:27","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 13:06:27","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 13:06:27","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 13:08:12","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 13:08:12","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 13:08:12","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 15:26:02","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 15:26:02","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 15:26:02","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 15:39:29","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 15:39:29","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 15:39:29","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 15:40:55","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 15:40:55","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 15:40:55","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 15:41:32","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 15:41:32","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?page=1&limit=20","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"page":"1","limit":"20"}}
{"timestamp":"2025-08-20 15:41:32","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 15:41:50","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 15:41:50","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?page=1&limit=20","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"page":"1","limit":"20"}}
{"timestamp":"2025-08-20 15:41:50","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 15:42:04","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 15:42:04","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?page=1&limit=20","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"page":"1","limit":"20"}}
{"timestamp":"2025-08-20 15:42:04","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 15:43:43","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 15:43:43","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?page=1&limit=20","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"page":"1","limit":"20"}}
{"timestamp":"2025-08-20 15:43:43","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 15:45:37","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 15:45:37","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?page=1&limit=20","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"page":"1","limit":"20"}}
{"timestamp":"2025-08-20 15:45:37","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 15:45:40","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 15:45:40","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?page=1&limit=20","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"page":"1","limit":"20"}}
{"timestamp":"2025-08-20 15:45:40","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 19:50:48","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 19:50:48","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 19:50:48","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 19:54:34","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 19:54:34","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?page=1&limit=20","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"page":"1","limit":"20"}}
{"timestamp":"2025-08-20 19:54:34","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 19:55:24","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 19:55:24","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 19:55:24","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 19:55:50","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 19:55:50","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 19:55:50","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 19:56:03","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 19:56:03","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?page=1&limit=20","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"page":"1","limit":"20"}}
{"timestamp":"2025-08-20 19:56:03","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 20:21:54","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 20:21:54","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 20:21:54","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 20:41:30","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 20:41:30","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 20:41:30","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 20:46:15","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 20:46:15","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 20:46:15","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:02:43","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 21:02:43","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 21:02:43","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:10:52","level":"\u001b[31merror\u001b[39m","message":"Erro no servidor: listen EADDRINUSE: address already in use 0.0.0.0:3001","stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3001\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","code":"EADDRINUSE","errno":-4091,"syscall":"listen","address":"0.0.0.0","port":3001}
{"timestamp":"2025-08-20 21:15:35","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 21:15:35","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 21:15:35","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:23:09","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 21:23:09","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?page=1&limit=20","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"page":"1","limit":"20"}}
{"timestamp":"2025-08-20 21:23:09","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:23:32","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 21:23:32","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?page=1&limit=20","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"page":"1","limit":"20"}}
{"timestamp":"2025-08-20 21:23:32","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:23:55","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 21:23:55","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?page=1&limit=20","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"page":"1","limit":"20"}}
{"timestamp":"2025-08-20 21:23:55","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:25:40","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 21:25:40","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code-Insiders/1.104.0-insider Chrome/138.0.7204.100 Electron/37.2.3 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 21:25:40","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:28:18","level":"\u001b[31merror\u001b[39m","message":"Erro ao criar ativo: Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:195:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeForeignKeyConstraintError","parent":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`observacoes`,`qr_code`,`setor_id`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["TEST-1755736098617","Ativo de Teste",0,0,1,"","operacional","media","Este é um ativo criado para teste do CRUD","QR_TEST-1755736098617_1755736098625",1,0,0,true,0,"2025-08-21 00:28:18","2025-08-21 00:28:18"]},"original":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`observacoes`,`qr_code`,`setor_id`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["TEST-1755736098617","Ativo de Teste",0,0,1,"","operacional","media","Este é um ativo criado para teste do CRUD","QR_TEST-1755736098617_1755736098625",1,0,0,true,0,"2025-08-21 00:28:18","2025-08-21 00:28:18"]},"sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`observacoes`,`qr_code`,`setor_id`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["TEST-1755736098617","Ativo de Teste",0,0,1,"","operacional","media","Este é um ativo criado para teste do CRUD","QR_TEST-1755736098617_1755736098625",1,0,0,true,0,"2025-08-21 00:28:18","2025-08-21 00:28:18"],"table":"departments","fields":["department_id"],"value":1,"index":"ativos_ibfk_3","reltype":"child"}
{"timestamp":"2025-08-20 21:28:18","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:195:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","method":"POST","url":"/api/ativos","ip":"127.0.0.1","userAgent":"axios/1.11.0","body":{"codigo_patrimonio":"TEST-1755736098617","nome":"Ativo de Teste","estado":"operacional","criticidade":"media","setor_id":1,"localizacao_completa":"Setor de Teste - Linha 1 - Posição 1","observacoes":"Este é um ativo criado para teste do CRUD","department_id":1},"params":{},"query":{}}
{"timestamp":"2025-08-20 21:28:18","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:195:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:29:00","level":"\u001b[31merror\u001b[39m","message":"Erro ao criar ativo: Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:195:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeForeignKeyConstraintError","parent":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`observacoes`,`qr_code`,`setor_id`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["TEST-1755736140852","Ativo de Teste",0,0,1,"","operacional","media","Este é um ativo criado para teste do CRUD","QR_TEST-1755736140852_1755736140864",1,0,0,true,0,"2025-08-21 00:29:00","2025-08-21 00:29:00"]},"original":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`observacoes`,`qr_code`,`setor_id`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["TEST-1755736140852","Ativo de Teste",0,0,1,"","operacional","media","Este é um ativo criado para teste do CRUD","QR_TEST-1755736140852_1755736140864",1,0,0,true,0,"2025-08-21 00:29:00","2025-08-21 00:29:00"]},"sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`observacoes`,`qr_code`,`setor_id`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["TEST-1755736140852","Ativo de Teste",0,0,1,"","operacional","media","Este é um ativo criado para teste do CRUD","QR_TEST-1755736140852_1755736140864",1,0,0,true,0,"2025-08-21 00:29:00","2025-08-21 00:29:00"],"table":"departments","fields":["department_id"],"value":1,"index":"ativos_ibfk_3","reltype":"child"}
{"timestamp":"2025-08-20 21:29:00","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:195:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","method":"POST","url":"/api/ativos","ip":"127.0.0.1","userAgent":"axios/1.11.0","body":{"codigo_patrimonio":"TEST-1755736140852","nome":"Ativo de Teste","estado":"operacional","criticidade":"media","setor_id":1,"localizacao_completa":"Setor de Teste - Linha 1 - Posição 1","observacoes":"Este é um ativo criado para teste do CRUD","department_id":1},"params":{},"query":{}}
{"timestamp":"2025-08-20 21:29:00","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:195:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:29:29","level":"\u001b[31merror\u001b[39m","message":"Erro ao criar ativo: Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:195:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeForeignKeyConstraintError","parent":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`observacoes`,`qr_code`,`setor_id`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["TEST-1755736169094","Ativo de Teste",0,0,1,"","operacional","media","Este é um ativo criado para teste do CRUD","QR_TEST-1755736169094_1755736169102",9,0,0,true,0,"2025-08-21 00:29:29","2025-08-21 00:29:29"]},"original":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`observacoes`,`qr_code`,`setor_id`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["TEST-1755736169094","Ativo de Teste",0,0,1,"","operacional","media","Este é um ativo criado para teste do CRUD","QR_TEST-1755736169094_1755736169102",9,0,0,true,0,"2025-08-21 00:29:29","2025-08-21 00:29:29"]},"sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`observacoes`,`qr_code`,`setor_id`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["TEST-1755736169094","Ativo de Teste",0,0,1,"","operacional","media","Este é um ativo criado para teste do CRUD","QR_TEST-1755736169094_1755736169102",9,0,0,true,0,"2025-08-21 00:29:29","2025-08-21 00:29:29"],"table":"departments","fields":["department_id"],"value":1,"index":"ativos_ibfk_3","reltype":"child"}
{"timestamp":"2025-08-20 21:29:29","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:195:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","method":"POST","url":"/api/ativos","ip":"127.0.0.1","userAgent":"axios/1.11.0","body":{"codigo_patrimonio":"TEST-1755736169094","nome":"Ativo de Teste","estado":"operacional","criticidade":"media","setor_id":9,"localizacao_completa":"Setor de Teste - Linha 1 - Posição 1","observacoes":"Este é um ativo criado para teste do CRUD","department_id":1},"params":{},"query":{}}
{"timestamp":"2025-08-20 21:29:29","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:195:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:33:05","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 21:33:05","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code-Insiders/1.104.0-insider Chrome/138.0.7204.100 Electron/37.2.3 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 21:33:05","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:40:54","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 21:40:54","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 21:40:54","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:40:58","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 21:40:58","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?page=1&limit=20","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"page":"1","limit":"20"}}
{"timestamp":"2025-08-20 21:40:58","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:41:23","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 21:41:23","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?page=1&limit=20","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"page":"1","limit":"20"}}
{"timestamp":"2025-08-20 21:41:23","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:41:38","level":"\u001b[31merror\u001b[39m","message":"Erro ao obter dados do Gantt: Ativo is associated to PlanoPreventivo using an alias. You've included an alias (ativo), but it does not match the alias(es) defined in your association (ativoObj).","stack":"SequelizeEagerLoadingError: Ativo is associated to PlanoPreventivo using an alias. You've included an alias (ativo), but it does not match the alias(es) defined in your association (ativoObj).\n    at PlanoPreventivo._getIncludedAssociation (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:574:15)\n    at PlanoPreventivo._validateIncludedElement (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:502:53)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:421:37\n    at Array.map (<anonymous>)\n    at PlanoPreventivo._validateIncludedElements (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:417:39)\n    at PlanoPreventivo.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async gantt (C:\\Manutencao\\backend\\controllers\\PlanoPreventivosController.js:1317:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeEagerLoadingError"}
{"timestamp":"2025-08-20 21:41:42","level":"\u001b[31merror\u001b[39m","message":"Erro ao gerar relatório de eficiência: Unknown column 'ativoObj.mtbf' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async PlanoPreventivo.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async relatorioEficiencia (C:\\Manutencao\\backend\\controllers\\PlanoPreventivosController.js:965:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativoObj.mtbf' in 'field list'","sql":"SELECT `PlanoPreventivo`.`id`, `PlanoPreventivo`.`codigo`, `PlanoPreventivo`.`nome`, `PlanoPreventivo`.`descricao`, `PlanoPreventivo`.`ativo_id`, `PlanoPreventivo`.`setor_id`, `PlanoPreventivo`.`responsavel_id`, `PlanoPreventivo`.`tipo_periodicidade`, `PlanoPreventivo`.`intervalo_periodicidade`, `PlanoPreventivo`.`horas_funcionamento_limite`, `PlanoPreventivo`.`contador_producao_limite`, `PlanoPreventivo`.`prioridade`, `PlanoPreventivo`.`categoria`, `PlanoPreventivo`.`duracao_estimada`, `PlanoPreventivo`.`custo_estimado`, `PlanoPreventivo`.`procedimento`, `PlanoPreventivo`.`ferramentas_necessarias`, `PlanoPreventivo`.`pecas_necessarias`, `PlanoPreventivo`.`data_inicio`, `PlanoPreventivo`.`data_fim`, `PlanoPreventivo`.`proxima_execucao`, `PlanoPreventivo`.`ultima_execucao`, `PlanoPreventivo`.`executado_horas`, `PlanoPreventivo`.`executado_contador`, `PlanoPreventivo`.`total_execucoes`, `PlanoPreventivo`.`dias_antecedencia_alerta`, `PlanoPreventivo`.`ativo`, `PlanoPreventivo`.`observacoes`, `PlanoPreventivo`.`created_at`, `PlanoPreventivo`.`updated_at`, `ativoObj`.`id` AS `ativoObj.id`, `ativoObj`.`nome` AS `ativoObj.nome`, `ativoObj`.`valor_aquisicao` AS `ativoObj.valor_aquisicao`, `ativoObj`.`mtbf` AS `ativoObj.mtbf`, `ativoObj`.`mttr` AS `ativoObj.mttr`, `setorObj`.`id` AS `setorObj.id`, `setorObj`.`nome` AS `setorObj.nome` FROM `planos_preventivos` AS `PlanoPreventivo` LEFT OUTER JOIN `ativos` AS `ativoObj` ON `PlanoPreventivo`.`ativo_id` = `ativoObj`.`id` LEFT OUTER JOIN `setores` AS `setorObj` ON `PlanoPreventivo`.`setor_id` = `setorObj`.`id` WHERE `PlanoPreventivo`.`ativo` = true;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativoObj.mtbf' in 'field list'","sql":"SELECT `PlanoPreventivo`.`id`, `PlanoPreventivo`.`codigo`, `PlanoPreventivo`.`nome`, `PlanoPreventivo`.`descricao`, `PlanoPreventivo`.`ativo_id`, `PlanoPreventivo`.`setor_id`, `PlanoPreventivo`.`responsavel_id`, `PlanoPreventivo`.`tipo_periodicidade`, `PlanoPreventivo`.`intervalo_periodicidade`, `PlanoPreventivo`.`horas_funcionamento_limite`, `PlanoPreventivo`.`contador_producao_limite`, `PlanoPreventivo`.`prioridade`, `PlanoPreventivo`.`categoria`, `PlanoPreventivo`.`duracao_estimada`, `PlanoPreventivo`.`custo_estimado`, `PlanoPreventivo`.`procedimento`, `PlanoPreventivo`.`ferramentas_necessarias`, `PlanoPreventivo`.`pecas_necessarias`, `PlanoPreventivo`.`data_inicio`, `PlanoPreventivo`.`data_fim`, `PlanoPreventivo`.`proxima_execucao`, `PlanoPreventivo`.`ultima_execucao`, `PlanoPreventivo`.`executado_horas`, `PlanoPreventivo`.`executado_contador`, `PlanoPreventivo`.`total_execucoes`, `PlanoPreventivo`.`dias_antecedencia_alerta`, `PlanoPreventivo`.`ativo`, `PlanoPreventivo`.`observacoes`, `PlanoPreventivo`.`created_at`, `PlanoPreventivo`.`updated_at`, `ativoObj`.`id` AS `ativoObj.id`, `ativoObj`.`nome` AS `ativoObj.nome`, `ativoObj`.`valor_aquisicao` AS `ativoObj.valor_aquisicao`, `ativoObj`.`mtbf` AS `ativoObj.mtbf`, `ativoObj`.`mttr` AS `ativoObj.mttr`, `setorObj`.`id` AS `setorObj.id`, `setorObj`.`nome` AS `setorObj.nome` FROM `planos_preventivos` AS `PlanoPreventivo` LEFT OUTER JOIN `ativos` AS `ativoObj` ON `PlanoPreventivo`.`ativo_id` = `ativoObj`.`id` LEFT OUTER JOIN `setores` AS `setorObj` ON `PlanoPreventivo`.`setor_id` = `setorObj`.`id` WHERE `PlanoPreventivo`.`ativo` = true;"},"sql":"SELECT `PlanoPreventivo`.`id`, `PlanoPreventivo`.`codigo`, `PlanoPreventivo`.`nome`, `PlanoPreventivo`.`descricao`, `PlanoPreventivo`.`ativo_id`, `PlanoPreventivo`.`setor_id`, `PlanoPreventivo`.`responsavel_id`, `PlanoPreventivo`.`tipo_periodicidade`, `PlanoPreventivo`.`intervalo_periodicidade`, `PlanoPreventivo`.`horas_funcionamento_limite`, `PlanoPreventivo`.`contador_producao_limite`, `PlanoPreventivo`.`prioridade`, `PlanoPreventivo`.`categoria`, `PlanoPreventivo`.`duracao_estimada`, `PlanoPreventivo`.`custo_estimado`, `PlanoPreventivo`.`procedimento`, `PlanoPreventivo`.`ferramentas_necessarias`, `PlanoPreventivo`.`pecas_necessarias`, `PlanoPreventivo`.`data_inicio`, `PlanoPreventivo`.`data_fim`, `PlanoPreventivo`.`proxima_execucao`, `PlanoPreventivo`.`ultima_execucao`, `PlanoPreventivo`.`executado_horas`, `PlanoPreventivo`.`executado_contador`, `PlanoPreventivo`.`total_execucoes`, `PlanoPreventivo`.`dias_antecedencia_alerta`, `PlanoPreventivo`.`ativo`, `PlanoPreventivo`.`observacoes`, `PlanoPreventivo`.`created_at`, `PlanoPreventivo`.`updated_at`, `ativoObj`.`id` AS `ativoObj.id`, `ativoObj`.`nome` AS `ativoObj.nome`, `ativoObj`.`valor_aquisicao` AS `ativoObj.valor_aquisicao`, `ativoObj`.`mtbf` AS `ativoObj.mtbf`, `ativoObj`.`mttr` AS `ativoObj.mttr`, `setorObj`.`id` AS `setorObj.id`, `setorObj`.`nome` AS `setorObj.nome` FROM `planos_preventivos` AS `PlanoPreventivo` LEFT OUTER JOIN `ativos` AS `ativoObj` ON `PlanoPreventivo`.`ativo_id` = `ativoObj`.`id` LEFT OUTER JOIN `setores` AS `setorObj` ON `PlanoPreventivo`.`setor_id` = `setorObj`.`id` WHERE `PlanoPreventivo`.`ativo` = true;","parameters":{}}
{"timestamp":"2025-08-20 21:41:50","level":"\u001b[31merror\u001b[39m","message":"Erro ao gerar sugestões de otimização: PlanoPreventivo is not associated to OrdemServico!","stack":"SequelizeEagerLoadingError: PlanoPreventivo is not associated to OrdemServico!\n    at OrdemServico._getIncludedAssociation (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:565:13)\n    at OrdemServico._validateIncludedElement (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:502:53)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:421:37\n    at Array.map (<anonymous>)\n    at OrdemServico._validateIncludedElements (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:417:39)\n    at OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1124:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async sugerirOtimizacoes (C:\\Manutencao\\backend\\controllers\\PlanoPreventivosController.js:1227:27)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeEagerLoadingError"}
{"timestamp":"2025-08-20 21:46:45","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 21:46:45","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code-Insiders/1.104.0-insider Chrome/138.0.7204.100 Electron/37.2.3 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 21:46:45","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:49:15","level":"\u001b[31merror\u001b[39m","message":"Erro ao criar ativo: Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:195:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeForeignKeyConstraintError","parent":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`fabricante`,`modelo`,`numero_serie`,`ano_fabricacao`,`data_aquisicao`,`valor_aquisicao`,`valor_atual`,`categoria_id`,`department_id`,`localizacao_completa`,`predio`,`andar`,`sala`,`posicao`,`estado`,`criticidade`,`potencia`,`tensao`,`frequencia`,`peso`,`dimensoes`,`capacidade`,`fornecedor`,`garantia_ate`,`manual_operacao`,`manual_manutencao`,`especificacoes_tecnicas`,`observacoes`,`qr_code`,`responsavel_id`,`setor_id`,`data_proxima_inspecao`,`horas_funcionamento`,`contador_producao`,`ativo`,`vida_util_anos`,`ultima_manutencao`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["COMP-1755737355425","Compressor Industrial Atlas Copco","Atlas Copco","GA55+","AC2024001",2024,"2024-01-15 00:00:00",150000,145000,null,1,"Prédio A > Térreo > Sala de Compressores > Posição 1","Prédio A","Térreo","Sala de Compressores","Posição 1","operacional","critica","55 kW","380V","60Hz",1250.5,"2.1 x 1.8 x 1.9 m","10.2 m³/min","Atlas Copco Brasil Ltda","2026-01-15 00:00:00","Verificar pressão diariamente. Drenar condensado a cada 8 horas. Monitorar temperatura do óleo.","Troca de óleo: 2000h. Filtro de ar: 1000h. Filtro de óleo: 2000h. Inspeção geral: 8000h.","Compressor de parafuso rotativo com sistema de controle eletrônico. Pressão de trabalho: 8 bar. Temperatura de operação: -10°C a +45°C.","Equipamento crítico para produção. Manter sobressalente em estoque. Contrato de manutenção ativo.","QR_COMP-1755737355425_1755737355438",1,9,"2024-09-15 00:00:00",1250.75,50000,true,15,"2024-07-15 00:00:00",0,"2025-08-21 00:49:15","2025-08-21 00:49:15"]},"original":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`fabricante`,`modelo`,`numero_serie`,`ano_fabricacao`,`data_aquisicao`,`valor_aquisicao`,`valor_atual`,`categoria_id`,`department_id`,`localizacao_completa`,`predio`,`andar`,`sala`,`posicao`,`estado`,`criticidade`,`potencia`,`tensao`,`frequencia`,`peso`,`dimensoes`,`capacidade`,`fornecedor`,`garantia_ate`,`manual_operacao`,`manual_manutencao`,`especificacoes_tecnicas`,`observacoes`,`qr_code`,`responsavel_id`,`setor_id`,`data_proxima_inspecao`,`horas_funcionamento`,`contador_producao`,`ativo`,`vida_util_anos`,`ultima_manutencao`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["COMP-1755737355425","Compressor Industrial Atlas Copco","Atlas Copco","GA55+","AC2024001",2024,"2024-01-15 00:00:00",150000,145000,null,1,"Prédio A > Térreo > Sala de Compressores > Posição 1","Prédio A","Térreo","Sala de Compressores","Posição 1","operacional","critica","55 kW","380V","60Hz",1250.5,"2.1 x 1.8 x 1.9 m","10.2 m³/min","Atlas Copco Brasil Ltda","2026-01-15 00:00:00","Verificar pressão diariamente. Drenar condensado a cada 8 horas. Monitorar temperatura do óleo.","Troca de óleo: 2000h. Filtro de ar: 1000h. Filtro de óleo: 2000h. Inspeção geral: 8000h.","Compressor de parafuso rotativo com sistema de controle eletrônico. Pressão de trabalho: 8 bar. Temperatura de operação: -10°C a +45°C.","Equipamento crítico para produção. Manter sobressalente em estoque. Contrato de manutenção ativo.","QR_COMP-1755737355425_1755737355438",1,9,"2024-09-15 00:00:00",1250.75,50000,true,15,"2024-07-15 00:00:00",0,"2025-08-21 00:49:15","2025-08-21 00:49:15"]},"sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`fabricante`,`modelo`,`numero_serie`,`ano_fabricacao`,`data_aquisicao`,`valor_aquisicao`,`valor_atual`,`categoria_id`,`department_id`,`localizacao_completa`,`predio`,`andar`,`sala`,`posicao`,`estado`,`criticidade`,`potencia`,`tensao`,`frequencia`,`peso`,`dimensoes`,`capacidade`,`fornecedor`,`garantia_ate`,`manual_operacao`,`manual_manutencao`,`especificacoes_tecnicas`,`observacoes`,`qr_code`,`responsavel_id`,`setor_id`,`data_proxima_inspecao`,`horas_funcionamento`,`contador_producao`,`ativo`,`vida_util_anos`,`ultima_manutencao`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["COMP-1755737355425","Compressor Industrial Atlas Copco","Atlas Copco","GA55+","AC2024001",2024,"2024-01-15 00:00:00",150000,145000,null,1,"Prédio A > Térreo > Sala de Compressores > Posição 1","Prédio A","Térreo","Sala de Compressores","Posição 1","operacional","critica","55 kW","380V","60Hz",1250.5,"2.1 x 1.8 x 1.9 m","10.2 m³/min","Atlas Copco Brasil Ltda","2026-01-15 00:00:00","Verificar pressão diariamente. Drenar condensado a cada 8 horas. Monitorar temperatura do óleo.","Troca de óleo: 2000h. Filtro de ar: 1000h. Filtro de óleo: 2000h. Inspeção geral: 8000h.","Compressor de parafuso rotativo com sistema de controle eletrônico. Pressão de trabalho: 8 bar. Temperatura de operação: -10°C a +45°C.","Equipamento crítico para produção. Manter sobressalente em estoque. Contrato de manutenção ativo.","QR_COMP-1755737355425_1755737355438",1,9,"2024-09-15 00:00:00",1250.75,50000,true,15,"2024-07-15 00:00:00",0,"2025-08-21 00:49:15","2025-08-21 00:49:15"],"table":"departments","fields":["department_id"],"value":1,"index":"ativos_ibfk_3","reltype":"child"}
{"timestamp":"2025-08-20 21:49:15","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:195:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","method":"POST","url":"/api/ativos","ip":"127.0.0.1","userAgent":"axios/1.11.0","body":{"codigo_patrimonio":"COMP-1755737355425","nome":"Compressor Industrial Atlas Copco","categoria_id":null,"setor_id":9,"fabricante":"Atlas Copco","modelo":"GA55+","numero_serie":"AC2024001","ano_fabricacao":2024,"localizacao_completa":"Prédio A - Térreo - Sala de Compressores - Posição 1","predio":"Prédio A","andar":"Térreo","sala":"Sala de Compressores","posicao":"Posição 1","estado":"operacional","criticidade":"critica","responsavel_id":1,"vida_util_anos":15,"potencia":"55 kW","tensao":"380V","frequencia":"60Hz","peso":1250.5,"dimensoes":"2.1 x 1.8 x 1.9 m","capacidade":"10.2 m³/min","data_aquisicao":"2024-01-15","valor_aquisicao":150000,"valor_atual":145000,"fornecedor":"Atlas Copco Brasil Ltda","garantia_ate":"2026-01-15","data_proxima_inspecao":"2024-09-15","horas_funcionamento":1250.75,"contador_producao":50000,"ultima_manutencao":"2024-07-15","especificacoes_tecnicas":"Compressor de parafuso rotativo com sistema de controle eletrônico. Pressão de trabalho: 8 bar. Temperatura de operação: -10°C a +45°C.","manual_operacao":"Verificar pressão diariamente. Drenar condensado a cada 8 horas. Monitorar temperatura do óleo.","manual_manutencao":"Troca de óleo: 2000h. Filtro de ar: 1000h. Filtro de óleo: 2000h. Inspeção geral: 8000h.","observacoes":"Equipamento crítico para produção. Manter sobressalente em estoque. Contrato de manutenção ativo.","department_id":1,"ativo":true},"params":{},"query":{}}
{"timestamp":"2025-08-20 21:49:15","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:195:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:51:40","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 21:51:40","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 21:51:40","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:51:40","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 21:51:40","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code-Insiders/1.104.0-insider Chrome/138.0.7204.100 Electron/37.2.3 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 21:51:40","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:59:07","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 21:59:07","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code-Insiders/1.104.0-insider Chrome/138.0.7204.100 Electron/37.2.3 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 21:59:07","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 21:59:10","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 21:59:10","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?limit=1","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"limit":"1"}}
{"timestamp":"2025-08-20 21:59:10","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 22:11:52","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 22:11:52","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?page=1&limit=20","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"page":"1","limit":"20"}}
{"timestamp":"2025-08-20 22:11:52","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 22:12:02","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 22:12:02","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'OrdemServico.setor_id' in 'field list'","method":"GET","url":"/api/ordens-servico?page=1&limit=20","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{"page":"1","limit":"20"}}
{"timestamp":"2025-08-20 22:12:02","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 22:22:06","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:70:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 22:22:25","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar logs de auditoria: Unknown column 'LogOperacao.created_at' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async LogOperacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async LogOperacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AuditoriaController.js:55:37)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'LogOperacao.created_at' in 'field list'","sql":"SELECT `LogOperacao`.`id`, `LogOperacao`.`operacao`, `LogOperacao`.`modulo`, `LogOperacao`.`descricao`, `LogOperacao`.`usuario_id`, `LogOperacao`.`usuario_nome`, `LogOperacao`.`usuario_email`, `LogOperacao`.`ip_address`, `LogOperacao`.`user_agent`, `LogOperacao`.`sessao_id`, `LogOperacao`.`recurso_tipo`, `LogOperacao`.`recurso_id`, `LogOperacao`.`recurso_codigo`, `LogOperacao`.`estado_anterior`, `LogOperacao`.`estado_novo`, `LogOperacao`.`sucesso`, `LogOperacao`.`erro_detalhes`, `LogOperacao`.`duracao_ms`, `LogOperacao`.`endpoint`, `LogOperacao`.`metodo_http`, `LogOperacao`.`parametros`, `LogOperacao`.`nivel_risco`, `LogOperacao`.`observacoes`, `LogOperacao`.`data_operacao`, `LogOperacao`.`created_at` AS `createdAt`, `LogOperacao`.`updated_at` AS `updatedAt`, `usuario`.`id` AS `usuario.id`, `usuario`.`nome` AS `usuario.nome`, `usuario`.`email` AS `usuario.email`, `usuario`.`avatar` AS `usuario.avatar` FROM `logs_operacoes` AS `LogOperacao` LEFT OUTER JOIN `users` AS `usuario` ON `LogOperacao`.`usuario_id` = `usuario`.`id` ORDER BY `LogOperacao`.`data_operacao` DESC LIMIT 0, 10;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'LogOperacao.created_at' in 'field list'","sql":"SELECT `LogOperacao`.`id`, `LogOperacao`.`operacao`, `LogOperacao`.`modulo`, `LogOperacao`.`descricao`, `LogOperacao`.`usuario_id`, `LogOperacao`.`usuario_nome`, `LogOperacao`.`usuario_email`, `LogOperacao`.`ip_address`, `LogOperacao`.`user_agent`, `LogOperacao`.`sessao_id`, `LogOperacao`.`recurso_tipo`, `LogOperacao`.`recurso_id`, `LogOperacao`.`recurso_codigo`, `LogOperacao`.`estado_anterior`, `LogOperacao`.`estado_novo`, `LogOperacao`.`sucesso`, `LogOperacao`.`erro_detalhes`, `LogOperacao`.`duracao_ms`, `LogOperacao`.`endpoint`, `LogOperacao`.`metodo_http`, `LogOperacao`.`parametros`, `LogOperacao`.`nivel_risco`, `LogOperacao`.`observacoes`, `LogOperacao`.`data_operacao`, `LogOperacao`.`created_at` AS `createdAt`, `LogOperacao`.`updated_at` AS `updatedAt`, `usuario`.`id` AS `usuario.id`, `usuario`.`nome` AS `usuario.nome`, `usuario`.`email` AS `usuario.email`, `usuario`.`avatar` AS `usuario.avatar` FROM `logs_operacoes` AS `LogOperacao` LEFT OUTER JOIN `users` AS `usuario` ON `LogOperacao`.`usuario_id` = `usuario`.`id` ORDER BY `LogOperacao`.`data_operacao` DESC LIMIT 0, 10;"},"sql":"SELECT `LogOperacao`.`id`, `LogOperacao`.`operacao`, `LogOperacao`.`modulo`, `LogOperacao`.`descricao`, `LogOperacao`.`usuario_id`, `LogOperacao`.`usuario_nome`, `LogOperacao`.`usuario_email`, `LogOperacao`.`ip_address`, `LogOperacao`.`user_agent`, `LogOperacao`.`sessao_id`, `LogOperacao`.`recurso_tipo`, `LogOperacao`.`recurso_id`, `LogOperacao`.`recurso_codigo`, `LogOperacao`.`estado_anterior`, `LogOperacao`.`estado_novo`, `LogOperacao`.`sucesso`, `LogOperacao`.`erro_detalhes`, `LogOperacao`.`duracao_ms`, `LogOperacao`.`endpoint`, `LogOperacao`.`metodo_http`, `LogOperacao`.`parametros`, `LogOperacao`.`nivel_risco`, `LogOperacao`.`observacoes`, `LogOperacao`.`data_operacao`, `LogOperacao`.`created_at` AS `createdAt`, `LogOperacao`.`updated_at` AS `updatedAt`, `usuario`.`id` AS `usuario.id`, `usuario`.`nome` AS `usuario.nome`, `usuario`.`email` AS `usuario.email`, `usuario`.`avatar` AS `usuario.avatar` FROM `logs_operacoes` AS `LogOperacao` LEFT OUTER JOIN `users` AS `usuario` ON `LogOperacao`.`usuario_id` = `usuario`.`id` ORDER BY `LogOperacao`.`data_operacao` DESC LIMIT 0, 10;","parameters":{}}
{"timestamp":"2025-08-20 22:22:25","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async LogOperacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async LogOperacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AuditoriaController.js:55:37)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'LogOperacao.created_at' in 'field list'","method":"GET","url":"/api/auditoria/logs?limit=10","ip":"127.0.0.1","userAgent":"axios/1.11.0","body":{},"params":{},"query":{"limit":"10"}}
{"timestamp":"2025-08-20 22:22:25","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async LogOperacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async LogOperacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AuditoriaController.js:55:37)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 22:23:45","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar logs de auditoria: Unknown column 'LogOperacao.created_at' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async LogOperacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async LogOperacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AuditoriaController.js:55:37)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'LogOperacao.created_at' in 'field list'","sql":"SELECT `LogOperacao`.`id`, `LogOperacao`.`operacao`, `LogOperacao`.`modulo`, `LogOperacao`.`descricao`, `LogOperacao`.`usuario_id`, `LogOperacao`.`usuario_nome`, `LogOperacao`.`usuario_email`, `LogOperacao`.`ip_address`, `LogOperacao`.`user_agent`, `LogOperacao`.`sessao_id`, `LogOperacao`.`recurso_tipo`, `LogOperacao`.`recurso_id`, `LogOperacao`.`recurso_codigo`, `LogOperacao`.`estado_anterior`, `LogOperacao`.`estado_novo`, `LogOperacao`.`sucesso`, `LogOperacao`.`erro_detalhes`, `LogOperacao`.`duracao_ms`, `LogOperacao`.`endpoint`, `LogOperacao`.`metodo_http`, `LogOperacao`.`parametros`, `LogOperacao`.`nivel_risco`, `LogOperacao`.`observacoes`, `LogOperacao`.`data_operacao`, `LogOperacao`.`created_at` AS `createdAt`, `LogOperacao`.`updated_at` AS `updatedAt`, `usuario`.`id` AS `usuario.id`, `usuario`.`nome` AS `usuario.nome`, `usuario`.`email` AS `usuario.email`, `usuario`.`avatar` AS `usuario.avatar` FROM `logs_operacoes` AS `LogOperacao` LEFT OUTER JOIN `users` AS `usuario` ON `LogOperacao`.`usuario_id` = `usuario`.`id` ORDER BY `LogOperacao`.`data_operacao` DESC LIMIT 0, 10;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'LogOperacao.created_at' in 'field list'","sql":"SELECT `LogOperacao`.`id`, `LogOperacao`.`operacao`, `LogOperacao`.`modulo`, `LogOperacao`.`descricao`, `LogOperacao`.`usuario_id`, `LogOperacao`.`usuario_nome`, `LogOperacao`.`usuario_email`, `LogOperacao`.`ip_address`, `LogOperacao`.`user_agent`, `LogOperacao`.`sessao_id`, `LogOperacao`.`recurso_tipo`, `LogOperacao`.`recurso_id`, `LogOperacao`.`recurso_codigo`, `LogOperacao`.`estado_anterior`, `LogOperacao`.`estado_novo`, `LogOperacao`.`sucesso`, `LogOperacao`.`erro_detalhes`, `LogOperacao`.`duracao_ms`, `LogOperacao`.`endpoint`, `LogOperacao`.`metodo_http`, `LogOperacao`.`parametros`, `LogOperacao`.`nivel_risco`, `LogOperacao`.`observacoes`, `LogOperacao`.`data_operacao`, `LogOperacao`.`created_at` AS `createdAt`, `LogOperacao`.`updated_at` AS `updatedAt`, `usuario`.`id` AS `usuario.id`, `usuario`.`nome` AS `usuario.nome`, `usuario`.`email` AS `usuario.email`, `usuario`.`avatar` AS `usuario.avatar` FROM `logs_operacoes` AS `LogOperacao` LEFT OUTER JOIN `users` AS `usuario` ON `LogOperacao`.`usuario_id` = `usuario`.`id` ORDER BY `LogOperacao`.`data_operacao` DESC LIMIT 0, 10;"},"sql":"SELECT `LogOperacao`.`id`, `LogOperacao`.`operacao`, `LogOperacao`.`modulo`, `LogOperacao`.`descricao`, `LogOperacao`.`usuario_id`, `LogOperacao`.`usuario_nome`, `LogOperacao`.`usuario_email`, `LogOperacao`.`ip_address`, `LogOperacao`.`user_agent`, `LogOperacao`.`sessao_id`, `LogOperacao`.`recurso_tipo`, `LogOperacao`.`recurso_id`, `LogOperacao`.`recurso_codigo`, `LogOperacao`.`estado_anterior`, `LogOperacao`.`estado_novo`, `LogOperacao`.`sucesso`, `LogOperacao`.`erro_detalhes`, `LogOperacao`.`duracao_ms`, `LogOperacao`.`endpoint`, `LogOperacao`.`metodo_http`, `LogOperacao`.`parametros`, `LogOperacao`.`nivel_risco`, `LogOperacao`.`observacoes`, `LogOperacao`.`data_operacao`, `LogOperacao`.`created_at` AS `createdAt`, `LogOperacao`.`updated_at` AS `updatedAt`, `usuario`.`id` AS `usuario.id`, `usuario`.`nome` AS `usuario.nome`, `usuario`.`email` AS `usuario.email`, `usuario`.`avatar` AS `usuario.avatar` FROM `logs_operacoes` AS `LogOperacao` LEFT OUTER JOIN `users` AS `usuario` ON `LogOperacao`.`usuario_id` = `usuario`.`id` ORDER BY `LogOperacao`.`data_operacao` DESC LIMIT 0, 10;","parameters":{}}
{"timestamp":"2025-08-20 22:23:45","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async LogOperacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async LogOperacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AuditoriaController.js:55:37)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'LogOperacao.created_at' in 'field list'","method":"GET","url":"/api/auditoria/logs?limit=10","ip":"127.0.0.1","userAgent":"axios/1.11.0","body":{},"params":{},"query":{"limit":"10"}}
{"timestamp":"2025-08-20 22:23:45","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async LogOperacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async LogOperacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AuditoriaController.js:55:37)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 22:24:28","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:70:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 22:24:49","level":"\u001b[31merror\u001b[39m","message":"Erro ao atualizar ativo: Incorrect integer value: '' for column 'categoria_id' at row 1","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:279:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_TRUNCATED_WRONG_VALUE_FOR_FIELD","errno":1366,"sqlState":"HY000","sqlMessage":"Incorrect integer value: '' for column 'categoria_id' at row 1","sql":"UPDATE `ativos` SET `categoria_id`=?,`ultima_manutencao`=?,`observacoes`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["","2024-07-15 00:00:00","Equipamento atualizado com nova potência. Teste de atualização completo. xx",1,"2025-08-21 01:24:49",9]},"original":{"code":"ER_TRUNCATED_WRONG_VALUE_FOR_FIELD","errno":1366,"sqlState":"HY000","sqlMessage":"Incorrect integer value: '' for column 'categoria_id' at row 1","sql":"UPDATE `ativos` SET `categoria_id`=?,`ultima_manutencao`=?,`observacoes`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["","2024-07-15 00:00:00","Equipamento atualizado com nova potência. Teste de atualização completo. xx",1,"2025-08-21 01:24:49",9]},"sql":"UPDATE `ativos` SET `categoria_id`=?,`ultima_manutencao`=?,`observacoes`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["","2024-07-15 00:00:00","Equipamento atualizado com nova potência. Teste de atualização completo. xx",1,"2025-08-21 01:24:49",9]}
{"timestamp":"2025-08-20 22:24:49","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:279:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Incorrect integer value: '' for column 'categoria_id' at row 1","method":"PUT","url":"/api/ativos/9","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{"codigo_patrimonio":"COMP-1755737398399","nome":"Compressor Industrial Atlas Copco - ATUALIZADO","categoria_id":"","setor_id":9,"fabricante":"Atlas Copco","modelo":"GA55+","numero_serie":"AC2024001","ano_fabricacao":2024,"localizacao_completa":"Prédio A - Térreo - Sala de Compressores - Posição 1","predio":"Prédio A","andar":"Térreo","sala":"Sala de Compressores","posicao":"Posição 1","estado":"operacional","criticidade":"critica","responsavel_id":1,"vida_util_anos":15,"potencia":"60 kW","tensao":"380V","frequencia":"60Hz","peso":"1250.50","dimensoes":"2.1 x 1.8 x 1.9 m","capacidade":"10.2 m³/min","data_aquisicao":"2024-01-15","valor_aquisicao":"150000.00","valor_atual":"145000.00","fornecedor":"Atlas Copco Brasil Ltda","garantia_ate":"2026-01-15","data_proxima_inspecao":"2024-09-15","horas_funcionamento":"1250.75","contador_producao":50000,"ultima_manutencao":"2024-07-15","especificacoes_tecnicas":"Compressor de parafuso rotativo com sistema de controle eletrônico. Pressão de trabalho: 8 bar. Temperatura de operação: -10°C a +45°C.","manual_operacao":"Verificar pressão diariamente. Drenar condensado a cada 8 horas. Monitorar temperatura do óleo.","manual_manutencao":"Troca de óleo: 2000h. Filtro de ar: 1000h. Filtro de óleo: 2000h. Inspeção geral: 8000h.","observacoes":"Equipamento atualizado com nova potência. Teste de atualização completo. xx","department_id":1,"ativo":true},"params":{},"query":{}}
{"timestamp":"2025-08-20 22:24:49","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:279:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 22:29:36","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:70:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 22:30:46","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"SyntaxError: Expected property name or '}' in JSON at position 1 (line 1 column 2)\n    at JSON.parse (<anonymous>)\n    at parse (C:\\Manutencao\\backend\\node_modules\\body-parser\\lib\\types\\json.js:92:19)\n    at C:\\Manutencao\\backend\\node_modules\\body-parser\\lib\\read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:238:16)\n    at done (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Expected property name or '}' in JSON at position 1 (line 1 column 2)","method":"POST","url":"/api/auth/login","ip":"127.0.0.1","userAgent":"curl/8.13.0","body":{},"params":{},"query":{}}
{"timestamp":"2025-08-20 22:30:46","level":"\u001b[31merror\u001b[39m","message":"SyntaxError: Expected property name or '}' in JSON at position 1 (line 1 column 2)\n    at JSON.parse (<anonymous>)\n    at parse (C:\\Manutencao\\backend\\node_modules\\body-parser\\lib\\types\\json.js:92:19)\n    at C:\\Manutencao\\backend\\node_modules\\body-parser\\lib\\read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:238:16)\n    at done (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 22:33:39","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 22:37:55","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 22:38:31","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 22:39:19","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'OrdemServico.setor_id' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'OrdemServico.setor_id' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitacao_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_mao_obra`, `OrdemServico`.`custo_materiais`, `OrdemServico`.`custo_terceiros`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`avaliacao_servico`, `OrdemServico`.`materiais_utilizados`, `OrdemServico`.`fotos_antes`, `OrdemServico`.`fotos_depois`, `OrdemServico`.`checklist`, `OrdemServico`.`created_at` AS `createdAt`, `OrdemServico`.`updated_at` AS `updatedAt`, `OrdemServico`.`setor_id`, `ativo`.`id` AS `ativo.id`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`fabricante` AS `ativo.fabricante`, `ativo`.`modelo` AS `ativo.modelo`, `ativo`.`numero_serie` AS `ativo.numero_serie`, `ativo`.`ano_fabricacao` AS `ativo.ano_fabricacao`, `ativo`.`data_aquisicao` AS `ativo.data_aquisicao`, `ativo`.`valor_aquisicao` AS `ativo.valor_aquisicao`, `ativo`.`valor_atual` AS `ativo.valor_atual`, `ativo`.`categoria_id` AS `ativo.categoria_id`, `ativo`.`subcategoria_id` AS `ativo.subcategoria_id`, `ativo`.`department_id` AS `ativo.department_id`, `ativo`.`localizacao_completa` AS `ativo.localizacao_completa`, `ativo`.`predio` AS `ativo.predio`, `ativo`.`andar` AS `ativo.andar`, `ativo`.`sala` AS `ativo.sala`, `ativo`.`posicao` AS `ativo.posicao`, `ativo`.`estado` AS `ativo.estado`, `ativo`.`criticidade` AS `ativo.criticidade`, `ativo`.`potencia` AS `ativo.potencia`, `ativo`.`tensao` AS `ativo.tensao`, `ativo`.`frequencia` AS `ativo.frequencia`, `ativo`.`peso` AS `ativo.peso`, `ativo`.`dimensoes` AS `ativo.dimensoes`, `ativo`.`capacidade` AS `ativo.capacidade`, `ativo`.`fornecedor` AS `ativo.fornecedor`, `ativo`.`garantia_ate` AS `ativo.garantia_ate`, `ativo`.`manual_operacao` AS `ativo.manual_operacao`, `ativo`.`manual_manutencao` AS `ativo.manual_manutencao`, `ativo`.`especificacoes_tecnicas` AS `ativo.especificacoes_tecnicas`, `ativo`.`observacoes` AS `ativo.observacoes`, `ativo`.`qr_code` AS `ativo.qr_code`, `ativo`.`foto_principal` AS `ativo.foto_principal`, `ativo`.`responsavel_id` AS `ativo.responsavel_id`, `ativo`.`setor_id` AS `ativo.setor_id`, `ativo`.`data_proxima_inspecao` AS `ativo.data_proxima_inspecao`, `ativo`.`horas_funcionamento` AS `ativo.horas_funcionamento`, `ativo`.`contador_producao` AS `ativo.contador_producao`, `ativo`.`ativo` AS `ativo.ativo`, `ativo`.`vida_util_anos` AS `ativo.vida_util_anos`, `ativo`.`ultima_manutencao` AS `ativo.ultima_manutencao`, `ativo`.`proxima_manutencao` AS `ativo.proxima_manutencao`, `ativo`.`intervalo_manutencao_dias` AS `ativo.intervalo_manutencao_dias`, `ativo`.`custo_manutencao_total` AS `ativo.custo_manutencao_total`, `ativo`.`mtbf_horas` AS `ativo.mtbf_horas`, `ativo`.`mttr_horas` AS `ativo.mttr_horas`, `ativo`.`historico_falhas` AS `ativo.historico_falhas`, `ativo`.`parametros_operacao` AS `ativo.parametros_operacao`, `ativo`.`documentos_anexos` AS `ativo.documentos_anexos`, `ativo`.`created_at` AS `ativo.createdAt`, `ativo`.`updated_at` AS `ativo.updatedAt`, `ativo->setor`.`id` AS `ativo.setor.id`, `ativo->setor`.`codigo` AS `ativo.setor.codigo`, `ativo->setor`.`nome` AS `ativo.setor.nome`, `ativo->setor`.`descricao` AS `ativo.setor.descricao`, `ativo->setor`.`localizacao` AS `ativo.setor.localizacao`, `ativo->setor`.`responsavel_id` AS `ativo.setor.responsavel_id`, `ativo->setor`.`ativo` AS `ativo.setor.ativo`, `ativo->setor`.`created_at` AS `ativo.setor.createdAt`, `ativo->setor`.`updated_at` AS `ativo.setor.updatedAt`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `setores` AS `ativo->setor` ON `ativo`.`setor_id` = `ativo->setor`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `createdAt` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-20 22:45:33","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar logs de auditoria: Unknown column 'usuario.avatar' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async LogOperacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async LogOperacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AuditoriaController.js:55:37)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'usuario.avatar' in 'field list'","sql":"SELECT `LogOperacao`.`id`, `LogOperacao`.`operacao`, `LogOperacao`.`modulo`, `LogOperacao`.`descricao`, `LogOperacao`.`usuario_id`, `LogOperacao`.`usuario_nome`, `LogOperacao`.`usuario_email`, `LogOperacao`.`ip_address`, `LogOperacao`.`user_agent`, `LogOperacao`.`sessao_id`, `LogOperacao`.`recurso_tipo`, `LogOperacao`.`recurso_id`, `LogOperacao`.`recurso_codigo`, `LogOperacao`.`estado_anterior`, `LogOperacao`.`estado_novo`, `LogOperacao`.`sucesso`, `LogOperacao`.`erro_detalhes`, `LogOperacao`.`duracao_ms`, `LogOperacao`.`endpoint`, `LogOperacao`.`metodo_http`, `LogOperacao`.`parametros`, `LogOperacao`.`nivel_risco`, `LogOperacao`.`observacoes`, `LogOperacao`.`data_operacao`, `usuario`.`id` AS `usuario.id`, `usuario`.`nome` AS `usuario.nome`, `usuario`.`email` AS `usuario.email`, `usuario`.`avatar` AS `usuario.avatar` FROM `logs_operacoes` AS `LogOperacao` LEFT OUTER JOIN `users` AS `usuario` ON `LogOperacao`.`usuario_id` = `usuario`.`id` ORDER BY `LogOperacao`.`data_operacao` DESC LIMIT 0, 10;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'usuario.avatar' in 'field list'","sql":"SELECT `LogOperacao`.`id`, `LogOperacao`.`operacao`, `LogOperacao`.`modulo`, `LogOperacao`.`descricao`, `LogOperacao`.`usuario_id`, `LogOperacao`.`usuario_nome`, `LogOperacao`.`usuario_email`, `LogOperacao`.`ip_address`, `LogOperacao`.`user_agent`, `LogOperacao`.`sessao_id`, `LogOperacao`.`recurso_tipo`, `LogOperacao`.`recurso_id`, `LogOperacao`.`recurso_codigo`, `LogOperacao`.`estado_anterior`, `LogOperacao`.`estado_novo`, `LogOperacao`.`sucesso`, `LogOperacao`.`erro_detalhes`, `LogOperacao`.`duracao_ms`, `LogOperacao`.`endpoint`, `LogOperacao`.`metodo_http`, `LogOperacao`.`parametros`, `LogOperacao`.`nivel_risco`, `LogOperacao`.`observacoes`, `LogOperacao`.`data_operacao`, `usuario`.`id` AS `usuario.id`, `usuario`.`nome` AS `usuario.nome`, `usuario`.`email` AS `usuario.email`, `usuario`.`avatar` AS `usuario.avatar` FROM `logs_operacoes` AS `LogOperacao` LEFT OUTER JOIN `users` AS `usuario` ON `LogOperacao`.`usuario_id` = `usuario`.`id` ORDER BY `LogOperacao`.`data_operacao` DESC LIMIT 0, 10;"},"sql":"SELECT `LogOperacao`.`id`, `LogOperacao`.`operacao`, `LogOperacao`.`modulo`, `LogOperacao`.`descricao`, `LogOperacao`.`usuario_id`, `LogOperacao`.`usuario_nome`, `LogOperacao`.`usuario_email`, `LogOperacao`.`ip_address`, `LogOperacao`.`user_agent`, `LogOperacao`.`sessao_id`, `LogOperacao`.`recurso_tipo`, `LogOperacao`.`recurso_id`, `LogOperacao`.`recurso_codigo`, `LogOperacao`.`estado_anterior`, `LogOperacao`.`estado_novo`, `LogOperacao`.`sucesso`, `LogOperacao`.`erro_detalhes`, `LogOperacao`.`duracao_ms`, `LogOperacao`.`endpoint`, `LogOperacao`.`metodo_http`, `LogOperacao`.`parametros`, `LogOperacao`.`nivel_risco`, `LogOperacao`.`observacoes`, `LogOperacao`.`data_operacao`, `usuario`.`id` AS `usuario.id`, `usuario`.`nome` AS `usuario.nome`, `usuario`.`email` AS `usuario.email`, `usuario`.`avatar` AS `usuario.avatar` FROM `logs_operacoes` AS `LogOperacao` LEFT OUTER JOIN `users` AS `usuario` ON `LogOperacao`.`usuario_id` = `usuario`.`id` ORDER BY `LogOperacao`.`data_operacao` DESC LIMIT 0, 10;","parameters":{}}
{"timestamp":"2025-08-20 22:45:33","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async LogOperacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async LogOperacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AuditoriaController.js:55:37)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'usuario.avatar' in 'field list'","method":"GET","url":"/api/auditoria/logs?limit=10","ip":"127.0.0.1","userAgent":"axios/1.11.0","body":{},"params":{},"query":{"limit":"10"}}
{"timestamp":"2025-08-20 22:45:33","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async LogOperacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async LogOperacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AuditoriaController.js:55:37)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 22:46:09","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar logs de auditoria: Unknown column 'usuario.avatar' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async LogOperacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async LogOperacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AuditoriaController.js:55:37)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'usuario.avatar' in 'field list'","sql":"SELECT `LogOperacao`.`id`, `LogOperacao`.`operacao`, `LogOperacao`.`modulo`, `LogOperacao`.`descricao`, `LogOperacao`.`usuario_id`, `LogOperacao`.`usuario_nome`, `LogOperacao`.`usuario_email`, `LogOperacao`.`ip_address`, `LogOperacao`.`user_agent`, `LogOperacao`.`sessao_id`, `LogOperacao`.`recurso_tipo`, `LogOperacao`.`recurso_id`, `LogOperacao`.`recurso_codigo`, `LogOperacao`.`estado_anterior`, `LogOperacao`.`estado_novo`, `LogOperacao`.`sucesso`, `LogOperacao`.`erro_detalhes`, `LogOperacao`.`duracao_ms`, `LogOperacao`.`endpoint`, `LogOperacao`.`metodo_http`, `LogOperacao`.`parametros`, `LogOperacao`.`nivel_risco`, `LogOperacao`.`observacoes`, `LogOperacao`.`data_operacao`, `usuario`.`id` AS `usuario.id`, `usuario`.`nome` AS `usuario.nome`, `usuario`.`email` AS `usuario.email`, `usuario`.`avatar` AS `usuario.avatar` FROM `logs_operacoes` AS `LogOperacao` LEFT OUTER JOIN `users` AS `usuario` ON `LogOperacao`.`usuario_id` = `usuario`.`id` ORDER BY `LogOperacao`.`data_operacao` DESC LIMIT 0, 10;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'usuario.avatar' in 'field list'","sql":"SELECT `LogOperacao`.`id`, `LogOperacao`.`operacao`, `LogOperacao`.`modulo`, `LogOperacao`.`descricao`, `LogOperacao`.`usuario_id`, `LogOperacao`.`usuario_nome`, `LogOperacao`.`usuario_email`, `LogOperacao`.`ip_address`, `LogOperacao`.`user_agent`, `LogOperacao`.`sessao_id`, `LogOperacao`.`recurso_tipo`, `LogOperacao`.`recurso_id`, `LogOperacao`.`recurso_codigo`, `LogOperacao`.`estado_anterior`, `LogOperacao`.`estado_novo`, `LogOperacao`.`sucesso`, `LogOperacao`.`erro_detalhes`, `LogOperacao`.`duracao_ms`, `LogOperacao`.`endpoint`, `LogOperacao`.`metodo_http`, `LogOperacao`.`parametros`, `LogOperacao`.`nivel_risco`, `LogOperacao`.`observacoes`, `LogOperacao`.`data_operacao`, `usuario`.`id` AS `usuario.id`, `usuario`.`nome` AS `usuario.nome`, `usuario`.`email` AS `usuario.email`, `usuario`.`avatar` AS `usuario.avatar` FROM `logs_operacoes` AS `LogOperacao` LEFT OUTER JOIN `users` AS `usuario` ON `LogOperacao`.`usuario_id` = `usuario`.`id` ORDER BY `LogOperacao`.`data_operacao` DESC LIMIT 0, 10;"},"sql":"SELECT `LogOperacao`.`id`, `LogOperacao`.`operacao`, `LogOperacao`.`modulo`, `LogOperacao`.`descricao`, `LogOperacao`.`usuario_id`, `LogOperacao`.`usuario_nome`, `LogOperacao`.`usuario_email`, `LogOperacao`.`ip_address`, `LogOperacao`.`user_agent`, `LogOperacao`.`sessao_id`, `LogOperacao`.`recurso_tipo`, `LogOperacao`.`recurso_id`, `LogOperacao`.`recurso_codigo`, `LogOperacao`.`estado_anterior`, `LogOperacao`.`estado_novo`, `LogOperacao`.`sucesso`, `LogOperacao`.`erro_detalhes`, `LogOperacao`.`duracao_ms`, `LogOperacao`.`endpoint`, `LogOperacao`.`metodo_http`, `LogOperacao`.`parametros`, `LogOperacao`.`nivel_risco`, `LogOperacao`.`observacoes`, `LogOperacao`.`data_operacao`, `usuario`.`id` AS `usuario.id`, `usuario`.`nome` AS `usuario.nome`, `usuario`.`email` AS `usuario.email`, `usuario`.`avatar` AS `usuario.avatar` FROM `logs_operacoes` AS `LogOperacao` LEFT OUTER JOIN `users` AS `usuario` ON `LogOperacao`.`usuario_id` = `usuario`.`id` ORDER BY `LogOperacao`.`data_operacao` DESC LIMIT 0, 10;","parameters":{}}
{"timestamp":"2025-08-20 22:46:09","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async LogOperacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async LogOperacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AuditoriaController.js:55:37)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Unknown column 'usuario.avatar' in 'field list'","method":"GET","url":"/api/auditoria/logs?limit=10","ip":"127.0.0.1","userAgent":"axios/1.11.0","body":{},"params":{},"query":{"limit":"10"}}
{"timestamp":"2025-08-20 22:46:09","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async LogOperacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async LogOperacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AuditoriaController.js:55:37)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 22:47:12","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'ativo.descricao' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-20 22:47:15","level":"\u001b[31merror\u001b[39m","message":"Erro ao gerar relatório de auditoria: models is not defined","stack":"ReferenceError: models is not defined\n    at LogOperacao.relatorioAuditoria (C:\\Manutencao\\backend\\models\\LogOperacao.js:296:26)\n    at AuditoriaService.gerarRelatorioAuditoria (C:\\Manutencao\\backend\\services\\AuditoriaService.js:344:30)\n    at relatorio (C:\\Manutencao\\backend\\controllers\\AuditoriaController.js:266:43)\n    at Layer.handle [as handle_request] (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Manutencao\\backend\\middleware\\AuditoriaMiddleware.js:273:7\n    at Layer.handle [as handle_request] (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at authenticate (C:\\Manutencao\\backend\\middleware\\auth.js:54:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 22:47:15","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"ReferenceError: models is not defined\n    at LogOperacao.relatorioAuditoria (C:\\Manutencao\\backend\\models\\LogOperacao.js:296:26)\n    at AuditoriaService.gerarRelatorioAuditoria (C:\\Manutencao\\backend\\services\\AuditoriaService.js:344:30)\n    at relatorio (C:\\Manutencao\\backend\\controllers\\AuditoriaController.js:266:43)\n    at Layer.handle [as handle_request] (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Manutencao\\backend\\middleware\\AuditoriaMiddleware.js:273:7\n    at Layer.handle [as handle_request] (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at authenticate (C:\\Manutencao\\backend\\middleware\\auth.js:54:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"models is not defined","method":"GET","url":"/api/auditoria/relatorio?limite=50","ip":"127.0.0.1","userAgent":"axios/1.11.0","body":{},"params":{},"query":{"limite":"50"}}
{"timestamp":"2025-08-20 22:47:15","level":"\u001b[31merror\u001b[39m","message":"ReferenceError: models is not defined\n    at LogOperacao.relatorioAuditoria (C:\\Manutencao\\backend\\models\\LogOperacao.js:296:26)\n    at AuditoriaService.gerarRelatorioAuditoria (C:\\Manutencao\\backend\\services\\AuditoriaService.js:344:30)\n    at relatorio (C:\\Manutencao\\backend\\controllers\\AuditoriaController.js:266:43)\n    at Layer.handle [as handle_request] (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Manutencao\\backend\\middleware\\AuditoriaMiddleware.js:273:7\n    at Layer.handle [as handle_request] (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at authenticate (C:\\Manutencao\\backend\\middleware\\auth.js:54:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-20 22:50:59","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'ativo.descricao' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-21 19:09:22","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'ativo.descricao' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-21 19:09:30","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'ativo.descricao' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-21 21:42:25","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'ativo.descricao' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-21 21:42:56","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'ativo.descricao' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-21 21:43:19","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'ativo.descricao' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-21 21:51:41","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'ativo.descricao' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-21 22:00:47","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'ativo.descricao' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-21 22:17:17","level":"\u001b[31merror\u001b[39m","message":"Erro ao atualizar ativo: Incorrect datetime value: 'Invalid date' for column 'data_aquisicao' at row 1","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_TRUNCATED_WRONG_VALUE","errno":1292,"sqlState":"22007","sqlMessage":"Incorrect datetime value: 'Invalid date' for column 'data_aquisicao' at row 1","sql":"UPDATE `ativos` SET `setor_id`=?,`numero_serie`=?,`predio`=?,`andar`=?,`sala`=?,`posicao`=?,`potencia`=?,`tensao`=?,`frequencia`=?,`dimensoes`=?,`capacidade`=?,`data_aquisicao`=?,`fornecedor`=?,`garantia_ate`=?,`data_proxima_inspecao`=?,`contador_producao`=?,`ultima_manutencao`=?,`especificacoes_tecnicas`=?,`manual_operacao`=?,`manual_manutencao`=?,`observacoes`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":[8,"","","","","","","","","","","Invalid date","","Invalid date","Invalid date",null,"Invalid date","","","","",1,"2025-08-22 01:17:17",10]},"original":{"code":"ER_TRUNCATED_WRONG_VALUE","errno":1292,"sqlState":"22007","sqlMessage":"Incorrect datetime value: 'Invalid date' for column 'data_aquisicao' at row 1","sql":"UPDATE `ativos` SET `setor_id`=?,`numero_serie`=?,`predio`=?,`andar`=?,`sala`=?,`posicao`=?,`potencia`=?,`tensao`=?,`frequencia`=?,`dimensoes`=?,`capacidade`=?,`data_aquisicao`=?,`fornecedor`=?,`garantia_ate`=?,`data_proxima_inspecao`=?,`contador_producao`=?,`ultima_manutencao`=?,`especificacoes_tecnicas`=?,`manual_operacao`=?,`manual_manutencao`=?,`observacoes`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":[8,"","","","","","","","","","","Invalid date","","Invalid date","Invalid date",null,"Invalid date","","","","",1,"2025-08-22 01:17:17",10]},"sql":"UPDATE `ativos` SET `setor_id`=?,`numero_serie`=?,`predio`=?,`andar`=?,`sala`=?,`posicao`=?,`potencia`=?,`tensao`=?,`frequencia`=?,`dimensoes`=?,`capacidade`=?,`data_aquisicao`=?,`fornecedor`=?,`garantia_ate`=?,`data_proxima_inspecao`=?,`contador_producao`=?,`ultima_manutencao`=?,`especificacoes_tecnicas`=?,`manual_operacao`=?,`manual_manutencao`=?,`observacoes`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":[8,"","","","","","","","","","","Invalid date","","Invalid date","Invalid date",null,"Invalid date","","","","",1,"2025-08-22 01:17:17",10]}
{"timestamp":"2025-08-21 22:17:17","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Incorrect datetime value: 'Invalid date' for column 'data_aquisicao' at row 1","method":"PUT","url":"/api/ativos/10","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{"codigo_patrimonio":"AUDIT-1755739344423","nome":"Ativo de Teste Auditoria - ATUALIZADO","categoria_id":null,"setor_id":8,"fabricante":"Teste Ltda","modelo":"Modelo Teste v2.0","numero_serie":"","ano_fabricacao":null,"localizacao_completa":"","predio":"","andar":"","sala":"","posicao":"","estado":"operacional","criticidade":"media","responsavel_id":null,"vida_util_anos":null,"potencia":"","tensao":"","frequencia":"","peso":null,"dimensoes":"","capacidade":"","data_aquisicao":"","valor_aquisicao":"0.00","valor_atual":"0.00","fornecedor":"","garantia_ate":"","data_proxima_inspecao":"","horas_funcionamento":"0.00","contador_producao":null,"ultima_manutencao":"","especificacoes_tecnicas":"","manual_operacao":"","manual_manutencao":"","observacoes":"","department_id":1,"ativo":true},"params":{},"query":{}}
{"timestamp":"2025-08-21 22:17:17","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:25:05","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'ativo.descricao' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-21 22:26:18","level":"\u001b[31merror\u001b[39m","message":"Erro ao atualizar ativo: Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeForeignKeyConstraintError","parent":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"UPDATE `ativos` SET `ultima_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["2024-07-15 00:00:00",1,"2025-08-22 01:26:18",9]},"original":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"UPDATE `ativos` SET `ultima_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["2024-07-15 00:00:00",1,"2025-08-22 01:26:18",9]},"sql":"UPDATE `ativos` SET `ultima_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["2024-07-15 00:00:00",1,"2025-08-22 01:26:18",9],"table":"departments","fields":["department_id"],"value":1,"index":"ativos_ibfk_3","reltype":"child"}
{"timestamp":"2025-08-21 22:26:18","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","method":"PUT","url":"/api/ativos/9","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{"codigo_patrimonio":"COMP-1755737398399","nome":"Compressor Industrial Atlas Copco - ATUALIZADO","categoria_id":null,"setor_id":9,"fabricante":"Atlas Copco","modelo":"GA55+","numero_serie":"AC2024001","ano_fabricacao":2024,"localizacao_completa":"Prédio A - Térreo - Sala de Compressores - Posição 1","predio":"Prédio A","andar":"Térreo","sala":"Sala de Compressores","posicao":"Posição 1","estado":"operacional","criticidade":"critica","responsavel_id":1,"vida_util_anos":15,"potencia":"60 kW","tensao":"380V","frequencia":"60Hz","peso":"1250.50","dimensoes":"2.1 x 1.8 x 1.9 m","capacidade":"10.2 m³/min","data_aquisicao":"2024-01-15","valor_aquisicao":"150000.00","valor_atual":"145000.00","fornecedor":"Atlas Copco Brasil Ltda","garantia_ate":"2026-01-15","data_proxima_inspecao":"2024-09-15","horas_funcionamento":"1250.75","contador_producao":50000,"ultima_manutencao":"2024-07-15","especificacoes_tecnicas":"Compressor de parafuso rotativo com sistema de controle eletrônico. Pressão de trabalho: 8 bar. Temperatura de operação: -10°C a +45°C.","manual_operacao":"Verificar pressão diariamente. Drenar condensado a cada 8 horas. Monitorar temperatura do óleo.","manual_manutencao":"Troca de óleo: 2000h. Filtro de ar: 1000h. Filtro de óleo: 2000h. Inspeção geral: 8000h.","observacoes":"Equipamento atualizado com nova potência. Teste de atualização completo.","department_id":1,"ativo":true},"params":{},"query":{}}
{"timestamp":"2025-08-21 22:26:18","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:26:27","level":"\u001b[31merror\u001b[39m","message":"Erro ao atualizar ativo: Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeForeignKeyConstraintError","parent":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"UPDATE `ativos` SET `ultima_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["2024-07-15 00:00:00",1,"2025-08-22 01:26:27",9]},"original":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"UPDATE `ativos` SET `ultima_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["2024-07-15 00:00:00",1,"2025-08-22 01:26:27",9]},"sql":"UPDATE `ativos` SET `ultima_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["2024-07-15 00:00:00",1,"2025-08-22 01:26:27",9],"table":"departments","fields":["department_id"],"value":1,"index":"ativos_ibfk_3","reltype":"child"}
{"timestamp":"2025-08-21 22:26:27","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","method":"PUT","url":"/api/ativos/9","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{"codigo_patrimonio":"COMP-1755737398399","nome":"Compressor Industrial Atlas Copco - ATUALIZADO","categoria_id":null,"setor_id":9,"fabricante":"Atlas Copco","modelo":"GA55+","numero_serie":"AC2024001","ano_fabricacao":2024,"localizacao_completa":"Prédio A - Térreo - Sala de Compressores - Posição 1","predio":"Prédio A","andar":"Térreo","sala":"Sala de Compressores","posicao":"Posição 1","estado":"operacional","criticidade":"critica","responsavel_id":1,"vida_util_anos":15,"potencia":"60 kW","tensao":"380V","frequencia":"60Hz","peso":"1250.50","dimensoes":"2.1 x 1.8 x 1.9 m","capacidade":"10.2 m³/min","data_aquisicao":"2024-01-15","valor_aquisicao":"150000.00","valor_atual":"145000.00","fornecedor":"Atlas Copco Brasil Ltda","garantia_ate":"2026-01-15","data_proxima_inspecao":"2024-09-15","horas_funcionamento":"1250.75","contador_producao":50000,"ultima_manutencao":"2024-07-15","especificacoes_tecnicas":"Compressor de parafuso rotativo com sistema de controle eletrônico. Pressão de trabalho: 8 bar. Temperatura de operação: -10°C a +45°C.","manual_operacao":"Verificar pressão diariamente. Drenar condensado a cada 8 horas. Monitorar temperatura do óleo.","manual_manutencao":"Troca de óleo: 2000h. Filtro de ar: 1000h. Filtro de óleo: 2000h. Inspeção geral: 8000h.","observacoes":"Equipamento atualizado com nova potência. Teste de atualização completo.","department_id":1,"ativo":true},"params":{},"query":{}}
{"timestamp":"2025-08-21 22:26:27","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:29:03","level":"\u001b[31merror\u001b[39m","message":"Erro ao atualizar ativo: Incorrect datetime value: 'Invalid date' for column 'data_aquisicao' at row 1","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_TRUNCATED_WRONG_VALUE","errno":1292,"sqlState":"22007","sqlMessage":"Incorrect datetime value: 'Invalid date' for column 'data_aquisicao' at row 1","sql":"UPDATE `ativos` SET `setor_id`=?,`numero_serie`=?,`predio`=?,`andar`=?,`sala`=?,`posicao`=?,`potencia`=?,`tensao`=?,`frequencia`=?,`dimensoes`=?,`capacidade`=?,`data_aquisicao`=?,`valor_aquisicao`=?,`valor_atual`=?,`fornecedor`=?,`garantia_ate`=?,`data_proxima_inspecao`=?,`horas_funcionamento`=?,`contador_producao`=?,`ultima_manutencao`=?,`especificacoes_tecnicas`=?,`manual_operacao`=?,`manual_manutencao`=?,`observacoes`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":[8,"","","","","","","","","","","Invalid date",0,0,"","Invalid date","Invalid date",0,null,"Invalid date","","","","",1,"2025-08-22 01:29:03",10]},"original":{"code":"ER_TRUNCATED_WRONG_VALUE","errno":1292,"sqlState":"22007","sqlMessage":"Incorrect datetime value: 'Invalid date' for column 'data_aquisicao' at row 1","sql":"UPDATE `ativos` SET `setor_id`=?,`numero_serie`=?,`predio`=?,`andar`=?,`sala`=?,`posicao`=?,`potencia`=?,`tensao`=?,`frequencia`=?,`dimensoes`=?,`capacidade`=?,`data_aquisicao`=?,`valor_aquisicao`=?,`valor_atual`=?,`fornecedor`=?,`garantia_ate`=?,`data_proxima_inspecao`=?,`horas_funcionamento`=?,`contador_producao`=?,`ultima_manutencao`=?,`especificacoes_tecnicas`=?,`manual_operacao`=?,`manual_manutencao`=?,`observacoes`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":[8,"","","","","","","","","","","Invalid date",0,0,"","Invalid date","Invalid date",0,null,"Invalid date","","","","",1,"2025-08-22 01:29:03",10]},"sql":"UPDATE `ativos` SET `setor_id`=?,`numero_serie`=?,`predio`=?,`andar`=?,`sala`=?,`posicao`=?,`potencia`=?,`tensao`=?,`frequencia`=?,`dimensoes`=?,`capacidade`=?,`data_aquisicao`=?,`valor_aquisicao`=?,`valor_atual`=?,`fornecedor`=?,`garantia_ate`=?,`data_proxima_inspecao`=?,`horas_funcionamento`=?,`contador_producao`=?,`ultima_manutencao`=?,`especificacoes_tecnicas`=?,`manual_operacao`=?,`manual_manutencao`=?,`observacoes`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":[8,"","","","","","","","","","","Invalid date",0,0,"","Invalid date","Invalid date",0,null,"Invalid date","","","","",1,"2025-08-22 01:29:03",10]}
{"timestamp":"2025-08-21 22:29:03","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Incorrect datetime value: 'Invalid date' for column 'data_aquisicao' at row 1","method":"PUT","url":"/api/ativos/10","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{"codigo_patrimonio":"AUDIT-1755739344423","nome":"Ativo de Teste Auditoria - ATUALIZADO","categoria_id":null,"setor_id":8,"fabricante":"Teste Ltda","modelo":"Modelo Teste v2.0","numero_serie":"","ano_fabricacao":null,"localizacao_completa":"","predio":"","andar":"","sala":"","posicao":"","estado":"operacional","criticidade":"media","responsavel_id":null,"vida_util_anos":null,"potencia":"","tensao":"","frequencia":"","peso":null,"dimensoes":"","capacidade":"","data_aquisicao":"","valor_aquisicao":0,"valor_atual":0,"fornecedor":"","garantia_ate":"","data_proxima_inspecao":"","horas_funcionamento":0,"contador_producao":null,"ultima_manutencao":"","especificacoes_tecnicas":"","manual_operacao":"","manual_manutencao":"","observacoes":"","department_id":1,"ativo":true},"params":{},"query":{}}
{"timestamp":"2025-08-21 22:29:03","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:31:51","level":"\u001b[31merror\u001b[39m","message":"Erro ao atualizar ativo: Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeForeignKeyConstraintError","parent":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"UPDATE `ativos` SET `fabricante`=?,`modelo`=?,`numero_serie`=?,`predio`=?,`andar`=?,`sala`=?,`posicao`=?,`potencia`=?,`tensao`=?,`frequencia`=?,`dimensoes`=?,`capacidade`=?,`data_aquisicao`=?,`valor_aquisicao`=?,`valor_atual`=?,`fornecedor`=?,`horas_funcionamento`=?,`contador_producao`=?,`especificacoes_tecnicas`=?,`manual_operacao`=?,`manual_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["","","","","","","","","","","","","2025-08-01 00:00:00",0,0,"",0,null,"","","",1,"2025-08-22 01:31:51",5]},"original":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"UPDATE `ativos` SET `fabricante`=?,`modelo`=?,`numero_serie`=?,`predio`=?,`andar`=?,`sala`=?,`posicao`=?,`potencia`=?,`tensao`=?,`frequencia`=?,`dimensoes`=?,`capacidade`=?,`data_aquisicao`=?,`valor_aquisicao`=?,`valor_atual`=?,`fornecedor`=?,`horas_funcionamento`=?,`contador_producao`=?,`especificacoes_tecnicas`=?,`manual_operacao`=?,`manual_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["","","","","","","","","","","","","2025-08-01 00:00:00",0,0,"",0,null,"","","",1,"2025-08-22 01:31:51",5]},"sql":"UPDATE `ativos` SET `fabricante`=?,`modelo`=?,`numero_serie`=?,`predio`=?,`andar`=?,`sala`=?,`posicao`=?,`potencia`=?,`tensao`=?,`frequencia`=?,`dimensoes`=?,`capacidade`=?,`data_aquisicao`=?,`valor_aquisicao`=?,`valor_atual`=?,`fornecedor`=?,`horas_funcionamento`=?,`contador_producao`=?,`especificacoes_tecnicas`=?,`manual_operacao`=?,`manual_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["","","","","","","","","","","","","2025-08-01 00:00:00",0,0,"",0,null,"","","",1,"2025-08-22 01:31:51",5],"table":"departments","fields":["department_id"],"value":1,"index":"ativos_ibfk_3","reltype":"child"}
{"timestamp":"2025-08-21 22:31:51","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","method":"PUT","url":"/api/ativos/5","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{"codigo_patrimonio":"TEST-1755736186271","nome":"Ativo de Teste","categoria_id":null,"setor_id":9,"fabricante":"","modelo":"","numero_serie":"","ano_fabricacao":null,"localizacao_completa":"","predio":"","andar":"","sala":"","posicao":"","estado":"operacional","criticidade":"media","responsavel_id":null,"vida_util_anos":null,"potencia":"","tensao":"","frequencia":"","peso":null,"dimensoes":"","capacidade":"","data_aquisicao":"2025-08-01","valor_aquisicao":0,"valor_atual":0,"fornecedor":"","garantia_ate":null,"data_proxima_inspecao":null,"horas_funcionamento":0,"contador_producao":null,"ultima_manutencao":null,"especificacoes_tecnicas":"","manual_operacao":"","manual_manutencao":"","observacoes":"Este é um ativo criado para teste do CRUD","department_id":1,"ativo":true},"params":{},"query":{}}
{"timestamp":"2025-08-21 22:31:51","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:37:21","level":"\u001b[31merror\u001b[39m","message":"Erro no servidor: listen EADDRINUSE: address already in use 0.0.0.0:3001","stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3001\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","code":"EADDRINUSE","errno":-4091,"syscall":"listen","address":"0.0.0.0","port":3001}
{"timestamp":"2025-08-21 22:38:10","level":"\u001b[31merror\u001b[39m","message":"Erro ao atualizar ativo: Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeForeignKeyConstraintError","parent":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"UPDATE `ativos` SET `fabricante`=?,`modelo`=?,`numero_serie`=?,`predio`=?,`andar`=?,`sala`=?,`posicao`=?,`potencia`=?,`tensao`=?,`frequencia`=?,`dimensoes`=?,`capacidade`=?,`data_aquisicao`=?,`valor_aquisicao`=?,`valor_atual`=?,`fornecedor`=?,`horas_funcionamento`=?,`contador_producao`=?,`especificacoes_tecnicas`=?,`manual_operacao`=?,`manual_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["","","","","","","","","","","","","2025-08-01 00:00:00",0,0,"",0,null,"","","",1,"2025-08-22 01:38:10",5]},"original":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"UPDATE `ativos` SET `fabricante`=?,`modelo`=?,`numero_serie`=?,`predio`=?,`andar`=?,`sala`=?,`posicao`=?,`potencia`=?,`tensao`=?,`frequencia`=?,`dimensoes`=?,`capacidade`=?,`data_aquisicao`=?,`valor_aquisicao`=?,`valor_atual`=?,`fornecedor`=?,`horas_funcionamento`=?,`contador_producao`=?,`especificacoes_tecnicas`=?,`manual_operacao`=?,`manual_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["","","","","","","","","","","","","2025-08-01 00:00:00",0,0,"",0,null,"","","",1,"2025-08-22 01:38:10",5]},"sql":"UPDATE `ativos` SET `fabricante`=?,`modelo`=?,`numero_serie`=?,`predio`=?,`andar`=?,`sala`=?,`posicao`=?,`potencia`=?,`tensao`=?,`frequencia`=?,`dimensoes`=?,`capacidade`=?,`data_aquisicao`=?,`valor_aquisicao`=?,`valor_atual`=?,`fornecedor`=?,`horas_funcionamento`=?,`contador_producao`=?,`especificacoes_tecnicas`=?,`manual_operacao`=?,`manual_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["","","","","","","","","","","","","2025-08-01 00:00:00",0,0,"",0,null,"","","",1,"2025-08-22 01:38:10",5],"table":"departments","fields":["department_id"],"value":1,"index":"ativos_ibfk_3","reltype":"child"}
{"timestamp":"2025-08-21 22:38:10","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","method":"PUT","url":"/api/ativos/5","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{"codigo_patrimonio":"TEST-1755736186271","nome":"Ativo de Teste","categoria_id":null,"setor_id":9,"fabricante":"","modelo":"","numero_serie":"","ano_fabricacao":null,"localizacao_completa":"","predio":"","andar":"","sala":"","posicao":"","estado":"operacional","criticidade":"media","responsavel_id":null,"vida_util_anos":null,"potencia":"","tensao":"","frequencia":"","peso":null,"dimensoes":"","capacidade":"","data_aquisicao":"2025-08-01","valor_aquisicao":0,"valor_atual":0,"fornecedor":"","garantia_ate":null,"data_proxima_inspecao":null,"horas_funcionamento":0,"contador_producao":null,"ultima_manutencao":null,"especificacoes_tecnicas":"","manual_operacao":"","manual_manutencao":"","observacoes":"Este é um ativo criado para teste do CRUD","department_id":1,"ativo":true},"params":{},"query":{}}
{"timestamp":"2025-08-21 22:38:10","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:291:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:47:48","level":"\u001b[31merror\u001b[39m","message":"Erro ao criar ativo: Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:202:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeForeignKeyConstraintError","parent":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`categoria_id`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`qr_code`,`setor_id`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["IMG-TEST-1755827268500","Ativo para Teste de Imagens",0,0,1,1,"","operacional","media","QR_IMG-TEST-1755827268500_1755827268506",9,0,0,true,0,"2025-08-22 01:47:48","2025-08-22 01:47:48"]},"original":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`categoria_id`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`qr_code`,`setor_id`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["IMG-TEST-1755827268500","Ativo para Teste de Imagens",0,0,1,1,"","operacional","media","QR_IMG-TEST-1755827268500_1755827268506",9,0,0,true,0,"2025-08-22 01:47:48","2025-08-22 01:47:48"]},"sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`categoria_id`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`qr_code`,`setor_id`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["IMG-TEST-1755827268500","Ativo para Teste de Imagens",0,0,1,1,"","operacional","media","QR_IMG-TEST-1755827268500_1755827268506",9,0,0,true,0,"2025-08-22 01:47:48","2025-08-22 01:47:48"],"table":"departments","fields":["department_id"],"value":1,"index":"ativos_ibfk_3","reltype":"child"}
{"timestamp":"2025-08-21 22:47:48","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:202:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","method":"POST","url":"/api/ativos","ip":"127.0.0.1","userAgent":"axios/1.11.0","body":{"codigo_patrimonio":"IMG-TEST-1755827268500","nome":"Ativo para Teste de Imagens","categoria_id":1,"setor_id":9,"estado":"operacional","criticidade":"media","department_id":1},"params":{},"query":{}}
{"timestamp":"2025-08-21 22:47:48","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:202:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:48:04","level":"\u001b[31merror\u001b[39m","message":"Erro ao criar ativo: Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:202:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeForeignKeyConstraintError","parent":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`qr_code`,`setor_id`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["IMG-TEST-1755827284293","Ativo para Teste de Imagens",0,0,1,"","operacional","media","QR_IMG-TEST-1755827284293_1755827284301",9,0,0,true,0,"2025-08-22 01:48:04","2025-08-22 01:48:04"]},"original":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`qr_code`,`setor_id`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["IMG-TEST-1755827284293","Ativo para Teste de Imagens",0,0,1,"","operacional","media","QR_IMG-TEST-1755827284293_1755827284301",9,0,0,true,0,"2025-08-22 01:48:04","2025-08-22 01:48:04"]},"sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`qr_code`,`setor_id`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["IMG-TEST-1755827284293","Ativo para Teste de Imagens",0,0,1,"","operacional","media","QR_IMG-TEST-1755827284293_1755827284301",9,0,0,true,0,"2025-08-22 01:48:04","2025-08-22 01:48:04"],"table":"departments","fields":["department_id"],"value":1,"index":"ativos_ibfk_3","reltype":"child"}
{"timestamp":"2025-08-21 22:48:04","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:202:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","method":"POST","url":"/api/ativos","ip":"127.0.0.1","userAgent":"axios/1.11.0","body":{"codigo_patrimonio":"IMG-TEST-1755827284293","nome":"Ativo para Teste de Imagens","setor_id":9,"estado":"operacional","criticidade":"media","department_id":1},"params":{},"query":{}}
{"timestamp":"2025-08-21 22:48:04","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:202:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:48:17","level":"\u001b[31merror\u001b[39m","message":"Erro ao criar ativo: Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:202:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeForeignKeyConstraintError","parent":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`qr_code`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["IMG-TEST-1755827297464","Ativo para Teste de Imagens",0,0,1,"","operacional","media","QR_IMG-TEST-1755827297464_1755827297472",0,0,true,0,"2025-08-22 01:48:17","2025-08-22 01:48:17"]},"original":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`qr_code`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["IMG-TEST-1755827297464","Ativo para Teste de Imagens",0,0,1,"","operacional","media","QR_IMG-TEST-1755827297464_1755827297472",0,0,true,0,"2025-08-22 01:48:17","2025-08-22 01:48:17"]},"sql":"INSERT INTO `ativos` (`id`,`codigo_patrimonio`,`nome`,`valor_aquisicao`,`valor_atual`,`department_id`,`localizacao_completa`,`estado`,`criticidade`,`qr_code`,`horas_funcionamento`,`contador_producao`,`ativo`,`custo_manutencao_total`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);","parameters":["IMG-TEST-1755827297464","Ativo para Teste de Imagens",0,0,1,"","operacional","media","QR_IMG-TEST-1755827297464_1755827297472",0,0,true,0,"2025-08-22 01:48:17","2025-08-22 01:48:17"],"table":"departments","fields":["department_id"],"value":1,"index":"ativos_ibfk_3","reltype":"child"}
{"timestamp":"2025-08-21 22:48:17","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:202:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","method":"POST","url":"/api/ativos","ip":"127.0.0.1","userAgent":"axios/1.11.0","body":{"codigo_patrimonio":"IMG-TEST-1755827297464","nome":"Ativo para Teste de Imagens","estado":"operacional","criticidade":"media","department_id":1},"params":{},"query":{}}
{"timestamp":"2025-08-21 22:48:17","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.insert (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:308:21)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async Ativo.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async store (C:\\Manutencao\\backend\\controllers\\AtivoController.js:202:25)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:48:30","level":"\u001b[31merror\u001b[39m","message":"Erro no upload de imagens: uploadImagens is not a function","stack":"TypeError: uploadImagens is not a function\n    at uploadImagens (C:\\Manutencao\\backend\\controllers\\AtivoController.js:527:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:48:30","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"TypeError: uploadImagens is not a function\n    at uploadImagens (C:\\Manutencao\\backend\\controllers\\AtivoController.js:527:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"uploadImagens is not a function","method":"POST","url":"/api/ativos/20/imagens","ip":"127.0.0.1","userAgent":"axios/1.11.0","body":{},"params":{},"query":{}}
{"timestamp":"2025-08-21 22:48:30","level":"\u001b[31merror\u001b[39m","message":"TypeError: uploadImagens is not a function\n    at uploadImagens (C:\\Manutencao\\backend\\controllers\\AtivoController.js:527:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:49:39","level":"\u001b[31merror\u001b[39m","message":"Erro no upload de imagens: uploadImagens is not a function","stack":"TypeError: uploadImagens is not a function\n    at uploadImagens (C:\\Manutencao\\backend\\controllers\\AtivoController.js:527:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:49:39","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"TypeError: uploadImagens is not a function\n    at uploadImagens (C:\\Manutencao\\backend\\controllers\\AtivoController.js:527:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"uploadImagens is not a function","method":"POST","url":"/api/ativos/21/imagens","ip":"127.0.0.1","userAgent":"axios/1.11.0","body":{},"params":{},"query":{}}
{"timestamp":"2025-08-21 22:49:39","level":"\u001b[31merror\u001b[39m","message":"TypeError: uploadImagens is not a function\n    at uploadImagens (C:\\Manutencao\\backend\\controllers\\AtivoController.js:527:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:49:57","level":"\u001b[31merror\u001b[39m","message":"Erro no upload de imagens: uploadImagens is not a function","stack":"TypeError: uploadImagens is not a function\n    at uploadImagens (C:\\Manutencao\\backend\\controllers\\AtivoController.js:527:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:49:57","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"TypeError: uploadImagens is not a function\n    at uploadImagens (C:\\Manutencao\\backend\\controllers\\AtivoController.js:527:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"uploadImagens is not a function","method":"POST","url":"/api/ativos/22/imagens","ip":"127.0.0.1","userAgent":"axios/1.11.0","body":{},"params":{},"query":{}}
{"timestamp":"2025-08-21 22:49:57","level":"\u001b[31merror\u001b[39m","message":"TypeError: uploadImagens is not a function\n    at uploadImagens (C:\\Manutencao\\backend\\controllers\\AtivoController.js:527:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:50:32","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'ativo.descricao' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-21 22:50:44","level":"\u001b[31merror\u001b[39m","message":"Erro ao atualizar ativo: Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:292:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeForeignKeyConstraintError","parent":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"UPDATE `ativos` SET `peso`=?,`valor_aquisicao`=?,`valor_atual`=?,`horas_funcionamento`=?,`ultima_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":[1250.5,150000,145000,1250,"2024-07-15 00:00:00",1,"2025-08-22 01:50:44",9]},"original":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"UPDATE `ativos` SET `peso`=?,`valor_aquisicao`=?,`valor_atual`=?,`horas_funcionamento`=?,`ultima_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":[1250.5,150000,145000,1250,"2024-07-15 00:00:00",1,"2025-08-22 01:50:44",9]},"sql":"UPDATE `ativos` SET `peso`=?,`valor_aquisicao`=?,`valor_atual`=?,`horas_funcionamento`=?,`ultima_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":[1250.5,150000,145000,1250,"2024-07-15 00:00:00",1,"2025-08-22 01:50:44",9],"table":"departments","fields":["department_id"],"value":1,"index":"ativos_ibfk_3","reltype":"child"}
{"timestamp":"2025-08-21 22:50:44","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:292:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","method":"PUT","url":"/api/ativos/9","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{"codigo_patrimonio":"COMP-1755737398399","nome":"Compressor Industrial Atlas Copco - ATUALIZADO","categoria_id":null,"setor_id":9,"fabricante":"Atlas Copco","modelo":"GA55+","numero_serie":"AC2024001","ano_fabricacao":2024,"localizacao_completa":"Prédio A - Térreo - Sala de Compressores - Posição 1","predio":"Prédio A","andar":"Térreo","sala":"Sala de Compressores","posicao":"Posição 1","estado":"operacional","criticidade":"critica","responsavel_id":1,"vida_util_anos":15,"potencia":"60 kW","tensao":"380V","frequencia":"60Hz","peso":1250.5,"dimensoes":"2.1 x 1.8 x 1.9 m","capacidade":"10.2 m³/min","data_aquisicao":"2024-01-15","valor_aquisicao":150000,"valor_atual":145000,"fornecedor":"Atlas Copco Brasil Ltda","garantia_ate":"2026-01-15","data_proxima_inspecao":"2024-09-15","horas_funcionamento":1250,"contador_producao":50000,"ultima_manutencao":"2024-07-15","especificacoes_tecnicas":"Compressor de parafuso rotativo com sistema de controle eletrônico. Pressão de trabalho: 8 bar. Temperatura de operação: -10°C a +45°C.","manual_operacao":"Verificar pressão diariamente. Drenar condensado a cada 8 horas. Monitorar temperatura do óleo.","manual_manutencao":"Troca de óleo: 2000h. Filtro de ar: 1000h. Filtro de óleo: 2000h. Inspeção geral: 8000h.","observacoes":"Equipamento atualizado com nova potência. Teste de atualização completo.","department_id":1,"ativo":true},"params":{},"query":{}}
{"timestamp":"2025-08-21 22:50:44","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:292:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:52:06","level":"\u001b[31merror\u001b[39m","message":"Erro ao atualizar ativo: Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:292:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeForeignKeyConstraintError","parent":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"UPDATE `ativos` SET `peso`=?,`valor_aquisicao`=?,`valor_atual`=?,`horas_funcionamento`=?,`ultima_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":[1250.5,150000,145000,1250,"2024-07-15 00:00:00",1,"2025-08-22 01:52:06",9]},"original":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"UPDATE `ativos` SET `peso`=?,`valor_aquisicao`=?,`valor_atual`=?,`horas_funcionamento`=?,`ultima_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":[1250.5,150000,145000,1250,"2024-07-15 00:00:00",1,"2025-08-22 01:52:06",9]},"sql":"UPDATE `ativos` SET `peso`=?,`valor_aquisicao`=?,`valor_atual`=?,`horas_funcionamento`=?,`ultima_manutencao`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":[1250.5,150000,145000,1250,"2024-07-15 00:00:00",1,"2025-08-22 01:52:06",9],"table":"departments","fields":["department_id"],"value":1,"index":"ativos_ibfk_3","reltype":"child"}
{"timestamp":"2025-08-21 22:52:06","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:292:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","method":"PUT","url":"/api/ativos/9","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{"codigo_patrimonio":"COMP-1755737398399","nome":"Compressor Industrial Atlas Copco - ATUALIZADO","categoria_id":null,"setor_id":9,"fabricante":"Atlas Copco","modelo":"GA55+","numero_serie":"AC2024001","ano_fabricacao":2024,"localizacao_completa":"Prédio A - Térreo - Sala de Compressores - Posição 1","predio":"Prédio A","andar":"Térreo","sala":"Sala de Compressores","posicao":"Posição 1","estado":"operacional","criticidade":"critica","responsavel_id":1,"vida_util_anos":15,"potencia":"60 kW","tensao":"380V","frequencia":"60Hz","peso":1250.5,"dimensoes":"2.1 x 1.8 x 1.9 m","capacidade":"10.2 m³/min","data_aquisicao":"2024-01-15","valor_aquisicao":150000,"valor_atual":145000,"fornecedor":"Atlas Copco Brasil Ltda","garantia_ate":"2026-01-15","data_proxima_inspecao":"2024-09-15","horas_funcionamento":1250,"contador_producao":50000,"ultima_manutencao":"2024-07-15","especificacoes_tecnicas":"Compressor de parafuso rotativo com sistema de controle eletrônico. Pressão de trabalho: 8 bar. Temperatura de operação: -10°C a +45°C.","manual_operacao":"Verificar pressão diariamente. Drenar condensado a cada 8 horas. Monitorar temperatura do óleo.","manual_manutencao":"Troca de óleo: 2000h. Filtro de ar: 1000h. Filtro de óleo: 2000h. Inspeção geral: 8000h.","observacoes":"Equipamento atualizado com nova potência. Teste de atualização completo.","department_id":1,"ativo":true},"params":{},"query":{}}
{"timestamp":"2025-08-21 22:52:06","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:292:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:52:48","level":"\u001b[31merror\u001b[39m","message":"Erro ao atualizar ativo: Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:292:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeForeignKeyConstraintError","parent":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"UPDATE `ativos` SET `nome`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["Compressor Industrial Atlas Copco - ATUALIZADO - Teste Update",1,"2025-08-22 01:52:48",9]},"original":{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","sql":"UPDATE `ativos` SET `nome`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["Compressor Industrial Atlas Copco - ATUALIZADO - Teste Update",1,"2025-08-22 01:52:48",9]},"sql":"UPDATE `ativos` SET `nome`=?,`department_id`=?,`updated_at`=? WHERE `id` = ?","parameters":["Compressor Industrial Atlas Copco - ATUALIZADO - Teste Update",1,"2025-08-22 01:52:48",9],"table":"departments","fields":["department_id"],"value":1,"index":"ativos_ibfk_3","reltype":"child"}
{"timestamp":"2025-08-21 22:52:48","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:292:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot add or update a child row: a foreign key constraint fails (`manutencao_db`.`ativos`, CONSTRAINT `ativos_ibfk_3` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)","method":"PUT","url":"/api/ativos/9","ip":"127.0.0.1","userAgent":"axios/1.11.0","body":{"codigo_patrimonio":"COMP-1755737398399","nome":"Compressor Industrial Atlas Copco - ATUALIZADO - Teste Update","estado":"operacional","criticidade":"critica","department_id":1},"params":{},"query":{}}
{"timestamp":"2025-08-21 22:52:48","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async update (C:\\Manutencao\\backend\\controllers\\AtivoController.js:292:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 22:54:49","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'ativo.descricao' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-21 22:55:23","level":"\u001b[31merror\u001b[39m","message":"Erro no upload de imagens: ENOENT: no such file or directory, open 'C:\\Manutencao\\uploads\\ativos\\1755827723267-905d11af-9074-45ad-8f43-c8805adb74a9.jpg'","stack":"Error: ENOENT: no such file or directory, open 'C:\\Manutencao\\uploads\\ativos\\1755827723267-905d11af-9074-45ad-8f43-c8805adb74a9.jpg'","service":"sistema-manutencao","environment":"development","version":"1.0.0","errno":-4058,"code":"ENOENT","syscall":"open","path":"C:\\Manutencao\\uploads\\ativos\\1755827723267-905d11af-9074-45ad-8f43-c8805adb74a9.jpg","storageErrors":[]}
{"timestamp":"2025-08-21 22:55:23","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"Error: ENOENT: no such file or directory, open 'C:\\Manutencao\\uploads\\ativos\\1755827723267-905d11af-9074-45ad-8f43-c8805adb74a9.jpg'","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"ENOENT: no such file or directory, open 'C:\\Manutencao\\uploads\\ativos\\1755827723267-905d11af-9074-45ad-8f43-c8805adb74a9.jpg'","method":"POST","url":"/api/ativos/5/imagens","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{}}
{"timestamp":"2025-08-21 22:55:23","level":"\u001b[31merror\u001b[39m","message":"Error: ENOENT: no such file or directory, open 'C:\\Manutencao\\uploads\\ativos\\1755827723267-905d11af-9074-45ad-8f43-c8805adb74a9.jpg'","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 23:08:07","level":"\u001b[31merror\u001b[39m","message":"Erro no servidor: listen EADDRINUSE: address already in use 0.0.0.0:3001","stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3001\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","code":"EADDRINUSE","errno":-4091,"syscall":"listen","address":"0.0.0.0","port":3001}
{"timestamp":"2025-08-21 23:09:34","level":"\u001b[31merror\u001b[39m","message":"Erro no servidor: listen EADDRINUSE: address already in use 0.0.0.0:3001","stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3001\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","code":"EADDRINUSE","errno":-4091,"syscall":"listen","address":"0.0.0.0","port":3001}
{"timestamp":"2025-08-21 23:12:01","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'ativo.descricao' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-21 23:12:17","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'ativo.descricao' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 20;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 20;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 20;","parameters":{}}
{"timestamp":"2025-08-21 23:18:40","level":"\u001b[31merror\u001b[39m","message":"Erro no servidor: listen EADDRINUSE: address already in use 0.0.0.0:3001","stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3001\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","code":"EADDRINUSE","errno":-4091,"syscall":"listen","address":"0.0.0.0","port":3001}
{"timestamp":"2025-08-21 23:21:59","level":"\u001b[31merror\u001b[39m","message":"Erro no servidor: listen EADDRINUSE: address already in use 0.0.0.0:3000","stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","code":"EADDRINUSE","errno":-4091,"syscall":"listen","address":"0.0.0.0","port":3000}
{"timestamp":"2025-08-21 23:35:22","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"SyntaxError: Expected property name or '}' in JSON at position 1 (line 1 column 2)\n    at JSON.parse (<anonymous>)\n    at parse (C:\\Manutencao\\backend\\node_modules\\body-parser\\lib\\types\\json.js:92:19)\n    at C:\\Manutencao\\backend\\node_modules\\body-parser\\lib\\read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:238:16)\n    at done (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Expected property name or '}' in JSON at position 1 (line 1 column 2)","method":"POST","url":"/api/auth/login","ip":"127.0.0.1","userAgent":"curl/8.13.0","body":{},"params":{},"query":{}}
{"timestamp":"2025-08-21 23:35:22","level":"\u001b[31merror\u001b[39m","message":"SyntaxError: Expected property name or '}' in JSON at position 1 (line 1 column 2)\n    at JSON.parse (<anonymous>)\n    at parse (C:\\Manutencao\\backend\\node_modules\\body-parser\\lib\\types\\json.js:92:19)\n    at C:\\Manutencao\\backend\\node_modules\\body-parser\\lib\\read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:238:16)\n    at done (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-21 23:40:26","level":"\u001b[31merror\u001b[39m","message":"❌ Erro ao inicializar Level ImageStorageService","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Database failed to open","code":"LEVEL_DATABASE_NOT_OPEN","dbPath":"C:\\Manutencao\\backend\\data\\images.db"}
{"timestamp":"2025-08-21 23:42:29","level":"\u001b[31merror\u001b[39m","message":"❌ Erro ao inicializar Level ImageStorageService","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Database failed to open","code":"LEVEL_DATABASE_NOT_OPEN","dbPath":"C:\\Manutencao\\backend\\data\\images.db"}
{"timestamp":"2025-08-21 23:42:29","level":"\u001b[31merror\u001b[39m","message":"Erro no servidor: listen EADDRINUSE: address already in use 0.0.0.0:3000","stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","code":"EADDRINUSE","errno":-4091,"syscall":"listen","address":"0.0.0.0","port":3000}
{"timestamp":"2025-08-21 23:55:52","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Unknown column 'ativo.descricao' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:68:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'ativo.descricao' in 'field list'","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `ativo`.`descricao` AS `ativo.descricao`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.createdAt`, `solicitacao`.`updated_at` AS `solicitacao.updatedAt` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-21 23:56:18","level":"\u001b[31merror\u001b[39m","message":"❌ Erro no processo de upload para Level","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:560:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","ativo_id":"5","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","operation":"UPLOAD_ERROR"}
{"timestamp":"2025-08-21 23:56:18","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:560:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","method":"POST","url":"/api/ativos/5/imagens","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{}}
{"timestamp":"2025-08-21 23:56:18","level":"\u001b[31merror\u001b[39m","message":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:560:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 00:04:36","level":"\u001b[31merror\u001b[39m","message":"❌ Erro fatal ao inicializar Level ImageStorageService","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Database failed to open","code":"LEVEL_DATABASE_NOT_OPEN","dbPath":"C:\\Manutencao\\backend\\data\\images.db"}
{"timestamp":"2025-08-22 00:05:44","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 00:06:06","level":"\u001b[31merror\u001b[39m","message":"❌ Erro no processo de upload para Level","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:560:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","ativo_id":"5","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","operation":"UPLOAD_ERROR"}
{"timestamp":"2025-08-22 00:06:06","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:560:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","method":"POST","url":"/api/ativos/5/imagens","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{}}
{"timestamp":"2025-08-22 00:06:06","level":"\u001b[31merror\u001b[39m","message":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:560:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 00:08:55","level":"\u001b[31merror\u001b[39m","message":"❌ Erro fatal ao inicializar Level ImageStorageService","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Database failed to open","code":"LEVEL_DATABASE_NOT_OPEN","dbPath":"C:\\Manutencao\\backend\\data\\images.db"}
{"timestamp":"2025-08-22 00:09:52","level":"\u001b[31merror\u001b[39m","message":"❌ Erro fatal ao inicializar Level ImageStorageService","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Database failed to open","code":"LEVEL_DATABASE_NOT_OPEN","dbPath":"C:\\Manutencao\\backend\\data\\images.db"}
{"timestamp":"2025-08-22 00:14:12","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 00:14:35","level":"\u001b[31merror\u001b[39m","message":"❌ Erro no processo de upload para Level","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:560:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","ativo_id":"5","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","operation":"UPLOAD_ERROR"}
{"timestamp":"2025-08-22 00:14:35","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:560:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","method":"POST","url":"/api/ativos/5/imagens","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{}}
{"timestamp":"2025-08-22 00:14:35","level":"\u001b[31merror\u001b[39m","message":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:560:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 00:17:53","level":"\u001b[31merror\u001b[39m","message":"❌ Erro no processo de upload para Level","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:560:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","ativo_id":"5","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","operation":"UPLOAD_ERROR"}
{"timestamp":"2025-08-22 00:17:53","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:560:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","method":"POST","url":"/api/ativos/5/imagens","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{}}
{"timestamp":"2025-08-22 00:17:53","level":"\u001b[31merror\u001b[39m","message":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:560:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 00:21:37","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 00:22:01","level":"\u001b[31merror\u001b[39m","message":"❌ Erro no processo de upload para Level","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:561:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","ativo_id":"5","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","operation":"UPLOAD_ERROR"}
{"timestamp":"2025-08-22 00:22:01","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:561:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","method":"POST","url":"/api/ativos/5/imagens","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{}}
{"timestamp":"2025-08-22 00:22:01","level":"\u001b[31merror\u001b[39m","message":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:561:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 09:20:27","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 09:20:47","level":"\u001b[31merror\u001b[39m","message":"❌ Erro no processo de upload para Level","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:561:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","ativo_id":"5","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","operation":"UPLOAD_ERROR"}
{"timestamp":"2025-08-22 09:20:47","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:561:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","method":"POST","url":"/api/ativos/5/imagens","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{}}
{"timestamp":"2025-08-22 09:20:47","level":"\u001b[31merror\u001b[39m","message":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:561:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 09:21:38","level":"\u001b[31merror\u001b[39m","message":"❌ Erro no processo de upload para Level","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:561:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","ativo_id":"5","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","operation":"UPLOAD_ERROR"}
{"timestamp":"2025-08-22 09:21:38","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:561:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","method":"POST","url":"/api/ativos/5/imagens","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{}}
{"timestamp":"2025-08-22 09:21:38","level":"\u001b[31merror\u001b[39m","message":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:561:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 09:22:00","level":"\u001b[31merror\u001b[39m","message":"❌ Erro no processo de upload para Level","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:561:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","ativo_id":"5","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","operation":"UPLOAD_ERROR"}
{"timestamp":"2025-08-22 09:22:00","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:561:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","method":"POST","url":"/api/ativos/5/imagens","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{}}
{"timestamp":"2025-08-22 09:22:00","level":"\u001b[31merror\u001b[39m","message":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:561:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 09:23:37","level":"\u001b[31merror\u001b[39m","message":"❌ Erro fatal ao inicializar Level ImageStorageService","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Database failed to open","code":"LEVEL_DATABASE_NOT_OPEN","dbPath":"C:\\Manutencao\\backend\\data\\images.db"}
{"timestamp":"2025-08-22 09:23:37","level":"\u001b[31merror\u001b[39m","message":"❌ Erro fatal ao inicializar Level ImageStorageService","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Database failed to open","code":"LEVEL_DATABASE_NOT_OPEN","dbPath":"C:\\Manutencao\\backend\\data\\images.db"}
{"timestamp":"2025-08-22 09:34:03","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 09:34:40","level":"\u001b[31merror\u001b[39m","message":"❌ Erro no processo de upload para Level","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:577:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","ativo_id":"5","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","operation":"UPLOAD_ERROR"}
{"timestamp":"2025-08-22 09:34:40","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:577:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot read properties of undefined (reading 'checkLevelAvailability')","method":"POST","url":"/api/ativos/5/imagens","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{},"params":{},"query":{}}
{"timestamp":"2025-08-22 09:34:40","level":"\u001b[31merror\u001b[39m","message":"TypeError: Cannot read properties of undefined (reading 'checkLevelAvailability')\n    at C:\\Manutencao\\backend\\controllers\\AtivoController.js:577:14\n    at done (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Manutencao\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 09:45:41","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 09:51:32","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 10:01:33","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 10:03:25","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 10:05:21","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 10:06:16","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 10:16:58","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 10:17:49","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 10:18:49","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 10:19:48","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 10:21:53","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 10:32:29","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 10:51:52","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 11:09:37","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 11:18:47","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"SyntaxError: Expected property name or '}' in JSON at position 1 (line 1 column 2)\n    at JSON.parse (<anonymous>)\n    at parse (C:\\Manutencao\\backend\\node_modules\\body-parser\\lib\\types\\json.js:92:19)\n    at C:\\Manutencao\\backend\\node_modules\\body-parser\\lib\\read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:238:16)\n    at done (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Expected property name or '}' in JSON at position 1 (line 1 column 2)","method":"POST","url":"/api/auth/login","ip":"127.0.0.1","userAgent":"curl/8.13.0","body":{},"params":{},"query":{}}
{"timestamp":"2025-08-22 11:18:47","level":"\u001b[31merror\u001b[39m","message":"SyntaxError: Expected property name or '}' in JSON at position 1 (line 1 column 2)\n    at JSON.parse (<anonymous>)\n    at parse (C:\\Manutencao\\backend\\node_modules\\body-parser\\lib\\types\\json.js:92:19)\n    at C:\\Manutencao\\backend\\node_modules\\body-parser\\lib\\read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:238:16)\n    at done (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (C:\\Manutencao\\backend\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 11:25:30","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 11:31:02","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 12:33:11","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 12:36:11","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 12:55:11","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 12:57:53","level":"\u001b[31merror\u001b[39m","message":"Erro ao criar solicitação: Cannot read properties of undefined (reading 'ISOLATION_LEVELS')","stack":"TypeError: Cannot read properties of undefined (reading 'ISOLATION_LEVELS')\n    at TransactionHelper.executeInTransaction (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:257:71)\n    at store (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:255:46)\n    at Layer.handle [as handle_request] (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at authenticate (C:\\Manutencao\\backend\\middleware\\auth.js:54:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 12:57:53","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"TypeError: Cannot read properties of undefined (reading 'ISOLATION_LEVELS')\n    at TransactionHelper.executeInTransaction (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:257:71)\n    at store (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:255:46)\n    at Layer.handle [as handle_request] (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at authenticate (C:\\Manutencao\\backend\\middleware\\auth.js:54:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"Cannot read properties of undefined (reading 'ISOLATION_LEVELS')","method":"POST","url":"/api/solicitacoes","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{"titulo":"Vasamentos no cabeçote","descricao":"O compressor está apresentando vasamentos no cabeçote principal com perda de pressão de ar e vasamento de óleo","category_id":8,"subcategory_id":5,"prioridade":"alta","ativo_id":1,"setor_id":8},"params":{},"query":{}}
{"timestamp":"2025-08-22 12:57:53","level":"\u001b[31merror\u001b[39m","message":"TypeError: Cannot read properties of undefined (reading 'ISOLATION_LEVELS')\n    at TransactionHelper.executeInTransaction (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:257:71)\n    at store (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:255:46)\n    at Layer.handle [as handle_request] (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Manutencao\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at authenticate (C:\\Manutencao\\backend\\middleware\\auth.js:54:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 13:05:56","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: this.getStatistics is not a function","stack":"TypeError: this.getStatistics is not a function\n    at index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:87:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 13:07:11","level":"\u001b[31merror\u001b[39m","message":"Transaction Failed","service":"sistema-manutencao","environment":"development","version":"1.0.0","duration":"4ms","error":"notNull Violation: Solicitacao.numero cannot be null"}
{"timestamp":"2025-08-22 13:07:11","level":"\u001b[31merror\u001b[39m","message":"Erro ao criar solicitação: notNull Violation: Solicitacao.numero cannot be null","stack":"SequelizeValidationError: notNull Violation: Solicitacao.numero cannot be null\n    at InstanceValidator._validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:60:7)\n    at async InstanceValidator.validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:54:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2426:7)\n    at async Solicitacao.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:275:29\n    at async TransactionHelper.executeInTransaction (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:265:22)\n    at async store (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:255:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeValidationError","errors":[{"message":"Solicitacao.numero cannot be null","type":"notNull Violation","path":"numero","value":null,"origin":"CORE","instance":{"status":"aberta","id":null,"titulo":"vasamento compressor","descricao":"vasamento no cabeçote principar do compressor","category_id":8,"subcategory_id":5,"prioridade":"alta","localizacao":"","data_prevista":null,"ativo_id":1,"setor_id":8,"solicitante_id":1,"categoria":null,"subcategoria":null,"department_id":null,"updatedAt":"2025-08-22T16:07:11.482Z","createdAt":"2025-08-22T16:07:11.482Z"},"validatorKey":"is_null","validatorName":null,"validatorArgs":[]}]}
{"timestamp":"2025-08-22 13:07:11","level":"\u001b[31merror\u001b[39m","message":"Unhandled API Error","stack":"SequelizeValidationError: notNull Violation: Solicitacao.numero cannot be null\n    at InstanceValidator._validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:60:7)\n    at async InstanceValidator.validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:54:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2426:7)\n    at async Solicitacao.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:275:29\n    at async TransactionHelper.executeInTransaction (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:265:22)\n    at async store (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:255:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","error":"notNull Violation: Solicitacao.numero cannot be null","method":"POST","url":"/api/solicitacoes","ip":"127.0.0.1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36","body":{"titulo":"vasamento compressor","descricao":"vasamento no cabeçote principar do compressor","category_id":8,"subcategory_id":5,"prioridade":"alta","ativo_id":1,"setor_id":8},"params":{},"query":{}}
{"timestamp":"2025-08-22 13:07:11","level":"\u001b[31merror\u001b[39m","message":"SequelizeValidationError: notNull Violation: Solicitacao.numero cannot be null\n    at InstanceValidator._validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:60:7)\n    at async InstanceValidator.validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:54:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2426:7)\n    at async Solicitacao.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:275:29\n    at async TransactionHelper.executeInTransaction (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:265:22)\n    at async store (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:255:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 18:25:41","level":"\u001b[31merror\u001b[39m","message":"Erro no login: Unknown column 'updatedAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:168:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:25:41","2025-08-22 21:25:41",1]},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:25:41","2025-08-22 21:25:41",1]},"sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:25:41","2025-08-22 21:25:41",1]}
{"timestamp":"2025-08-22 18:25:41","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:168:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 18:52:25","level":"\u001b[31merror\u001b[39m","message":"Erro no login: Unknown column 'updatedAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:168:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:52:25","2025-08-22 21:52:25",1]},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:52:25","2025-08-22 21:52:25",1]},"sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:52:25","2025-08-22 21:52:25",1]}
{"timestamp":"2025-08-22 18:52:25","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:168:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 18:52:29","level":"\u001b[31merror\u001b[39m","message":"Erro no login: Unknown column 'updatedAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:168:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:52:29","2025-08-22 21:52:29",1]},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:52:29","2025-08-22 21:52:29",1]},"sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:52:29","2025-08-22 21:52:29",1]}
{"timestamp":"2025-08-22 18:52:29","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:168:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 18:52:30","level":"\u001b[31merror\u001b[39m","message":"Erro no login: Unknown column 'updatedAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:168:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:52:30","2025-08-22 21:52:30",1]},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:52:30","2025-08-22 21:52:30",1]},"sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:52:30","2025-08-22 21:52:30",1]}
{"timestamp":"2025-08-22 18:52:30","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:168:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 18:52:32","level":"\u001b[31merror\u001b[39m","message":"Erro no login: Unknown column 'updatedAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:168:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:52:32","2025-08-22 21:52:32",1]},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:52:32","2025-08-22 21:52:32",1]},"sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:52:32","2025-08-22 21:52:32",1]}
{"timestamp":"2025-08-22 18:52:32","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:168:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 18:53:28","level":"\u001b[31merror\u001b[39m","message":"Erro no login: Unknown column 'updatedAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:168:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:53:28","2025-08-22 21:53:28",1]},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:53:28","2025-08-22 21:53:28",1]},"sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:53:28","2025-08-22 21:53:28",1]}
{"timestamp":"2025-08-22 18:53:28","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:168:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 18:57:19","level":"\u001b[31merror\u001b[39m","message":"Erro no login: Unknown column 'updatedAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:168:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:57:19","2025-08-22 21:57:19",1]},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:57:19","2025-08-22 21:57:19",1]},"sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 21:57:19","2025-08-22 21:57:19",1]}
{"timestamp":"2025-08-22 18:57:19","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:168:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 19:02:20","level":"\u001b[31merror\u001b[39m","message":"Erro no login: Unknown column 'updatedAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:171:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 22:02:20","2025-08-22 22:02:20",1]},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 22:02:20","2025-08-22 22:02:20",1]},"sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 22:02:20","2025-08-22 22:02:20",1]}
{"timestamp":"2025-08-22 19:02:20","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:171:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 19:03:31","level":"\u001b[31merror\u001b[39m","message":"Erro no login: Unknown column 'updatedAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:171:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 22:03:31","2025-08-22 22:03:31",1]},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'updatedAt' in 'field list'","sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 22:03:31","2025-08-22 22:03:31",1]},"sql":"UPDATE `users` SET `ultimo_login`=?,`updatedAt`=? WHERE `id` = ?","parameters":["2025-08-22 22:03:31","2025-08-22 22:03:31",1]}
{"timestamp":"2025-08-22 19:03:31","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at async MySQLQueryInterface.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:355:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2490:35)\n    at async model.update (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2598:12)\n    at async login (C:\\Manutencao\\backend\\controllers\\AuthController.js:171:7)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 19:05:43","level":"\u001b[31merror\u001b[39m","message":"Erro no login: accessToken is not defined","stack":"ReferenceError: accessToken is not defined\n    at login (C:\\Manutencao\\backend\\controllers\\AuthController.js:192:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 19:05:43","level":"\u001b[31merror\u001b[39m","message":"ReferenceError: accessToken is not defined\n    at login (C:\\Manutencao\\backend\\controllers\\AuthController.js:192:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 20:05:02","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar solicitações: Unknown column 'Solicitacao.createdAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Solicitacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Solicitacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async QueryOptimizer.getCached (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:134:18)\n    at async index (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:86:45)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Solicitacao.createdAt' in 'field list'","sql":"SELECT `Solicitacao`.`id`, `Solicitacao`.`numero`, `Solicitacao`.`titulo`, `Solicitacao`.`descricao`, `Solicitacao`.`categoria`, `Solicitacao`.`subcategoria`, `Solicitacao`.`category_id`, `Solicitacao`.`subcategory_id`, `Solicitacao`.`ativo_id`, `Solicitacao`.`setor_id`, `Solicitacao`.`prioridade`, `Solicitacao`.`status`, `Solicitacao`.`localizacao`, `Solicitacao`.`observacoes`, `Solicitacao`.`data_prevista`, `Solicitacao`.`data_fechamento`, `Solicitacao`.`solicitante_id`, `Solicitacao`.`responsavel_id`, `Solicitacao`.`department_id`, `Solicitacao`.`createdAt`, `Solicitacao`.`updatedAt`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `category`.`id` AS `category.id`, `category`.`nome` AS `category.nome`, `subcategory`.`id` AS `subcategory.id`, `subcategory`.`nome` AS `subcategory.nome` FROM `solicitacoes` AS `Solicitacao` LEFT OUTER JOIN `users` AS `solicitante` ON `Solicitacao`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Solicitacao`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Solicitacao`.`department_id` = `department`.`id` LEFT OUTER JOIN `categories` AS `category` ON `Solicitacao`.`category_id` = `category`.`id` LEFT OUTER JOIN `subcategories` AS `subcategory` ON `Solicitacao`.`subcategory_id` = `subcategory`.`id` ORDER BY `Solicitacao`.`created_at` DESC LIMIT 0, 1;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Solicitacao.createdAt' in 'field list'","sql":"SELECT `Solicitacao`.`id`, `Solicitacao`.`numero`, `Solicitacao`.`titulo`, `Solicitacao`.`descricao`, `Solicitacao`.`categoria`, `Solicitacao`.`subcategoria`, `Solicitacao`.`category_id`, `Solicitacao`.`subcategory_id`, `Solicitacao`.`ativo_id`, `Solicitacao`.`setor_id`, `Solicitacao`.`prioridade`, `Solicitacao`.`status`, `Solicitacao`.`localizacao`, `Solicitacao`.`observacoes`, `Solicitacao`.`data_prevista`, `Solicitacao`.`data_fechamento`, `Solicitacao`.`solicitante_id`, `Solicitacao`.`responsavel_id`, `Solicitacao`.`department_id`, `Solicitacao`.`createdAt`, `Solicitacao`.`updatedAt`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `category`.`id` AS `category.id`, `category`.`nome` AS `category.nome`, `subcategory`.`id` AS `subcategory.id`, `subcategory`.`nome` AS `subcategory.nome` FROM `solicitacoes` AS `Solicitacao` LEFT OUTER JOIN `users` AS `solicitante` ON `Solicitacao`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Solicitacao`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Solicitacao`.`department_id` = `department`.`id` LEFT OUTER JOIN `categories` AS `category` ON `Solicitacao`.`category_id` = `category`.`id` LEFT OUTER JOIN `subcategories` AS `subcategory` ON `Solicitacao`.`subcategory_id` = `subcategory`.`id` ORDER BY `Solicitacao`.`created_at` DESC LIMIT 0, 1;"},"sql":"SELECT `Solicitacao`.`id`, `Solicitacao`.`numero`, `Solicitacao`.`titulo`, `Solicitacao`.`descricao`, `Solicitacao`.`categoria`, `Solicitacao`.`subcategoria`, `Solicitacao`.`category_id`, `Solicitacao`.`subcategory_id`, `Solicitacao`.`ativo_id`, `Solicitacao`.`setor_id`, `Solicitacao`.`prioridade`, `Solicitacao`.`status`, `Solicitacao`.`localizacao`, `Solicitacao`.`observacoes`, `Solicitacao`.`data_prevista`, `Solicitacao`.`data_fechamento`, `Solicitacao`.`solicitante_id`, `Solicitacao`.`responsavel_id`, `Solicitacao`.`department_id`, `Solicitacao`.`createdAt`, `Solicitacao`.`updatedAt`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `category`.`id` AS `category.id`, `category`.`nome` AS `category.nome`, `subcategory`.`id` AS `subcategory.id`, `subcategory`.`nome` AS `subcategory.nome` FROM `solicitacoes` AS `Solicitacao` LEFT OUTER JOIN `users` AS `solicitante` ON `Solicitacao`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Solicitacao`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Solicitacao`.`department_id` = `department`.`id` LEFT OUTER JOIN `categories` AS `category` ON `Solicitacao`.`category_id` = `category`.`id` LEFT OUTER JOIN `subcategories` AS `subcategory` ON `Solicitacao`.`subcategory_id` = `subcategory`.`id` ORDER BY `Solicitacao`.`created_at` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-22 20:05:02","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Solicitacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Solicitacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async QueryOptimizer.getCached (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:134:18)\n    at async index (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:86:45)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 20:05:02","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Table 'manutencao_db.fmea_analyses' doesn't exist","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_NO_SUCH_TABLE","errno":1146,"sqlState":"42S02","sqlMessage":"Table 'manutencao_db.fmea_analyses' doesn't exist","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`ativo_id` AS `solicitacao.ativo_id`, `solicitacao`.`setor_id` AS `solicitacao.setor_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`createdAt` AS `solicitacao.createdAt`, `solicitacao`.`updatedAt` AS `solicitacao.updatedAt`, `fmea`.`id` AS `fmea.id`, `fmea`.`component` AS `fmea.component`, `fmea`.`failure_mode` AS `fmea.failure_mode`, `fmea`.`rpn` AS `fmea.rpn` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` LEFT OUTER JOIN `fmea_analyses` AS `fmea` ON `OrdemServico`.`fmea_id` = `fmea`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"original":{"code":"ER_NO_SUCH_TABLE","errno":1146,"sqlState":"42S02","sqlMessage":"Table 'manutencao_db.fmea_analyses' doesn't exist","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`ativo_id` AS `solicitacao.ativo_id`, `solicitacao`.`setor_id` AS `solicitacao.setor_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`createdAt` AS `solicitacao.createdAt`, `solicitacao`.`updatedAt` AS `solicitacao.updatedAt`, `fmea`.`id` AS `fmea.id`, `fmea`.`component` AS `fmea.component`, `fmea`.`failure_mode` AS `fmea.failure_mode`, `fmea`.`rpn` AS `fmea.rpn` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` LEFT OUTER JOIN `fmea_analyses` AS `fmea` ON `OrdemServico`.`fmea_id` = `fmea`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`ativo_id` AS `solicitacao.ativo_id`, `solicitacao`.`setor_id` AS `solicitacao.setor_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`createdAt` AS `solicitacao.createdAt`, `solicitacao`.`updatedAt` AS `solicitacao.updatedAt`, `fmea`.`id` AS `fmea.id`, `fmea`.`component` AS `fmea.component`, `fmea`.`failure_mode` AS `fmea.failure_mode`, `fmea`.`rpn` AS `fmea.rpn` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` LEFT OUTER JOIN `fmea_analyses` AS `fmea` ON `OrdemServico`.`fmea_id` = `fmea`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-22 20:05:29","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar solicitações: Unknown column 'Solicitacao.createdAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Solicitacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Solicitacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async QueryOptimizer.getCached (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:134:18)\n    at async index (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:86:45)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Solicitacao.createdAt' in 'field list'","sql":"SELECT `Solicitacao`.`id`, `Solicitacao`.`numero`, `Solicitacao`.`titulo`, `Solicitacao`.`descricao`, `Solicitacao`.`categoria`, `Solicitacao`.`subcategoria`, `Solicitacao`.`category_id`, `Solicitacao`.`subcategory_id`, `Solicitacao`.`ativo_id`, `Solicitacao`.`setor_id`, `Solicitacao`.`prioridade`, `Solicitacao`.`status`, `Solicitacao`.`localizacao`, `Solicitacao`.`observacoes`, `Solicitacao`.`data_prevista`, `Solicitacao`.`data_fechamento`, `Solicitacao`.`solicitante_id`, `Solicitacao`.`responsavel_id`, `Solicitacao`.`department_id`, `Solicitacao`.`createdAt`, `Solicitacao`.`updatedAt`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `category`.`id` AS `category.id`, `category`.`nome` AS `category.nome`, `subcategory`.`id` AS `subcategory.id`, `subcategory`.`nome` AS `subcategory.nome` FROM `solicitacoes` AS `Solicitacao` LEFT OUTER JOIN `users` AS `solicitante` ON `Solicitacao`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Solicitacao`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Solicitacao`.`department_id` = `department`.`id` LEFT OUTER JOIN `categories` AS `category` ON `Solicitacao`.`category_id` = `category`.`id` LEFT OUTER JOIN `subcategories` AS `subcategory` ON `Solicitacao`.`subcategory_id` = `subcategory`.`id` ORDER BY `Solicitacao`.`created_at` DESC LIMIT 0, 12;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Solicitacao.createdAt' in 'field list'","sql":"SELECT `Solicitacao`.`id`, `Solicitacao`.`numero`, `Solicitacao`.`titulo`, `Solicitacao`.`descricao`, `Solicitacao`.`categoria`, `Solicitacao`.`subcategoria`, `Solicitacao`.`category_id`, `Solicitacao`.`subcategory_id`, `Solicitacao`.`ativo_id`, `Solicitacao`.`setor_id`, `Solicitacao`.`prioridade`, `Solicitacao`.`status`, `Solicitacao`.`localizacao`, `Solicitacao`.`observacoes`, `Solicitacao`.`data_prevista`, `Solicitacao`.`data_fechamento`, `Solicitacao`.`solicitante_id`, `Solicitacao`.`responsavel_id`, `Solicitacao`.`department_id`, `Solicitacao`.`createdAt`, `Solicitacao`.`updatedAt`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `category`.`id` AS `category.id`, `category`.`nome` AS `category.nome`, `subcategory`.`id` AS `subcategory.id`, `subcategory`.`nome` AS `subcategory.nome` FROM `solicitacoes` AS `Solicitacao` LEFT OUTER JOIN `users` AS `solicitante` ON `Solicitacao`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Solicitacao`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Solicitacao`.`department_id` = `department`.`id` LEFT OUTER JOIN `categories` AS `category` ON `Solicitacao`.`category_id` = `category`.`id` LEFT OUTER JOIN `subcategories` AS `subcategory` ON `Solicitacao`.`subcategory_id` = `subcategory`.`id` ORDER BY `Solicitacao`.`created_at` DESC LIMIT 0, 12;"},"sql":"SELECT `Solicitacao`.`id`, `Solicitacao`.`numero`, `Solicitacao`.`titulo`, `Solicitacao`.`descricao`, `Solicitacao`.`categoria`, `Solicitacao`.`subcategoria`, `Solicitacao`.`category_id`, `Solicitacao`.`subcategory_id`, `Solicitacao`.`ativo_id`, `Solicitacao`.`setor_id`, `Solicitacao`.`prioridade`, `Solicitacao`.`status`, `Solicitacao`.`localizacao`, `Solicitacao`.`observacoes`, `Solicitacao`.`data_prevista`, `Solicitacao`.`data_fechamento`, `Solicitacao`.`solicitante_id`, `Solicitacao`.`responsavel_id`, `Solicitacao`.`department_id`, `Solicitacao`.`createdAt`, `Solicitacao`.`updatedAt`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `category`.`id` AS `category.id`, `category`.`nome` AS `category.nome`, `subcategory`.`id` AS `subcategory.id`, `subcategory`.`nome` AS `subcategory.nome` FROM `solicitacoes` AS `Solicitacao` LEFT OUTER JOIN `users` AS `solicitante` ON `Solicitacao`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Solicitacao`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Solicitacao`.`department_id` = `department`.`id` LEFT OUTER JOIN `categories` AS `category` ON `Solicitacao`.`category_id` = `category`.`id` LEFT OUTER JOIN `subcategories` AS `subcategory` ON `Solicitacao`.`subcategory_id` = `subcategory`.`id` ORDER BY `Solicitacao`.`created_at` DESC LIMIT 0, 12;","parameters":{}}
{"timestamp":"2025-08-22 20:05:29","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Solicitacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Solicitacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async QueryOptimizer.getCached (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:134:18)\n    at async index (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:86:45)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 20:05:42","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ativos: Unknown column 'Ativo.createdAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Ativo.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Ativo.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AtivoController.js:100:39)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Ativo.createdAt' in 'field list'","sql":"SELECT `Ativo`.`id`, `Ativo`.`codigo_patrimonio`, `Ativo`.`nome`, `Ativo`.`fabricante`, `Ativo`.`modelo`, `Ativo`.`numero_serie`, `Ativo`.`ano_fabricacao`, `Ativo`.`data_aquisicao`, `Ativo`.`valor_aquisicao`, `Ativo`.`valor_atual`, `Ativo`.`categoria_id`, `Ativo`.`subcategoria_id`, `Ativo`.`department_id`, `Ativo`.`localizacao_completa`, `Ativo`.`predio`, `Ativo`.`andar`, `Ativo`.`sala`, `Ativo`.`posicao`, `Ativo`.`estado`, `Ativo`.`criticidade`, `Ativo`.`potencia`, `Ativo`.`tensao`, `Ativo`.`frequencia`, `Ativo`.`peso`, `Ativo`.`dimensoes`, `Ativo`.`capacidade`, `Ativo`.`fornecedor`, `Ativo`.`garantia_ate`, `Ativo`.`manual_operacao`, `Ativo`.`manual_manutencao`, `Ativo`.`especificacoes_tecnicas`, `Ativo`.`observacoes`, `Ativo`.`qr_code`, `Ativo`.`foto_principal`, `Ativo`.`responsavel_id`, `Ativo`.`setor_id`, `Ativo`.`data_proxima_inspecao`, `Ativo`.`horas_funcionamento`, `Ativo`.`contador_producao`, `Ativo`.`ativo`, `Ativo`.`vida_util_anos`, `Ativo`.`ultima_manutencao`, `Ativo`.`proxima_manutencao`, `Ativo`.`intervalo_manutencao_dias`, `Ativo`.`custo_manutencao_total`, `Ativo`.`mtbf_horas`, `Ativo`.`mttr_horas`, `Ativo`.`historico_falhas`, `Ativo`.`parametros_operacao`, `Ativo`.`documentos_anexos`, `Ativo`.`createdAt`, `Ativo`.`updatedAt`, `categoria`.`id` AS `categoria.id`, `categoria`.`nome` AS `categoria.nome`, `categoria`.`cor` AS `categoria.cor`, `categoria`.`icone` AS `categoria.icone`, `subcategoria`.`id` AS `subcategoria.id`, `subcategoria`.`nome` AS `subcategoria.nome`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `setor`.`id` AS `setor.id`, `setor`.`codigo` AS `setor.codigo`, `setor`.`nome` AS `setor.nome`, `setor`.`localizacao` AS `setor.localizacao` FROM `ativos` AS `Ativo` LEFT OUTER JOIN `categories` AS `categoria` ON `Ativo`.`categoria_id` = `categoria`.`id` LEFT OUTER JOIN `subcategories` AS `subcategoria` ON `Ativo`.`subcategoria_id` = `subcategoria`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Ativo`.`department_id` = `department`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Ativo`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `setores` AS `setor` ON `Ativo`.`setor_id` = `setor`.`id` WHERE `Ativo`.`ativo` = true ORDER BY `Ativo`.`nome` ASC LIMIT 0, 10;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Ativo.createdAt' in 'field list'","sql":"SELECT `Ativo`.`id`, `Ativo`.`codigo_patrimonio`, `Ativo`.`nome`, `Ativo`.`fabricante`, `Ativo`.`modelo`, `Ativo`.`numero_serie`, `Ativo`.`ano_fabricacao`, `Ativo`.`data_aquisicao`, `Ativo`.`valor_aquisicao`, `Ativo`.`valor_atual`, `Ativo`.`categoria_id`, `Ativo`.`subcategoria_id`, `Ativo`.`department_id`, `Ativo`.`localizacao_completa`, `Ativo`.`predio`, `Ativo`.`andar`, `Ativo`.`sala`, `Ativo`.`posicao`, `Ativo`.`estado`, `Ativo`.`criticidade`, `Ativo`.`potencia`, `Ativo`.`tensao`, `Ativo`.`frequencia`, `Ativo`.`peso`, `Ativo`.`dimensoes`, `Ativo`.`capacidade`, `Ativo`.`fornecedor`, `Ativo`.`garantia_ate`, `Ativo`.`manual_operacao`, `Ativo`.`manual_manutencao`, `Ativo`.`especificacoes_tecnicas`, `Ativo`.`observacoes`, `Ativo`.`qr_code`, `Ativo`.`foto_principal`, `Ativo`.`responsavel_id`, `Ativo`.`setor_id`, `Ativo`.`data_proxima_inspecao`, `Ativo`.`horas_funcionamento`, `Ativo`.`contador_producao`, `Ativo`.`ativo`, `Ativo`.`vida_util_anos`, `Ativo`.`ultima_manutencao`, `Ativo`.`proxima_manutencao`, `Ativo`.`intervalo_manutencao_dias`, `Ativo`.`custo_manutencao_total`, `Ativo`.`mtbf_horas`, `Ativo`.`mttr_horas`, `Ativo`.`historico_falhas`, `Ativo`.`parametros_operacao`, `Ativo`.`documentos_anexos`, `Ativo`.`createdAt`, `Ativo`.`updatedAt`, `categoria`.`id` AS `categoria.id`, `categoria`.`nome` AS `categoria.nome`, `categoria`.`cor` AS `categoria.cor`, `categoria`.`icone` AS `categoria.icone`, `subcategoria`.`id` AS `subcategoria.id`, `subcategoria`.`nome` AS `subcategoria.nome`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `setor`.`id` AS `setor.id`, `setor`.`codigo` AS `setor.codigo`, `setor`.`nome` AS `setor.nome`, `setor`.`localizacao` AS `setor.localizacao` FROM `ativos` AS `Ativo` LEFT OUTER JOIN `categories` AS `categoria` ON `Ativo`.`categoria_id` = `categoria`.`id` LEFT OUTER JOIN `subcategories` AS `subcategoria` ON `Ativo`.`subcategoria_id` = `subcategoria`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Ativo`.`department_id` = `department`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Ativo`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `setores` AS `setor` ON `Ativo`.`setor_id` = `setor`.`id` WHERE `Ativo`.`ativo` = true ORDER BY `Ativo`.`nome` ASC LIMIT 0, 10;"},"sql":"SELECT `Ativo`.`id`, `Ativo`.`codigo_patrimonio`, `Ativo`.`nome`, `Ativo`.`fabricante`, `Ativo`.`modelo`, `Ativo`.`numero_serie`, `Ativo`.`ano_fabricacao`, `Ativo`.`data_aquisicao`, `Ativo`.`valor_aquisicao`, `Ativo`.`valor_atual`, `Ativo`.`categoria_id`, `Ativo`.`subcategoria_id`, `Ativo`.`department_id`, `Ativo`.`localizacao_completa`, `Ativo`.`predio`, `Ativo`.`andar`, `Ativo`.`sala`, `Ativo`.`posicao`, `Ativo`.`estado`, `Ativo`.`criticidade`, `Ativo`.`potencia`, `Ativo`.`tensao`, `Ativo`.`frequencia`, `Ativo`.`peso`, `Ativo`.`dimensoes`, `Ativo`.`capacidade`, `Ativo`.`fornecedor`, `Ativo`.`garantia_ate`, `Ativo`.`manual_operacao`, `Ativo`.`manual_manutencao`, `Ativo`.`especificacoes_tecnicas`, `Ativo`.`observacoes`, `Ativo`.`qr_code`, `Ativo`.`foto_principal`, `Ativo`.`responsavel_id`, `Ativo`.`setor_id`, `Ativo`.`data_proxima_inspecao`, `Ativo`.`horas_funcionamento`, `Ativo`.`contador_producao`, `Ativo`.`ativo`, `Ativo`.`vida_util_anos`, `Ativo`.`ultima_manutencao`, `Ativo`.`proxima_manutencao`, `Ativo`.`intervalo_manutencao_dias`, `Ativo`.`custo_manutencao_total`, `Ativo`.`mtbf_horas`, `Ativo`.`mttr_horas`, `Ativo`.`historico_falhas`, `Ativo`.`parametros_operacao`, `Ativo`.`documentos_anexos`, `Ativo`.`createdAt`, `Ativo`.`updatedAt`, `categoria`.`id` AS `categoria.id`, `categoria`.`nome` AS `categoria.nome`, `categoria`.`cor` AS `categoria.cor`, `categoria`.`icone` AS `categoria.icone`, `subcategoria`.`id` AS `subcategoria.id`, `subcategoria`.`nome` AS `subcategoria.nome`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `setor`.`id` AS `setor.id`, `setor`.`codigo` AS `setor.codigo`, `setor`.`nome` AS `setor.nome`, `setor`.`localizacao` AS `setor.localizacao` FROM `ativos` AS `Ativo` LEFT OUTER JOIN `categories` AS `categoria` ON `Ativo`.`categoria_id` = `categoria`.`id` LEFT OUTER JOIN `subcategories` AS `subcategoria` ON `Ativo`.`subcategoria_id` = `subcategoria`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Ativo`.`department_id` = `department`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Ativo`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `setores` AS `setor` ON `Ativo`.`setor_id` = `setor`.`id` WHERE `Ativo`.`ativo` = true ORDER BY `Ativo`.`nome` ASC LIMIT 0, 10;","parameters":{}}
{"timestamp":"2025-08-22 20:05:42","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Ativo.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Ativo.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AtivoController.js:100:39)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 20:05:42","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Table 'manutencao_db.fmea_analyses' doesn't exist","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.rawSelect (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:434:18)\n    at async OrdemServico.aggregate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1277:19)\n    at async OrdemServico.count (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1306:20)\n    at async Promise.all (index 0)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_NO_SUCH_TABLE","errno":1146,"sqlState":"42S02","sqlMessage":"Table 'manutencao_db.fmea_analyses' doesn't exist","sql":"SELECT count(`OrdemServico`.`id`) AS `count` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` LEFT OUTER JOIN `fmea_analyses` AS `fmea` ON `OrdemServico`.`fmea_id` = `fmea`.`id`;"},"original":{"code":"ER_NO_SUCH_TABLE","errno":1146,"sqlState":"42S02","sqlMessage":"Table 'manutencao_db.fmea_analyses' doesn't exist","sql":"SELECT count(`OrdemServico`.`id`) AS `count` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` LEFT OUTER JOIN `fmea_analyses` AS `fmea` ON `OrdemServico`.`fmea_id` = `fmea`.`id`;"},"sql":"SELECT count(`OrdemServico`.`id`) AS `count` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` LEFT OUTER JOIN `fmea_analyses` AS `fmea` ON `OrdemServico`.`fmea_id` = `fmea`.`id`;","parameters":{}}
{"timestamp":"2025-08-22 20:05:43","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ativos: Unknown column 'Ativo.createdAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Ativo.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Ativo.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AtivoController.js:100:39)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Ativo.createdAt' in 'field list'","sql":"SELECT `Ativo`.`id`, `Ativo`.`codigo_patrimonio`, `Ativo`.`nome`, `Ativo`.`fabricante`, `Ativo`.`modelo`, `Ativo`.`numero_serie`, `Ativo`.`ano_fabricacao`, `Ativo`.`data_aquisicao`, `Ativo`.`valor_aquisicao`, `Ativo`.`valor_atual`, `Ativo`.`categoria_id`, `Ativo`.`subcategoria_id`, `Ativo`.`department_id`, `Ativo`.`localizacao_completa`, `Ativo`.`predio`, `Ativo`.`andar`, `Ativo`.`sala`, `Ativo`.`posicao`, `Ativo`.`estado`, `Ativo`.`criticidade`, `Ativo`.`potencia`, `Ativo`.`tensao`, `Ativo`.`frequencia`, `Ativo`.`peso`, `Ativo`.`dimensoes`, `Ativo`.`capacidade`, `Ativo`.`fornecedor`, `Ativo`.`garantia_ate`, `Ativo`.`manual_operacao`, `Ativo`.`manual_manutencao`, `Ativo`.`especificacoes_tecnicas`, `Ativo`.`observacoes`, `Ativo`.`qr_code`, `Ativo`.`foto_principal`, `Ativo`.`responsavel_id`, `Ativo`.`setor_id`, `Ativo`.`data_proxima_inspecao`, `Ativo`.`horas_funcionamento`, `Ativo`.`contador_producao`, `Ativo`.`ativo`, `Ativo`.`vida_util_anos`, `Ativo`.`ultima_manutencao`, `Ativo`.`proxima_manutencao`, `Ativo`.`intervalo_manutencao_dias`, `Ativo`.`custo_manutencao_total`, `Ativo`.`mtbf_horas`, `Ativo`.`mttr_horas`, `Ativo`.`historico_falhas`, `Ativo`.`parametros_operacao`, `Ativo`.`documentos_anexos`, `Ativo`.`createdAt`, `Ativo`.`updatedAt`, `categoria`.`id` AS `categoria.id`, `categoria`.`nome` AS `categoria.nome`, `categoria`.`cor` AS `categoria.cor`, `categoria`.`icone` AS `categoria.icone`, `subcategoria`.`id` AS `subcategoria.id`, `subcategoria`.`nome` AS `subcategoria.nome`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `setor`.`id` AS `setor.id`, `setor`.`codigo` AS `setor.codigo`, `setor`.`nome` AS `setor.nome`, `setor`.`localizacao` AS `setor.localizacao` FROM `ativos` AS `Ativo` LEFT OUTER JOIN `categories` AS `categoria` ON `Ativo`.`categoria_id` = `categoria`.`id` LEFT OUTER JOIN `subcategories` AS `subcategoria` ON `Ativo`.`subcategoria_id` = `subcategoria`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Ativo`.`department_id` = `department`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Ativo`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `setores` AS `setor` ON `Ativo`.`setor_id` = `setor`.`id` WHERE `Ativo`.`ativo` = true ORDER BY `Ativo`.`nome` ASC LIMIT 0, 10;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Ativo.createdAt' in 'field list'","sql":"SELECT `Ativo`.`id`, `Ativo`.`codigo_patrimonio`, `Ativo`.`nome`, `Ativo`.`fabricante`, `Ativo`.`modelo`, `Ativo`.`numero_serie`, `Ativo`.`ano_fabricacao`, `Ativo`.`data_aquisicao`, `Ativo`.`valor_aquisicao`, `Ativo`.`valor_atual`, `Ativo`.`categoria_id`, `Ativo`.`subcategoria_id`, `Ativo`.`department_id`, `Ativo`.`localizacao_completa`, `Ativo`.`predio`, `Ativo`.`andar`, `Ativo`.`sala`, `Ativo`.`posicao`, `Ativo`.`estado`, `Ativo`.`criticidade`, `Ativo`.`potencia`, `Ativo`.`tensao`, `Ativo`.`frequencia`, `Ativo`.`peso`, `Ativo`.`dimensoes`, `Ativo`.`capacidade`, `Ativo`.`fornecedor`, `Ativo`.`garantia_ate`, `Ativo`.`manual_operacao`, `Ativo`.`manual_manutencao`, `Ativo`.`especificacoes_tecnicas`, `Ativo`.`observacoes`, `Ativo`.`qr_code`, `Ativo`.`foto_principal`, `Ativo`.`responsavel_id`, `Ativo`.`setor_id`, `Ativo`.`data_proxima_inspecao`, `Ativo`.`horas_funcionamento`, `Ativo`.`contador_producao`, `Ativo`.`ativo`, `Ativo`.`vida_util_anos`, `Ativo`.`ultima_manutencao`, `Ativo`.`proxima_manutencao`, `Ativo`.`intervalo_manutencao_dias`, `Ativo`.`custo_manutencao_total`, `Ativo`.`mtbf_horas`, `Ativo`.`mttr_horas`, `Ativo`.`historico_falhas`, `Ativo`.`parametros_operacao`, `Ativo`.`documentos_anexos`, `Ativo`.`createdAt`, `Ativo`.`updatedAt`, `categoria`.`id` AS `categoria.id`, `categoria`.`nome` AS `categoria.nome`, `categoria`.`cor` AS `categoria.cor`, `categoria`.`icone` AS `categoria.icone`, `subcategoria`.`id` AS `subcategoria.id`, `subcategoria`.`nome` AS `subcategoria.nome`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `setor`.`id` AS `setor.id`, `setor`.`codigo` AS `setor.codigo`, `setor`.`nome` AS `setor.nome`, `setor`.`localizacao` AS `setor.localizacao` FROM `ativos` AS `Ativo` LEFT OUTER JOIN `categories` AS `categoria` ON `Ativo`.`categoria_id` = `categoria`.`id` LEFT OUTER JOIN `subcategories` AS `subcategoria` ON `Ativo`.`subcategoria_id` = `subcategoria`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Ativo`.`department_id` = `department`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Ativo`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `setores` AS `setor` ON `Ativo`.`setor_id` = `setor`.`id` WHERE `Ativo`.`ativo` = true ORDER BY `Ativo`.`nome` ASC LIMIT 0, 10;"},"sql":"SELECT `Ativo`.`id`, `Ativo`.`codigo_patrimonio`, `Ativo`.`nome`, `Ativo`.`fabricante`, `Ativo`.`modelo`, `Ativo`.`numero_serie`, `Ativo`.`ano_fabricacao`, `Ativo`.`data_aquisicao`, `Ativo`.`valor_aquisicao`, `Ativo`.`valor_atual`, `Ativo`.`categoria_id`, `Ativo`.`subcategoria_id`, `Ativo`.`department_id`, `Ativo`.`localizacao_completa`, `Ativo`.`predio`, `Ativo`.`andar`, `Ativo`.`sala`, `Ativo`.`posicao`, `Ativo`.`estado`, `Ativo`.`criticidade`, `Ativo`.`potencia`, `Ativo`.`tensao`, `Ativo`.`frequencia`, `Ativo`.`peso`, `Ativo`.`dimensoes`, `Ativo`.`capacidade`, `Ativo`.`fornecedor`, `Ativo`.`garantia_ate`, `Ativo`.`manual_operacao`, `Ativo`.`manual_manutencao`, `Ativo`.`especificacoes_tecnicas`, `Ativo`.`observacoes`, `Ativo`.`qr_code`, `Ativo`.`foto_principal`, `Ativo`.`responsavel_id`, `Ativo`.`setor_id`, `Ativo`.`data_proxima_inspecao`, `Ativo`.`horas_funcionamento`, `Ativo`.`contador_producao`, `Ativo`.`ativo`, `Ativo`.`vida_util_anos`, `Ativo`.`ultima_manutencao`, `Ativo`.`proxima_manutencao`, `Ativo`.`intervalo_manutencao_dias`, `Ativo`.`custo_manutencao_total`, `Ativo`.`mtbf_horas`, `Ativo`.`mttr_horas`, `Ativo`.`historico_falhas`, `Ativo`.`parametros_operacao`, `Ativo`.`documentos_anexos`, `Ativo`.`createdAt`, `Ativo`.`updatedAt`, `categoria`.`id` AS `categoria.id`, `categoria`.`nome` AS `categoria.nome`, `categoria`.`cor` AS `categoria.cor`, `categoria`.`icone` AS `categoria.icone`, `subcategoria`.`id` AS `subcategoria.id`, `subcategoria`.`nome` AS `subcategoria.nome`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `setor`.`id` AS `setor.id`, `setor`.`codigo` AS `setor.codigo`, `setor`.`nome` AS `setor.nome`, `setor`.`localizacao` AS `setor.localizacao` FROM `ativos` AS `Ativo` LEFT OUTER JOIN `categories` AS `categoria` ON `Ativo`.`categoria_id` = `categoria`.`id` LEFT OUTER JOIN `subcategories` AS `subcategoria` ON `Ativo`.`subcategoria_id` = `subcategoria`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Ativo`.`department_id` = `department`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Ativo`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `setores` AS `setor` ON `Ativo`.`setor_id` = `setor`.`id` WHERE `Ativo`.`ativo` = true ORDER BY `Ativo`.`nome` ASC LIMIT 0, 10;","parameters":{}}
{"timestamp":"2025-08-22 20:05:43","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Ativo.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Ativo.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AtivoController.js:100:39)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 20:07:27","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar solicitações: Unknown column 'Solicitacao.createdAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Solicitacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Solicitacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async QueryOptimizer.getCached (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:134:18)\n    at async index (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:86:45)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Solicitacao.createdAt' in 'field list'","sql":"SELECT `Solicitacao`.`id`, `Solicitacao`.`numero`, `Solicitacao`.`titulo`, `Solicitacao`.`descricao`, `Solicitacao`.`categoria`, `Solicitacao`.`subcategoria`, `Solicitacao`.`category_id`, `Solicitacao`.`subcategory_id`, `Solicitacao`.`ativo_id`, `Solicitacao`.`setor_id`, `Solicitacao`.`prioridade`, `Solicitacao`.`status`, `Solicitacao`.`localizacao`, `Solicitacao`.`observacoes`, `Solicitacao`.`data_prevista`, `Solicitacao`.`data_fechamento`, `Solicitacao`.`solicitante_id`, `Solicitacao`.`responsavel_id`, `Solicitacao`.`department_id`, `Solicitacao`.`createdAt`, `Solicitacao`.`updatedAt`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `category`.`id` AS `category.id`, `category`.`nome` AS `category.nome`, `subcategory`.`id` AS `subcategory.id`, `subcategory`.`nome` AS `subcategory.nome` FROM `solicitacoes` AS `Solicitacao` LEFT OUTER JOIN `users` AS `solicitante` ON `Solicitacao`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Solicitacao`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Solicitacao`.`department_id` = `department`.`id` LEFT OUTER JOIN `categories` AS `category` ON `Solicitacao`.`category_id` = `category`.`id` LEFT OUTER JOIN `subcategories` AS `subcategory` ON `Solicitacao`.`subcategory_id` = `subcategory`.`id` ORDER BY `Solicitacao`.`created_at` DESC LIMIT 0, 12;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Solicitacao.createdAt' in 'field list'","sql":"SELECT `Solicitacao`.`id`, `Solicitacao`.`numero`, `Solicitacao`.`titulo`, `Solicitacao`.`descricao`, `Solicitacao`.`categoria`, `Solicitacao`.`subcategoria`, `Solicitacao`.`category_id`, `Solicitacao`.`subcategory_id`, `Solicitacao`.`ativo_id`, `Solicitacao`.`setor_id`, `Solicitacao`.`prioridade`, `Solicitacao`.`status`, `Solicitacao`.`localizacao`, `Solicitacao`.`observacoes`, `Solicitacao`.`data_prevista`, `Solicitacao`.`data_fechamento`, `Solicitacao`.`solicitante_id`, `Solicitacao`.`responsavel_id`, `Solicitacao`.`department_id`, `Solicitacao`.`createdAt`, `Solicitacao`.`updatedAt`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `category`.`id` AS `category.id`, `category`.`nome` AS `category.nome`, `subcategory`.`id` AS `subcategory.id`, `subcategory`.`nome` AS `subcategory.nome` FROM `solicitacoes` AS `Solicitacao` LEFT OUTER JOIN `users` AS `solicitante` ON `Solicitacao`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Solicitacao`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Solicitacao`.`department_id` = `department`.`id` LEFT OUTER JOIN `categories` AS `category` ON `Solicitacao`.`category_id` = `category`.`id` LEFT OUTER JOIN `subcategories` AS `subcategory` ON `Solicitacao`.`subcategory_id` = `subcategory`.`id` ORDER BY `Solicitacao`.`created_at` DESC LIMIT 0, 12;"},"sql":"SELECT `Solicitacao`.`id`, `Solicitacao`.`numero`, `Solicitacao`.`titulo`, `Solicitacao`.`descricao`, `Solicitacao`.`categoria`, `Solicitacao`.`subcategoria`, `Solicitacao`.`category_id`, `Solicitacao`.`subcategory_id`, `Solicitacao`.`ativo_id`, `Solicitacao`.`setor_id`, `Solicitacao`.`prioridade`, `Solicitacao`.`status`, `Solicitacao`.`localizacao`, `Solicitacao`.`observacoes`, `Solicitacao`.`data_prevista`, `Solicitacao`.`data_fechamento`, `Solicitacao`.`solicitante_id`, `Solicitacao`.`responsavel_id`, `Solicitacao`.`department_id`, `Solicitacao`.`createdAt`, `Solicitacao`.`updatedAt`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `category`.`id` AS `category.id`, `category`.`nome` AS `category.nome`, `subcategory`.`id` AS `subcategory.id`, `subcategory`.`nome` AS `subcategory.nome` FROM `solicitacoes` AS `Solicitacao` LEFT OUTER JOIN `users` AS `solicitante` ON `Solicitacao`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Solicitacao`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Solicitacao`.`department_id` = `department`.`id` LEFT OUTER JOIN `categories` AS `category` ON `Solicitacao`.`category_id` = `category`.`id` LEFT OUTER JOIN `subcategories` AS `subcategory` ON `Solicitacao`.`subcategory_id` = `subcategory`.`id` ORDER BY `Solicitacao`.`created_at` DESC LIMIT 0, 12;","parameters":{}}
{"timestamp":"2025-08-22 20:07:27","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Solicitacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Solicitacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async QueryOptimizer.getCached (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:134:18)\n    at async index (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:86:45)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 20:07:43","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ativos: Unknown column 'Ativo.createdAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Ativo.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Ativo.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AtivoController.js:100:39)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Ativo.createdAt' in 'field list'","sql":"SELECT `Ativo`.`id`, `Ativo`.`codigo_patrimonio`, `Ativo`.`nome`, `Ativo`.`fabricante`, `Ativo`.`modelo`, `Ativo`.`numero_serie`, `Ativo`.`ano_fabricacao`, `Ativo`.`data_aquisicao`, `Ativo`.`valor_aquisicao`, `Ativo`.`valor_atual`, `Ativo`.`categoria_id`, `Ativo`.`subcategoria_id`, `Ativo`.`department_id`, `Ativo`.`localizacao_completa`, `Ativo`.`predio`, `Ativo`.`andar`, `Ativo`.`sala`, `Ativo`.`posicao`, `Ativo`.`estado`, `Ativo`.`criticidade`, `Ativo`.`potencia`, `Ativo`.`tensao`, `Ativo`.`frequencia`, `Ativo`.`peso`, `Ativo`.`dimensoes`, `Ativo`.`capacidade`, `Ativo`.`fornecedor`, `Ativo`.`garantia_ate`, `Ativo`.`manual_operacao`, `Ativo`.`manual_manutencao`, `Ativo`.`especificacoes_tecnicas`, `Ativo`.`observacoes`, `Ativo`.`qr_code`, `Ativo`.`foto_principal`, `Ativo`.`responsavel_id`, `Ativo`.`setor_id`, `Ativo`.`data_proxima_inspecao`, `Ativo`.`horas_funcionamento`, `Ativo`.`contador_producao`, `Ativo`.`ativo`, `Ativo`.`vida_util_anos`, `Ativo`.`ultima_manutencao`, `Ativo`.`proxima_manutencao`, `Ativo`.`intervalo_manutencao_dias`, `Ativo`.`custo_manutencao_total`, `Ativo`.`mtbf_horas`, `Ativo`.`mttr_horas`, `Ativo`.`historico_falhas`, `Ativo`.`parametros_operacao`, `Ativo`.`documentos_anexos`, `Ativo`.`createdAt`, `Ativo`.`updatedAt`, `categoria`.`id` AS `categoria.id`, `categoria`.`nome` AS `categoria.nome`, `categoria`.`cor` AS `categoria.cor`, `categoria`.`icone` AS `categoria.icone`, `subcategoria`.`id` AS `subcategoria.id`, `subcategoria`.`nome` AS `subcategoria.nome`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `setor`.`id` AS `setor.id`, `setor`.`codigo` AS `setor.codigo`, `setor`.`nome` AS `setor.nome`, `setor`.`localizacao` AS `setor.localizacao` FROM `ativos` AS `Ativo` LEFT OUTER JOIN `categories` AS `categoria` ON `Ativo`.`categoria_id` = `categoria`.`id` LEFT OUTER JOIN `subcategories` AS `subcategoria` ON `Ativo`.`subcategoria_id` = `subcategoria`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Ativo`.`department_id` = `department`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Ativo`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `setores` AS `setor` ON `Ativo`.`setor_id` = `setor`.`id` WHERE `Ativo`.`ativo` = true AND `Ativo`.`setor_id` = '12' ORDER BY `Ativo`.`nome` ASC LIMIT 0, 200;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Ativo.createdAt' in 'field list'","sql":"SELECT `Ativo`.`id`, `Ativo`.`codigo_patrimonio`, `Ativo`.`nome`, `Ativo`.`fabricante`, `Ativo`.`modelo`, `Ativo`.`numero_serie`, `Ativo`.`ano_fabricacao`, `Ativo`.`data_aquisicao`, `Ativo`.`valor_aquisicao`, `Ativo`.`valor_atual`, `Ativo`.`categoria_id`, `Ativo`.`subcategoria_id`, `Ativo`.`department_id`, `Ativo`.`localizacao_completa`, `Ativo`.`predio`, `Ativo`.`andar`, `Ativo`.`sala`, `Ativo`.`posicao`, `Ativo`.`estado`, `Ativo`.`criticidade`, `Ativo`.`potencia`, `Ativo`.`tensao`, `Ativo`.`frequencia`, `Ativo`.`peso`, `Ativo`.`dimensoes`, `Ativo`.`capacidade`, `Ativo`.`fornecedor`, `Ativo`.`garantia_ate`, `Ativo`.`manual_operacao`, `Ativo`.`manual_manutencao`, `Ativo`.`especificacoes_tecnicas`, `Ativo`.`observacoes`, `Ativo`.`qr_code`, `Ativo`.`foto_principal`, `Ativo`.`responsavel_id`, `Ativo`.`setor_id`, `Ativo`.`data_proxima_inspecao`, `Ativo`.`horas_funcionamento`, `Ativo`.`contador_producao`, `Ativo`.`ativo`, `Ativo`.`vida_util_anos`, `Ativo`.`ultima_manutencao`, `Ativo`.`proxima_manutencao`, `Ativo`.`intervalo_manutencao_dias`, `Ativo`.`custo_manutencao_total`, `Ativo`.`mtbf_horas`, `Ativo`.`mttr_horas`, `Ativo`.`historico_falhas`, `Ativo`.`parametros_operacao`, `Ativo`.`documentos_anexos`, `Ativo`.`createdAt`, `Ativo`.`updatedAt`, `categoria`.`id` AS `categoria.id`, `categoria`.`nome` AS `categoria.nome`, `categoria`.`cor` AS `categoria.cor`, `categoria`.`icone` AS `categoria.icone`, `subcategoria`.`id` AS `subcategoria.id`, `subcategoria`.`nome` AS `subcategoria.nome`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `setor`.`id` AS `setor.id`, `setor`.`codigo` AS `setor.codigo`, `setor`.`nome` AS `setor.nome`, `setor`.`localizacao` AS `setor.localizacao` FROM `ativos` AS `Ativo` LEFT OUTER JOIN `categories` AS `categoria` ON `Ativo`.`categoria_id` = `categoria`.`id` LEFT OUTER JOIN `subcategories` AS `subcategoria` ON `Ativo`.`subcategoria_id` = `subcategoria`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Ativo`.`department_id` = `department`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Ativo`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `setores` AS `setor` ON `Ativo`.`setor_id` = `setor`.`id` WHERE `Ativo`.`ativo` = true AND `Ativo`.`setor_id` = '12' ORDER BY `Ativo`.`nome` ASC LIMIT 0, 200;"},"sql":"SELECT `Ativo`.`id`, `Ativo`.`codigo_patrimonio`, `Ativo`.`nome`, `Ativo`.`fabricante`, `Ativo`.`modelo`, `Ativo`.`numero_serie`, `Ativo`.`ano_fabricacao`, `Ativo`.`data_aquisicao`, `Ativo`.`valor_aquisicao`, `Ativo`.`valor_atual`, `Ativo`.`categoria_id`, `Ativo`.`subcategoria_id`, `Ativo`.`department_id`, `Ativo`.`localizacao_completa`, `Ativo`.`predio`, `Ativo`.`andar`, `Ativo`.`sala`, `Ativo`.`posicao`, `Ativo`.`estado`, `Ativo`.`criticidade`, `Ativo`.`potencia`, `Ativo`.`tensao`, `Ativo`.`frequencia`, `Ativo`.`peso`, `Ativo`.`dimensoes`, `Ativo`.`capacidade`, `Ativo`.`fornecedor`, `Ativo`.`garantia_ate`, `Ativo`.`manual_operacao`, `Ativo`.`manual_manutencao`, `Ativo`.`especificacoes_tecnicas`, `Ativo`.`observacoes`, `Ativo`.`qr_code`, `Ativo`.`foto_principal`, `Ativo`.`responsavel_id`, `Ativo`.`setor_id`, `Ativo`.`data_proxima_inspecao`, `Ativo`.`horas_funcionamento`, `Ativo`.`contador_producao`, `Ativo`.`ativo`, `Ativo`.`vida_util_anos`, `Ativo`.`ultima_manutencao`, `Ativo`.`proxima_manutencao`, `Ativo`.`intervalo_manutencao_dias`, `Ativo`.`custo_manutencao_total`, `Ativo`.`mtbf_horas`, `Ativo`.`mttr_horas`, `Ativo`.`historico_falhas`, `Ativo`.`parametros_operacao`, `Ativo`.`documentos_anexos`, `Ativo`.`createdAt`, `Ativo`.`updatedAt`, `categoria`.`id` AS `categoria.id`, `categoria`.`nome` AS `categoria.nome`, `categoria`.`cor` AS `categoria.cor`, `categoria`.`icone` AS `categoria.icone`, `subcategoria`.`id` AS `subcategoria.id`, `subcategoria`.`nome` AS `subcategoria.nome`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `setor`.`id` AS `setor.id`, `setor`.`codigo` AS `setor.codigo`, `setor`.`nome` AS `setor.nome`, `setor`.`localizacao` AS `setor.localizacao` FROM `ativos` AS `Ativo` LEFT OUTER JOIN `categories` AS `categoria` ON `Ativo`.`categoria_id` = `categoria`.`id` LEFT OUTER JOIN `subcategories` AS `subcategoria` ON `Ativo`.`subcategoria_id` = `subcategoria`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Ativo`.`department_id` = `department`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Ativo`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `setores` AS `setor` ON `Ativo`.`setor_id` = `setor`.`id` WHERE `Ativo`.`ativo` = true AND `Ativo`.`setor_id` = '12' ORDER BY `Ativo`.`nome` ASC LIMIT 0, 200;","parameters":{}}
{"timestamp":"2025-08-22 20:07:43","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Ativo.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Ativo.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AtivoController.js:100:39)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 20:10:17","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar solicitações: Unknown column 'Solicitacao.createdAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Solicitacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Solicitacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async QueryOptimizer.getCached (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:134:18)\n    at async index (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:86:45)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Solicitacao.createdAt' in 'field list'","sql":"SELECT `Solicitacao`.`id`, `Solicitacao`.`numero`, `Solicitacao`.`titulo`, `Solicitacao`.`descricao`, `Solicitacao`.`categoria`, `Solicitacao`.`subcategoria`, `Solicitacao`.`category_id`, `Solicitacao`.`subcategory_id`, `Solicitacao`.`ativo_id`, `Solicitacao`.`setor_id`, `Solicitacao`.`prioridade`, `Solicitacao`.`status`, `Solicitacao`.`localizacao`, `Solicitacao`.`observacoes`, `Solicitacao`.`data_prevista`, `Solicitacao`.`data_fechamento`, `Solicitacao`.`solicitante_id`, `Solicitacao`.`responsavel_id`, `Solicitacao`.`department_id`, `Solicitacao`.`createdAt`, `Solicitacao`.`updatedAt`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `category`.`id` AS `category.id`, `category`.`nome` AS `category.nome`, `subcategory`.`id` AS `subcategory.id`, `subcategory`.`nome` AS `subcategory.nome` FROM `solicitacoes` AS `Solicitacao` LEFT OUTER JOIN `users` AS `solicitante` ON `Solicitacao`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Solicitacao`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Solicitacao`.`department_id` = `department`.`id` LEFT OUTER JOIN `categories` AS `category` ON `Solicitacao`.`category_id` = `category`.`id` LEFT OUTER JOIN `subcategories` AS `subcategory` ON `Solicitacao`.`subcategory_id` = `subcategory`.`id` ORDER BY `Solicitacao`.`created_at` DESC LIMIT 0, 12;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Solicitacao.createdAt' in 'field list'","sql":"SELECT `Solicitacao`.`id`, `Solicitacao`.`numero`, `Solicitacao`.`titulo`, `Solicitacao`.`descricao`, `Solicitacao`.`categoria`, `Solicitacao`.`subcategoria`, `Solicitacao`.`category_id`, `Solicitacao`.`subcategory_id`, `Solicitacao`.`ativo_id`, `Solicitacao`.`setor_id`, `Solicitacao`.`prioridade`, `Solicitacao`.`status`, `Solicitacao`.`localizacao`, `Solicitacao`.`observacoes`, `Solicitacao`.`data_prevista`, `Solicitacao`.`data_fechamento`, `Solicitacao`.`solicitante_id`, `Solicitacao`.`responsavel_id`, `Solicitacao`.`department_id`, `Solicitacao`.`createdAt`, `Solicitacao`.`updatedAt`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `category`.`id` AS `category.id`, `category`.`nome` AS `category.nome`, `subcategory`.`id` AS `subcategory.id`, `subcategory`.`nome` AS `subcategory.nome` FROM `solicitacoes` AS `Solicitacao` LEFT OUTER JOIN `users` AS `solicitante` ON `Solicitacao`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Solicitacao`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Solicitacao`.`department_id` = `department`.`id` LEFT OUTER JOIN `categories` AS `category` ON `Solicitacao`.`category_id` = `category`.`id` LEFT OUTER JOIN `subcategories` AS `subcategory` ON `Solicitacao`.`subcategory_id` = `subcategory`.`id` ORDER BY `Solicitacao`.`created_at` DESC LIMIT 0, 12;"},"sql":"SELECT `Solicitacao`.`id`, `Solicitacao`.`numero`, `Solicitacao`.`titulo`, `Solicitacao`.`descricao`, `Solicitacao`.`categoria`, `Solicitacao`.`subcategoria`, `Solicitacao`.`category_id`, `Solicitacao`.`subcategory_id`, `Solicitacao`.`ativo_id`, `Solicitacao`.`setor_id`, `Solicitacao`.`prioridade`, `Solicitacao`.`status`, `Solicitacao`.`localizacao`, `Solicitacao`.`observacoes`, `Solicitacao`.`data_prevista`, `Solicitacao`.`data_fechamento`, `Solicitacao`.`solicitante_id`, `Solicitacao`.`responsavel_id`, `Solicitacao`.`department_id`, `Solicitacao`.`createdAt`, `Solicitacao`.`updatedAt`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `category`.`id` AS `category.id`, `category`.`nome` AS `category.nome`, `subcategory`.`id` AS `subcategory.id`, `subcategory`.`nome` AS `subcategory.nome` FROM `solicitacoes` AS `Solicitacao` LEFT OUTER JOIN `users` AS `solicitante` ON `Solicitacao`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Solicitacao`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Solicitacao`.`department_id` = `department`.`id` LEFT OUTER JOIN `categories` AS `category` ON `Solicitacao`.`category_id` = `category`.`id` LEFT OUTER JOIN `subcategories` AS `subcategory` ON `Solicitacao`.`subcategory_id` = `subcategory`.`id` ORDER BY `Solicitacao`.`created_at` DESC LIMIT 0, 12;","parameters":{}}
{"timestamp":"2025-08-22 20:10:17","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Solicitacao.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Solicitacao.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async QueryOptimizer.getCached (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:134:18)\n    at async index (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:86:45)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 20:10:47","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ativos: Unknown column 'Ativo.createdAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Ativo.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Ativo.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AtivoController.js:100:39)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Ativo.createdAt' in 'field list'","sql":"SELECT `Ativo`.`id`, `Ativo`.`codigo_patrimonio`, `Ativo`.`nome`, `Ativo`.`fabricante`, `Ativo`.`modelo`, `Ativo`.`numero_serie`, `Ativo`.`ano_fabricacao`, `Ativo`.`data_aquisicao`, `Ativo`.`valor_aquisicao`, `Ativo`.`valor_atual`, `Ativo`.`categoria_id`, `Ativo`.`subcategoria_id`, `Ativo`.`department_id`, `Ativo`.`localizacao_completa`, `Ativo`.`predio`, `Ativo`.`andar`, `Ativo`.`sala`, `Ativo`.`posicao`, `Ativo`.`estado`, `Ativo`.`criticidade`, `Ativo`.`potencia`, `Ativo`.`tensao`, `Ativo`.`frequencia`, `Ativo`.`peso`, `Ativo`.`dimensoes`, `Ativo`.`capacidade`, `Ativo`.`fornecedor`, `Ativo`.`garantia_ate`, `Ativo`.`manual_operacao`, `Ativo`.`manual_manutencao`, `Ativo`.`especificacoes_tecnicas`, `Ativo`.`observacoes`, `Ativo`.`qr_code`, `Ativo`.`foto_principal`, `Ativo`.`responsavel_id`, `Ativo`.`setor_id`, `Ativo`.`data_proxima_inspecao`, `Ativo`.`horas_funcionamento`, `Ativo`.`contador_producao`, `Ativo`.`ativo`, `Ativo`.`vida_util_anos`, `Ativo`.`ultima_manutencao`, `Ativo`.`proxima_manutencao`, `Ativo`.`intervalo_manutencao_dias`, `Ativo`.`custo_manutencao_total`, `Ativo`.`mtbf_horas`, `Ativo`.`mttr_horas`, `Ativo`.`historico_falhas`, `Ativo`.`parametros_operacao`, `Ativo`.`documentos_anexos`, `Ativo`.`createdAt`, `Ativo`.`updatedAt`, `categoria`.`id` AS `categoria.id`, `categoria`.`nome` AS `categoria.nome`, `categoria`.`cor` AS `categoria.cor`, `categoria`.`icone` AS `categoria.icone`, `subcategoria`.`id` AS `subcategoria.id`, `subcategoria`.`nome` AS `subcategoria.nome`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `setor`.`id` AS `setor.id`, `setor`.`codigo` AS `setor.codigo`, `setor`.`nome` AS `setor.nome`, `setor`.`localizacao` AS `setor.localizacao` FROM `ativos` AS `Ativo` LEFT OUTER JOIN `categories` AS `categoria` ON `Ativo`.`categoria_id` = `categoria`.`id` LEFT OUTER JOIN `subcategories` AS `subcategoria` ON `Ativo`.`subcategoria_id` = `subcategoria`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Ativo`.`department_id` = `department`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Ativo`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `setores` AS `setor` ON `Ativo`.`setor_id` = `setor`.`id` WHERE `Ativo`.`ativo` = true AND `Ativo`.`setor_id` = '8' ORDER BY `Ativo`.`nome` ASC LIMIT 0, 200;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Ativo.createdAt' in 'field list'","sql":"SELECT `Ativo`.`id`, `Ativo`.`codigo_patrimonio`, `Ativo`.`nome`, `Ativo`.`fabricante`, `Ativo`.`modelo`, `Ativo`.`numero_serie`, `Ativo`.`ano_fabricacao`, `Ativo`.`data_aquisicao`, `Ativo`.`valor_aquisicao`, `Ativo`.`valor_atual`, `Ativo`.`categoria_id`, `Ativo`.`subcategoria_id`, `Ativo`.`department_id`, `Ativo`.`localizacao_completa`, `Ativo`.`predio`, `Ativo`.`andar`, `Ativo`.`sala`, `Ativo`.`posicao`, `Ativo`.`estado`, `Ativo`.`criticidade`, `Ativo`.`potencia`, `Ativo`.`tensao`, `Ativo`.`frequencia`, `Ativo`.`peso`, `Ativo`.`dimensoes`, `Ativo`.`capacidade`, `Ativo`.`fornecedor`, `Ativo`.`garantia_ate`, `Ativo`.`manual_operacao`, `Ativo`.`manual_manutencao`, `Ativo`.`especificacoes_tecnicas`, `Ativo`.`observacoes`, `Ativo`.`qr_code`, `Ativo`.`foto_principal`, `Ativo`.`responsavel_id`, `Ativo`.`setor_id`, `Ativo`.`data_proxima_inspecao`, `Ativo`.`horas_funcionamento`, `Ativo`.`contador_producao`, `Ativo`.`ativo`, `Ativo`.`vida_util_anos`, `Ativo`.`ultima_manutencao`, `Ativo`.`proxima_manutencao`, `Ativo`.`intervalo_manutencao_dias`, `Ativo`.`custo_manutencao_total`, `Ativo`.`mtbf_horas`, `Ativo`.`mttr_horas`, `Ativo`.`historico_falhas`, `Ativo`.`parametros_operacao`, `Ativo`.`documentos_anexos`, `Ativo`.`createdAt`, `Ativo`.`updatedAt`, `categoria`.`id` AS `categoria.id`, `categoria`.`nome` AS `categoria.nome`, `categoria`.`cor` AS `categoria.cor`, `categoria`.`icone` AS `categoria.icone`, `subcategoria`.`id` AS `subcategoria.id`, `subcategoria`.`nome` AS `subcategoria.nome`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `setor`.`id` AS `setor.id`, `setor`.`codigo` AS `setor.codigo`, `setor`.`nome` AS `setor.nome`, `setor`.`localizacao` AS `setor.localizacao` FROM `ativos` AS `Ativo` LEFT OUTER JOIN `categories` AS `categoria` ON `Ativo`.`categoria_id` = `categoria`.`id` LEFT OUTER JOIN `subcategories` AS `subcategoria` ON `Ativo`.`subcategoria_id` = `subcategoria`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Ativo`.`department_id` = `department`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Ativo`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `setores` AS `setor` ON `Ativo`.`setor_id` = `setor`.`id` WHERE `Ativo`.`ativo` = true AND `Ativo`.`setor_id` = '8' ORDER BY `Ativo`.`nome` ASC LIMIT 0, 200;"},"sql":"SELECT `Ativo`.`id`, `Ativo`.`codigo_patrimonio`, `Ativo`.`nome`, `Ativo`.`fabricante`, `Ativo`.`modelo`, `Ativo`.`numero_serie`, `Ativo`.`ano_fabricacao`, `Ativo`.`data_aquisicao`, `Ativo`.`valor_aquisicao`, `Ativo`.`valor_atual`, `Ativo`.`categoria_id`, `Ativo`.`subcategoria_id`, `Ativo`.`department_id`, `Ativo`.`localizacao_completa`, `Ativo`.`predio`, `Ativo`.`andar`, `Ativo`.`sala`, `Ativo`.`posicao`, `Ativo`.`estado`, `Ativo`.`criticidade`, `Ativo`.`potencia`, `Ativo`.`tensao`, `Ativo`.`frequencia`, `Ativo`.`peso`, `Ativo`.`dimensoes`, `Ativo`.`capacidade`, `Ativo`.`fornecedor`, `Ativo`.`garantia_ate`, `Ativo`.`manual_operacao`, `Ativo`.`manual_manutencao`, `Ativo`.`especificacoes_tecnicas`, `Ativo`.`observacoes`, `Ativo`.`qr_code`, `Ativo`.`foto_principal`, `Ativo`.`responsavel_id`, `Ativo`.`setor_id`, `Ativo`.`data_proxima_inspecao`, `Ativo`.`horas_funcionamento`, `Ativo`.`contador_producao`, `Ativo`.`ativo`, `Ativo`.`vida_util_anos`, `Ativo`.`ultima_manutencao`, `Ativo`.`proxima_manutencao`, `Ativo`.`intervalo_manutencao_dias`, `Ativo`.`custo_manutencao_total`, `Ativo`.`mtbf_horas`, `Ativo`.`mttr_horas`, `Ativo`.`historico_falhas`, `Ativo`.`parametros_operacao`, `Ativo`.`documentos_anexos`, `Ativo`.`createdAt`, `Ativo`.`updatedAt`, `categoria`.`id` AS `categoria.id`, `categoria`.`nome` AS `categoria.nome`, `categoria`.`cor` AS `categoria.cor`, `categoria`.`icone` AS `categoria.icone`, `subcategoria`.`id` AS `subcategoria.id`, `subcategoria`.`nome` AS `subcategoria.nome`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `setor`.`id` AS `setor.id`, `setor`.`codigo` AS `setor.codigo`, `setor`.`nome` AS `setor.nome`, `setor`.`localizacao` AS `setor.localizacao` FROM `ativos` AS `Ativo` LEFT OUTER JOIN `categories` AS `categoria` ON `Ativo`.`categoria_id` = `categoria`.`id` LEFT OUTER JOIN `subcategories` AS `subcategoria` ON `Ativo`.`subcategoria_id` = `subcategoria`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Ativo`.`department_id` = `department`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Ativo`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `setores` AS `setor` ON `Ativo`.`setor_id` = `setor`.`id` WHERE `Ativo`.`ativo` = true AND `Ativo`.`setor_id` = '8' ORDER BY `Ativo`.`nome` ASC LIMIT 0, 200;","parameters":{}}
{"timestamp":"2025-08-22 20:10:47","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Ativo.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Ativo.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AtivoController.js:100:39)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 20:11:07","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ativos: Unknown column 'Ativo.createdAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Ativo.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Ativo.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AtivoController.js:100:39)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Ativo.createdAt' in 'field list'","sql":"SELECT `Ativo`.`id`, `Ativo`.`codigo_patrimonio`, `Ativo`.`nome`, `Ativo`.`fabricante`, `Ativo`.`modelo`, `Ativo`.`numero_serie`, `Ativo`.`ano_fabricacao`, `Ativo`.`data_aquisicao`, `Ativo`.`valor_aquisicao`, `Ativo`.`valor_atual`, `Ativo`.`categoria_id`, `Ativo`.`subcategoria_id`, `Ativo`.`department_id`, `Ativo`.`localizacao_completa`, `Ativo`.`predio`, `Ativo`.`andar`, `Ativo`.`sala`, `Ativo`.`posicao`, `Ativo`.`estado`, `Ativo`.`criticidade`, `Ativo`.`potencia`, `Ativo`.`tensao`, `Ativo`.`frequencia`, `Ativo`.`peso`, `Ativo`.`dimensoes`, `Ativo`.`capacidade`, `Ativo`.`fornecedor`, `Ativo`.`garantia_ate`, `Ativo`.`manual_operacao`, `Ativo`.`manual_manutencao`, `Ativo`.`especificacoes_tecnicas`, `Ativo`.`observacoes`, `Ativo`.`qr_code`, `Ativo`.`foto_principal`, `Ativo`.`responsavel_id`, `Ativo`.`setor_id`, `Ativo`.`data_proxima_inspecao`, `Ativo`.`horas_funcionamento`, `Ativo`.`contador_producao`, `Ativo`.`ativo`, `Ativo`.`vida_util_anos`, `Ativo`.`ultima_manutencao`, `Ativo`.`proxima_manutencao`, `Ativo`.`intervalo_manutencao_dias`, `Ativo`.`custo_manutencao_total`, `Ativo`.`mtbf_horas`, `Ativo`.`mttr_horas`, `Ativo`.`historico_falhas`, `Ativo`.`parametros_operacao`, `Ativo`.`documentos_anexos`, `Ativo`.`createdAt`, `Ativo`.`updatedAt`, `categoria`.`id` AS `categoria.id`, `categoria`.`nome` AS `categoria.nome`, `categoria`.`cor` AS `categoria.cor`, `categoria`.`icone` AS `categoria.icone`, `subcategoria`.`id` AS `subcategoria.id`, `subcategoria`.`nome` AS `subcategoria.nome`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `setor`.`id` AS `setor.id`, `setor`.`codigo` AS `setor.codigo`, `setor`.`nome` AS `setor.nome`, `setor`.`localizacao` AS `setor.localizacao` FROM `ativos` AS `Ativo` LEFT OUTER JOIN `categories` AS `categoria` ON `Ativo`.`categoria_id` = `categoria`.`id` LEFT OUTER JOIN `subcategories` AS `subcategoria` ON `Ativo`.`subcategoria_id` = `subcategoria`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Ativo`.`department_id` = `department`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Ativo`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `setores` AS `setor` ON `Ativo`.`setor_id` = `setor`.`id` WHERE `Ativo`.`ativo` = true ORDER BY `Ativo`.`nome` ASC LIMIT 0, 10;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'Ativo.createdAt' in 'field list'","sql":"SELECT `Ativo`.`id`, `Ativo`.`codigo_patrimonio`, `Ativo`.`nome`, `Ativo`.`fabricante`, `Ativo`.`modelo`, `Ativo`.`numero_serie`, `Ativo`.`ano_fabricacao`, `Ativo`.`data_aquisicao`, `Ativo`.`valor_aquisicao`, `Ativo`.`valor_atual`, `Ativo`.`categoria_id`, `Ativo`.`subcategoria_id`, `Ativo`.`department_id`, `Ativo`.`localizacao_completa`, `Ativo`.`predio`, `Ativo`.`andar`, `Ativo`.`sala`, `Ativo`.`posicao`, `Ativo`.`estado`, `Ativo`.`criticidade`, `Ativo`.`potencia`, `Ativo`.`tensao`, `Ativo`.`frequencia`, `Ativo`.`peso`, `Ativo`.`dimensoes`, `Ativo`.`capacidade`, `Ativo`.`fornecedor`, `Ativo`.`garantia_ate`, `Ativo`.`manual_operacao`, `Ativo`.`manual_manutencao`, `Ativo`.`especificacoes_tecnicas`, `Ativo`.`observacoes`, `Ativo`.`qr_code`, `Ativo`.`foto_principal`, `Ativo`.`responsavel_id`, `Ativo`.`setor_id`, `Ativo`.`data_proxima_inspecao`, `Ativo`.`horas_funcionamento`, `Ativo`.`contador_producao`, `Ativo`.`ativo`, `Ativo`.`vida_util_anos`, `Ativo`.`ultima_manutencao`, `Ativo`.`proxima_manutencao`, `Ativo`.`intervalo_manutencao_dias`, `Ativo`.`custo_manutencao_total`, `Ativo`.`mtbf_horas`, `Ativo`.`mttr_horas`, `Ativo`.`historico_falhas`, `Ativo`.`parametros_operacao`, `Ativo`.`documentos_anexos`, `Ativo`.`createdAt`, `Ativo`.`updatedAt`, `categoria`.`id` AS `categoria.id`, `categoria`.`nome` AS `categoria.nome`, `categoria`.`cor` AS `categoria.cor`, `categoria`.`icone` AS `categoria.icone`, `subcategoria`.`id` AS `subcategoria.id`, `subcategoria`.`nome` AS `subcategoria.nome`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `setor`.`id` AS `setor.id`, `setor`.`codigo` AS `setor.codigo`, `setor`.`nome` AS `setor.nome`, `setor`.`localizacao` AS `setor.localizacao` FROM `ativos` AS `Ativo` LEFT OUTER JOIN `categories` AS `categoria` ON `Ativo`.`categoria_id` = `categoria`.`id` LEFT OUTER JOIN `subcategories` AS `subcategoria` ON `Ativo`.`subcategoria_id` = `subcategoria`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Ativo`.`department_id` = `department`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Ativo`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `setores` AS `setor` ON `Ativo`.`setor_id` = `setor`.`id` WHERE `Ativo`.`ativo` = true ORDER BY `Ativo`.`nome` ASC LIMIT 0, 10;"},"sql":"SELECT `Ativo`.`id`, `Ativo`.`codigo_patrimonio`, `Ativo`.`nome`, `Ativo`.`fabricante`, `Ativo`.`modelo`, `Ativo`.`numero_serie`, `Ativo`.`ano_fabricacao`, `Ativo`.`data_aquisicao`, `Ativo`.`valor_aquisicao`, `Ativo`.`valor_atual`, `Ativo`.`categoria_id`, `Ativo`.`subcategoria_id`, `Ativo`.`department_id`, `Ativo`.`localizacao_completa`, `Ativo`.`predio`, `Ativo`.`andar`, `Ativo`.`sala`, `Ativo`.`posicao`, `Ativo`.`estado`, `Ativo`.`criticidade`, `Ativo`.`potencia`, `Ativo`.`tensao`, `Ativo`.`frequencia`, `Ativo`.`peso`, `Ativo`.`dimensoes`, `Ativo`.`capacidade`, `Ativo`.`fornecedor`, `Ativo`.`garantia_ate`, `Ativo`.`manual_operacao`, `Ativo`.`manual_manutencao`, `Ativo`.`especificacoes_tecnicas`, `Ativo`.`observacoes`, `Ativo`.`qr_code`, `Ativo`.`foto_principal`, `Ativo`.`responsavel_id`, `Ativo`.`setor_id`, `Ativo`.`data_proxima_inspecao`, `Ativo`.`horas_funcionamento`, `Ativo`.`contador_producao`, `Ativo`.`ativo`, `Ativo`.`vida_util_anos`, `Ativo`.`ultima_manutencao`, `Ativo`.`proxima_manutencao`, `Ativo`.`intervalo_manutencao_dias`, `Ativo`.`custo_manutencao_total`, `Ativo`.`mtbf_horas`, `Ativo`.`mttr_horas`, `Ativo`.`historico_falhas`, `Ativo`.`parametros_operacao`, `Ativo`.`documentos_anexos`, `Ativo`.`createdAt`, `Ativo`.`updatedAt`, `categoria`.`id` AS `categoria.id`, `categoria`.`nome` AS `categoria.nome`, `categoria`.`cor` AS `categoria.cor`, `categoria`.`icone` AS `categoria.icone`, `subcategoria`.`id` AS `subcategoria.id`, `subcategoria`.`nome` AS `subcategoria.nome`, `department`.`id` AS `department.id`, `department`.`nome` AS `department.nome`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `setor`.`id` AS `setor.id`, `setor`.`codigo` AS `setor.codigo`, `setor`.`nome` AS `setor.nome`, `setor`.`localizacao` AS `setor.localizacao` FROM `ativos` AS `Ativo` LEFT OUTER JOIN `categories` AS `categoria` ON `Ativo`.`categoria_id` = `categoria`.`id` LEFT OUTER JOIN `subcategories` AS `subcategoria` ON `Ativo`.`subcategoria_id` = `subcategoria`.`id` LEFT OUTER JOIN `departments` AS `department` ON `Ativo`.`department_id` = `department`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `Ativo`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `setores` AS `setor` ON `Ativo`.`setor_id` = `setor`.`id` WHERE `Ativo`.`ativo` = true ORDER BY `Ativo`.`nome` ASC LIMIT 0, 10;","parameters":{}}
{"timestamp":"2025-08-22 20:11:07","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Ativo.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async Ativo.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\AtivoController.js:100:39)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 20:20:49","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Table 'manutencao_db.fmea_analyses' doesn't exist","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.rawSelect (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:434:18)\n    at async OrdemServico.aggregate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1277:19)\n    at async OrdemServico.count (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1306:20)\n    at async Promise.all (index 0)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_NO_SUCH_TABLE","errno":1146,"sqlState":"42S02","sqlMessage":"Table 'manutencao_db.fmea_analyses' doesn't exist","sql":"SELECT count(`OrdemServico`.`id`) AS `count` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` LEFT OUTER JOIN `fmea_analyses` AS `fmea` ON `OrdemServico`.`fmea_id` = `fmea`.`id`;"},"original":{"code":"ER_NO_SUCH_TABLE","errno":1146,"sqlState":"42S02","sqlMessage":"Table 'manutencao_db.fmea_analyses' doesn't exist","sql":"SELECT count(`OrdemServico`.`id`) AS `count` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` LEFT OUTER JOIN `fmea_analyses` AS `fmea` ON `OrdemServico`.`fmea_id` = `fmea`.`id`;"},"sql":"SELECT count(`OrdemServico`.`id`) AS `count` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` LEFT OUTER JOIN `fmea_analyses` AS `fmea` ON `OrdemServico`.`fmea_id` = `fmea`.`id`;","parameters":{}}
{"timestamp":"2025-08-22 20:22:29","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar imagens: Unknown column 'createdAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async AtivoImagem.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async listarImagens (C:\\Manutencao\\backend\\controllers\\AtivoController.js:674:23)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'createdAt' in 'field list'","sql":"SELECT `id`, `ativo_id`, `nome_arquivo`, `caminho`, `tipo`, `tamanho`, `descricao`, `ordem`, `createdAt`, `updatedAt` FROM `ativo_imagens` AS `AtivoImagem` WHERE `AtivoImagem`.`ativo_id` = '5' ORDER BY `AtivoImagem`.`ordem` ASC, `AtivoImagem`.`createdAt` ASC;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'createdAt' in 'field list'","sql":"SELECT `id`, `ativo_id`, `nome_arquivo`, `caminho`, `tipo`, `tamanho`, `descricao`, `ordem`, `createdAt`, `updatedAt` FROM `ativo_imagens` AS `AtivoImagem` WHERE `AtivoImagem`.`ativo_id` = '5' ORDER BY `AtivoImagem`.`ordem` ASC, `AtivoImagem`.`createdAt` ASC;"},"sql":"SELECT `id`, `ativo_id`, `nome_arquivo`, `caminho`, `tipo`, `tamanho`, `descricao`, `ordem`, `createdAt`, `updatedAt` FROM `ativo_imagens` AS `AtivoImagem` WHERE `AtivoImagem`.`ativo_id` = '5' ORDER BY `AtivoImagem`.`ordem` ASC, `AtivoImagem`.`createdAt` ASC;","parameters":{}}
{"timestamp":"2025-08-22 20:22:29","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async AtivoImagem.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async listarImagens (C:\\Manutencao\\backend\\controllers\\AtivoController.js:674:23)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 20:22:36","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar imagens: Unknown column 'createdAt' in 'field list'","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async AtivoImagem.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async listarImagens (C:\\Manutencao\\backend\\controllers\\AtivoController.js:674:23)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'createdAt' in 'field list'","sql":"SELECT `id`, `ativo_id`, `nome_arquivo`, `caminho`, `tipo`, `tamanho`, `descricao`, `ordem`, `createdAt`, `updatedAt` FROM `ativo_imagens` AS `AtivoImagem` WHERE `AtivoImagem`.`ativo_id` = '5' ORDER BY `AtivoImagem`.`ordem` ASC, `AtivoImagem`.`createdAt` ASC;"},"original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sqlState":"42S22","sqlMessage":"Unknown column 'createdAt' in 'field list'","sql":"SELECT `id`, `ativo_id`, `nome_arquivo`, `caminho`, `tipo`, `tamanho`, `descricao`, `ordem`, `createdAt`, `updatedAt` FROM `ativo_imagens` AS `AtivoImagem` WHERE `AtivoImagem`.`ativo_id` = '5' ORDER BY `AtivoImagem`.`ordem` ASC, `AtivoImagem`.`createdAt` ASC;"},"sql":"SELECT `id`, `ativo_id`, `nome_arquivo`, `caminho`, `tipo`, `tamanho`, `descricao`, `ordem`, `createdAt`, `updatedAt` FROM `ativo_imagens` AS `AtivoImagem` WHERE `AtivoImagem`.`ativo_id` = '5' ORDER BY `AtivoImagem`.`ordem` ASC, `AtivoImagem`.`createdAt` ASC;","parameters":{}}
{"timestamp":"2025-08-22 20:22:36","level":"\u001b[31merror\u001b[39m","message":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async AtivoImagem.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async listarImagens (C:\\Manutencao\\backend\\controllers\\AtivoController.js:674:23)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 20:27:18","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Table 'manutencao_db.fmea_analyses' doesn't exist","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async OrdemServico.findAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async Promise.all (index 1)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:74:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_NO_SUCH_TABLE","errno":1146,"sqlState":"42S02","sqlMessage":"Table 'manutencao_db.fmea_analyses' doesn't exist","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`ativo_id` AS `solicitacao.ativo_id`, `solicitacao`.`setor_id` AS `solicitacao.setor_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.created_at`, `solicitacao`.`updated_at` AS `solicitacao.updated_at`, `fmea`.`id` AS `fmea.id`, `fmea`.`component` AS `fmea.component`, `fmea`.`failure_mode` AS `fmea.failure_mode`, `fmea`.`rpn` AS `fmea.rpn` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` LEFT OUTER JOIN `fmea_analyses` AS `fmea` ON `OrdemServico`.`fmea_id` = `fmea`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"original":{"code":"ER_NO_SUCH_TABLE","errno":1146,"sqlState":"42S02","sqlMessage":"Table 'manutencao_db.fmea_analyses' doesn't exist","sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`ativo_id` AS `solicitacao.ativo_id`, `solicitacao`.`setor_id` AS `solicitacao.setor_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.created_at`, `solicitacao`.`updated_at` AS `solicitacao.updated_at`, `fmea`.`id` AS `fmea.id`, `fmea`.`component` AS `fmea.component`, `fmea`.`failure_mode` AS `fmea.failure_mode`, `fmea`.`rpn` AS `fmea.rpn` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` LEFT OUTER JOIN `fmea_analyses` AS `fmea` ON `OrdemServico`.`fmea_id` = `fmea`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;"},"sql":"SELECT `OrdemServico`.`id`, `OrdemServico`.`numero_os`, `OrdemServico`.`tipo`, `OrdemServico`.`descricao_servico`, `OrdemServico`.`status`, `OrdemServico`.`prioridade`, `OrdemServico`.`data_inicio_prevista`, `OrdemServico`.`data_inicio_real`, `OrdemServico`.`data_fim_prevista`, `OrdemServico`.`data_fim_real`, `OrdemServico`.`horas_planejadas`, `OrdemServico`.`horas_realizadas`, `OrdemServico`.`custo_total`, `OrdemServico`.`observacoes_execucao`, `OrdemServico`.`ativo_id`, `OrdemServico`.`solicitante_id`, `OrdemServico`.`responsavel_id`, `OrdemServico`.`created_at`, `OrdemServico`.`updated_at`, `ativo`.`id` AS `ativo.id`, `ativo`.`nome` AS `ativo.nome`, `ativo`.`codigo_patrimonio` AS `ativo.codigo_patrimonio`, `responsavel`.`id` AS `responsavel.id`, `responsavel`.`nome` AS `responsavel.nome`, `responsavel`.`email` AS `responsavel.email`, `solicitante`.`id` AS `solicitante.id`, `solicitante`.`nome` AS `solicitante.nome`, `solicitante`.`email` AS `solicitante.email`, `solicitacao`.`id` AS `solicitacao.id`, `solicitacao`.`numero` AS `solicitacao.numero`, `solicitacao`.`titulo` AS `solicitacao.titulo`, `solicitacao`.`descricao` AS `solicitacao.descricao`, `solicitacao`.`categoria` AS `solicitacao.categoria`, `solicitacao`.`subcategoria` AS `solicitacao.subcategoria`, `solicitacao`.`category_id` AS `solicitacao.category_id`, `solicitacao`.`subcategory_id` AS `solicitacao.subcategory_id`, `solicitacao`.`ativo_id` AS `solicitacao.ativo_id`, `solicitacao`.`setor_id` AS `solicitacao.setor_id`, `solicitacao`.`prioridade` AS `solicitacao.prioridade`, `solicitacao`.`status` AS `solicitacao.status`, `solicitacao`.`localizacao` AS `solicitacao.localizacao`, `solicitacao`.`observacoes` AS `solicitacao.observacoes`, `solicitacao`.`data_prevista` AS `solicitacao.data_prevista`, `solicitacao`.`data_fechamento` AS `solicitacao.data_fechamento`, `solicitacao`.`solicitante_id` AS `solicitacao.solicitante_id`, `solicitacao`.`responsavel_id` AS `solicitacao.responsavel_id`, `solicitacao`.`department_id` AS `solicitacao.department_id`, `solicitacao`.`created_at` AS `solicitacao.created_at`, `solicitacao`.`updated_at` AS `solicitacao.updated_at`, `fmea`.`id` AS `fmea.id`, `fmea`.`component` AS `fmea.component`, `fmea`.`failure_mode` AS `fmea.failure_mode`, `fmea`.`rpn` AS `fmea.rpn` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` LEFT OUTER JOIN `fmea_analyses` AS `fmea` ON `OrdemServico`.`fmea_id` = `fmea`.`id` ORDER BY `OrdemServico`.`prioridade` DESC, `OrdemServico`.`data_inicio_prevista` ASC, `OrdemServico`.`created_at` DESC LIMIT 0, 1;","parameters":{}}
{"timestamp":"2025-08-22 20:28:18","level":"\u001b[31merror\u001b[39m","message":"Transaction Failed","service":"sistema-manutencao","environment":"development","version":"1.0.0","duration":"12ms","error":"notNull Violation: Solicitacao.numero cannot be null"}
{"timestamp":"2025-08-22 20:28:18","level":"\u001b[31merror\u001b[39m","message":"Erro ao criar solicitação: notNull Violation: Solicitacao.numero cannot be null","stack":"SequelizeValidationError: notNull Violation: Solicitacao.numero cannot be null\n    at InstanceValidator._validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:60:7)\n    at async InstanceValidator.validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:54:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2426:7)\n    at async Solicitacao.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:276:29\n    at async TransactionHelper.executeInTransaction (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:265:22)\n    at async store (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:256:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeValidationError","errors":[{"message":"Solicitacao.numero cannot be null","type":"notNull Violation","path":"numero","value":null,"origin":"CORE","instance":{"status":"aberta","id":null,"titulo":"computador não se conecta com a rede","descricao":"auth.js:10 🔐 Store: Verificando localStorage na inicialização...\nauth.js:13 🔐 Store: Token no localStorage: EXISTE\nauth.js:14 🔐 Store: Refresh token no localStorage: EXISTE\nauth.js:21 🔐 Store: Valores iniciais: Object\nauth.js:122 🔐 Verificando token...\napi.js:19 📤 GET /auth/verify undefined\nindex.js:291 🔐 Router: Usuário sem dados mas com token, verificando...\nauth.js:122 🔐 Verificando token...\napi.js:19 📤 GET /auth/verify undefined\napi.js:31 📥 Resposta de /auth/verify: Object\nauth.js:129 🔐 Resposta da verificação: Object\nauth.js:133 🔐 Token válido, usuário definido: Proxy(Object)\napi.js:31 📥 Resposta de /auth/verify: Object\nauth.js:129 🔐 Resposta da verificação: Object\nauth.js:133 🔐 Token válido, usuário definido: Proxy(Object)\nindex.js:294 🔐 Router: Token verificado com sucesso\nindex.js:301 🔐 Router: Estado atual: Object\nindex.js:301 🔐 Router: Estado atual: Object\napi.js:19 📤 GET /solicitacoes?limit=1 undefined\napi.js:19 📤 GET /ordens-servico?limit=1 undefined\napi","category_id":8,"subcategory_id":5,"prioridade":"alta","localizacao":"","data_prevista":null,"ativo_id":1,"setor_id":8,"solicitante_id":1,"categoria":null,"subcategoria":null,"department_id":null,"updated_at":"2025-08-22T23:28:18.655Z","created_at":"2025-08-22T23:28:18.655Z"},"validatorKey":"is_null","validatorName":null,"validatorArgs":[]}]}
{"timestamp":"2025-08-22 20:28:18","level":"\u001b[31merror\u001b[39m","message":"SequelizeValidationError: notNull Violation: Solicitacao.numero cannot be null\n    at InstanceValidator._validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:60:7)\n    at async InstanceValidator.validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:54:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2426:7)\n    at async Solicitacao.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:276:29\n    at async TransactionHelper.executeInTransaction (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:265:22)\n    at async store (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:256:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 20:28:41","level":"\u001b[31merror\u001b[39m","message":"Transaction Failed","service":"sistema-manutencao","environment":"development","version":"1.0.0","duration":"2ms","error":"notNull Violation: Solicitacao.numero cannot be null"}
{"timestamp":"2025-08-22 20:28:41","level":"\u001b[31merror\u001b[39m","message":"Erro ao criar solicitação: notNull Violation: Solicitacao.numero cannot be null","stack":"SequelizeValidationError: notNull Violation: Solicitacao.numero cannot be null\n    at InstanceValidator._validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:60:7)\n    at async InstanceValidator.validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:54:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2426:7)\n    at async Solicitacao.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:276:29\n    at async TransactionHelper.executeInTransaction (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:265:22)\n    at async store (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:256:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeValidationError","errors":[{"message":"Solicitacao.numero cannot be null","type":"notNull Violation","path":"numero","value":null,"origin":"CORE","instance":{"status":"aberta","id":null,"titulo":"computador não se conecta com a rede","descricao":"coputador","category_id":8,"subcategory_id":5,"prioridade":"alta","localizacao":"","data_prevista":null,"ativo_id":1,"setor_id":8,"solicitante_id":1,"categoria":null,"subcategoria":null,"department_id":null,"updated_at":"2025-08-22T23:28:41.308Z","created_at":"2025-08-22T23:28:41.308Z"},"validatorKey":"is_null","validatorName":null,"validatorArgs":[]}]}
{"timestamp":"2025-08-22 20:28:41","level":"\u001b[31merror\u001b[39m","message":"SequelizeValidationError: notNull Violation: Solicitacao.numero cannot be null\n    at InstanceValidator._validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:60:7)\n    at async InstanceValidator.validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:54:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2426:7)\n    at async Solicitacao.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:276:29\n    at async TransactionHelper.executeInTransaction (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:265:22)\n    at async store (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:256:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
{"timestamp":"2025-08-22 20:53:28","level":"\u001b[31merror\u001b[39m","message":"Erro ao listar ordens de serviço: Table 'manutencao_db.fmea_analyses' doesn't exist","stack":"Error\n    at Query.run (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.rawSelect (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:434:18)\n    at async OrdemServico.aggregate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1277:19)\n    at async OrdemServico.count (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1306:20)\n    at async Promise.all (index 0)\n    at async OrdemServico.findAndCountAll (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1322:27)\n    at async index (C:\\Manutencao\\backend\\controllers\\OrdemServicoController.js:69:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeDatabaseError","parent":{"code":"ER_NO_SUCH_TABLE","errno":1146,"sqlState":"42S02","sqlMessage":"Table 'manutencao_db.fmea_analyses' doesn't exist","sql":"SELECT count(`OrdemServico`.`id`) AS `count` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` LEFT OUTER JOIN `fmea_analyses` AS `fmea` ON `OrdemServico`.`fmea_id` = `fmea`.`id`;"},"original":{"code":"ER_NO_SUCH_TABLE","errno":1146,"sqlState":"42S02","sqlMessage":"Table 'manutencao_db.fmea_analyses' doesn't exist","sql":"SELECT count(`OrdemServico`.`id`) AS `count` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` LEFT OUTER JOIN `fmea_analyses` AS `fmea` ON `OrdemServico`.`fmea_id` = `fmea`.`id`;"},"sql":"SELECT count(`OrdemServico`.`id`) AS `count` FROM `ordens_servico` AS `OrdemServico` LEFT OUTER JOIN `ativos` AS `ativo` ON `OrdemServico`.`ativo_id` = `ativo`.`id` LEFT OUTER JOIN `users` AS `responsavel` ON `OrdemServico`.`responsavel_id` = `responsavel`.`id` LEFT OUTER JOIN `users` AS `solicitante` ON `OrdemServico`.`solicitante_id` = `solicitante`.`id` LEFT OUTER JOIN `solicitacoes` AS `solicitacao` ON `OrdemServico`.`solicitacao_id` = `solicitacao`.`id` LEFT OUTER JOIN `fmea_analyses` AS `fmea` ON `OrdemServico`.`fmea_id` = `fmea`.`id`;","parameters":{}}
{"timestamp":"2025-08-22 20:54:06","level":"\u001b[31merror\u001b[39m","message":"Transaction Failed","service":"sistema-manutencao","environment":"development","version":"1.0.0","duration":"5ms","error":"notNull Violation: Solicitacao.numero cannot be null"}
{"timestamp":"2025-08-22 20:54:06","level":"\u001b[31merror\u001b[39m","message":"Erro ao criar solicitação: notNull Violation: Solicitacao.numero cannot be null","stack":"SequelizeValidationError: notNull Violation: Solicitacao.numero cannot be null\n    at InstanceValidator._validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:60:7)\n    at async InstanceValidator.validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:54:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2426:7)\n    at async Solicitacao.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:276:29\n    at async TransactionHelper.executeInTransaction (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:265:22)\n    at async store (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:256:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0","name":"SequelizeValidationError","errors":[{"message":"Solicitacao.numero cannot be null","type":"notNull Violation","path":"numero","value":null,"origin":"CORE","instance":{"status":"aberta","id":null,"titulo":"computador não se conecta com a rede","descricao":"computador","category_id":8,"subcategory_id":5,"prioridade":"alta","localizacao":"","data_prevista":null,"ativo_id":1,"setor_id":8,"solicitante_id":1,"categoria":null,"subcategoria":null,"department_id":null,"updated_at":"2025-08-22T23:54:06.417Z","created_at":"2025-08-22T23:54:06.417Z"},"validatorKey":"is_null","validatorName":null,"validatorArgs":[]}]}
{"timestamp":"2025-08-22 20:54:06","level":"\u001b[31merror\u001b[39m","message":"SequelizeValidationError: notNull Violation: Solicitacao.numero cannot be null\n    at InstanceValidator._validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async InstanceValidator._validateAndRunHooks (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:60:7)\n    at async InstanceValidator.validate (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\instance-validator.js:54:12)\n    at async model.save (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:2426:7)\n    at async Solicitacao.create (C:\\Manutencao\\backend\\node_modules\\sequelize\\lib\\model.js:1362:12)\n    at async C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:276:29\n    at async TransactionHelper.executeInTransaction (C:\\Manutencao\\backend\\utils\\QueryOptimizer.js:265:22)\n    at async store (C:\\Manutencao\\backend\\controllers\\SolicitacaoController.js:256:22)","service":"sistema-manutencao","environment":"development","version":"1.0.0"}
